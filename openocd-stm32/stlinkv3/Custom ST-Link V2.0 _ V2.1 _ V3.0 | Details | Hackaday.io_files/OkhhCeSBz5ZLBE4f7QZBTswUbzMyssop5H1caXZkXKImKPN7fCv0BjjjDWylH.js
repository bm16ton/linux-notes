function showSimilars(e){$("#similars .similar-project").remove();for(var t="",i="",n=0;n<e.length;n++){var r=e[n].image_url?utils.resizeImage(e[n].image_url):"/img/placeholder.png";n>4&&(t=" hide");var o="<div class='similar-project"+t+"'>";o+="    <a class='project-image-link' href='/project/"+e[n].id+"'>",o+="        <div class='project-image' style='background-image: url("+r+")'></div>",o+="        <div class='project-summary'>"+utils.escapeHtml(e[n].summary)+"</div>",o+="        <div class='project-stats'>",e[n].view_count>50&&(o+="            <span class='icon-view-count icon-small' title='View Count'>"+utils.numberFormatK(e[n].view_count)+"</span>"),o+="                <span class='icon-view icon-small' title='Followers'>"+utils.numberFormatK(e[n].follower_count)+"</span> ",o+="                <span class='icon-comment icon-small' title='Comments'>"+utils.numberFormatK(e[n].comment_count)+"</span>",o+="        </div>",o+="    </a>",o+="    <div class='project-data'>",o+="        <div class='project-data-text'>",o+="            <a class='project-data-link' href='/project/"+e[n].id+"'>"+utils.escapeHtml(e[n].name)+"</a>",o+="            <span class='author-name'>",o+="                by <a href='/hackers/"+e[n].owner.id+"'>"+utils.escapeHtml(e[n].owner.screen_name)+"</a>",o+="            </span>",o+="        </div>",o+="        <a href='#' data-href='/project/"+e[n].id+"/event/follow' class='gold-gold-button small-button follow-similar follow button-grey-gold-small'>Follow</a>",o+="    </div>",o+="</div>",i+=o}$("#similars .container").append($(i)),$("#similars").slideDown("fast"),$("#similars .submissions-close").click(function(){$("#similars").slideUp()})}function showSimilarUsers(e){$("#similar-users .similar-user").remove();for(var t="",i="",n=0;n<e.length;n++){n>2&&(t=" hide");var r="<div class='similar-user"+t+"'>";r+="        <div class='similar-user-left'>",r+="            <a class='user-image-link' href='/hacker/"+e[n].id+"'>",r+="                <img src='"+utils.resizeImage(e[n].avatar_url,"90x90")+"' />",r+="            </a>",r+="            <a href='#' data-href='/hacker/"+e[n].id+"/follow' class='gold-gold-button small-button follow-similar follow'>Follow</a>",r+="        </div>",r+="        <div class='similar-user-right'>",r+="            <a class='user-image-link' href='/hacker/"+e[n].id+"'>"+e[n].screen_name+"</a>",r+="            <div class='similar-user-summary'>"+e[n].about_me+"</div>",r+="            <div>",r+="                <span><b>"+utils.numberFormatK(e[n].followersCount)+"</b> followers</span> ",r+="                <span><b>"+utils.numberFormatK(e[n].projectsCount)+"</b> projects</span>",r+="            </div>",r+="        </div>",r+="</div>",i+=r}$("#similar-users .container").append($(i)),$("#similar-users").slideDown("fast"),$("#similar-users .submissions-close").click(function(){$("#similar-users").slideUp()})}function flatten(e){var t=[];for(var i in e)for(var n in{projects:null,users:null})for(var r=0;r<e[i][n].length;r++)e[i][n][r].deleted!==!0&&t.push(e[i][n][r]);return t}function interestsModal(e){HIO.interests.redirectURL=e,HIO.interests.init()}function createFunctionWithTimeout(e){function t(){i||(i=!0,e())}var i=!1;return setTimeout(t,1e3),t}function makeFollowsAndLikesContainer(e,t){function i(e,t){e>999&&(e=(e/1e3).toString().split(".").shift()+"k");var i=$(t),n=$("<span>",{"class":"count"}).text(e);return[i,n]}var n="undefined"!=typeof e,r="undefined"!=typeof t;if(!n&&!r)return[];var o=$("<div>",{"class":"likes-and-follows"});if(n){var s=i(Number(e),userIconSvg);o.append(s)}if(r){var a=i(Number(t),skullIconSvg);o.append(a)}return o}function scrollToComment(e){$("#j-discussion-"+e).length&&$(document).scrollTop($("#j-discussion-"+e).offset().top)}function resetEditors(){$inputComment.redactor("code.set",""),$inputComment.redactor("placeholder.enable"),$inputComment.redactor("focus.end")}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t){t=t||ie;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function n(e){var t=!!e&&"length"in e&&e.length,i=me.type(e);return"function"===i||me.isWindow(e)?!1:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,i){return me.isFunction(t)?me.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?me.grep(e,function(e){return e===t!==i}):"string"!=typeof t?me.grep(e,function(e){return ae.call(t,e)>-1!==i}):$e.test(t)?me.filter(t,e,i):(t=me.filter(t,e),me.grep(e,function(e){return ae.call(t,e)>-1!==i&&1===e.nodeType}))}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return me.each(e.match(Ne)||[],function(e,i){t[i]=!0}),t}function l(e){return e}function c(e){throw e}function d(e,t,i,n){var r;try{e&&me.isFunction(r=e.promise)?r.call(e).done(t).fail(i):e&&me.isFunction(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function u(){ie.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u),me.ready()}function h(){this.expando=me.expando+h.uid++}function p(e){return"true"===e?!0:"false"===e?!1:"null"===e?null:e===+e+""?+e:Ie.test(e)?JSON.parse(e):e}function f(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Pe,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i=p(i)}catch(r){}Le.set(e,t,i)}else i=void 0;return i}function m(e,t,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return me.css(e,t,"")},l=a(),c=i&&i[3]||(me.cssNumber[t]?"":"px"),d=(me.cssNumber[t]||"px"!==c&&+l)&&Be.exec(me.css(e,t));if(d&&d[3]!==c){c=c||d[3],i=i||[],d=+l||1;do o=o||".5",d/=o,me.style(e,t,d+c);while(o!==(o=a()/l)&&1!==o&&--s)}return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=r)),r}function g(e){var t,i=e.ownerDocument,n=e.nodeName,r=We[n];return r?r:(t=i.body.appendChild(i.createElement(n)),r=me.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),We[n]=r,r)}function v(e,t){for(var i,n,r=[],o=0,s=e.length;s>o;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(r[o]=je.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Ye(n)&&(r[o]=g(n))):"none"!==i&&(r[o]="none",je.set(n,"display",i)));for(o=0;s>o;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function y(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&r(e,t)?me.merge([e],i):i}function b(e,t){for(var i=0,n=e.length;n>i;i++)je.set(e[i],"globalEval",!t||je.get(t[i],"globalEval"))}function w(e,t,i,n,r){for(var o,s,a,l,c,d,u=t.createDocumentFragment(),h=[],p=0,f=e.length;f>p;p++)if(o=e[p],o||0===o)if("object"===me.type(o))me.merge(h,o.nodeType?[o]:o);else if(Xe.test(o)){for(s=s||u.appendChild(t.createElement("div")),a=(Ve.exec(o)||["",""])[1].toLowerCase(),l=Ke[a]||Ke._default,s.innerHTML=l[1]+me.htmlPrefilter(o)+l[2],d=l[0];d--;)s=s.lastChild;me.merge(h,s.childNodes),s=u.firstChild,s.textContent=""}else h.push(t.createTextNode(o));for(u.textContent="",p=0;o=h[p++];)if(n&&me.inArray(o,n)>-1)r&&r.push(o);else if(c=me.contains(o.ownerDocument,o),s=y(u.appendChild(o),"script"),c&&b(s),i)for(d=0;o=s[d++];)Ge.test(o.type||"")&&i.push(o);return u}function k(){return!0}function x(){return!1}function C(){try{return ie.activeElement}catch(e){}}function T(e,t,i,n,r,o){var s,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)T(e,a,i,n,t[a],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=x;else if(!r)return e;return 1===o&&(s=r,r=function(e){return me().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=me.guid++)),e.each(function(){me.event.add(this,t,r,n,i)})}function $(e,t){return r(e,"table")&&r(11!==t.nodeType?t:t.firstChild,"tr")?me(">tbody",e)[0]||e:e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function _(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function E(e,t){var i,n,r,o,s,a,l,c;if(1===t.nodeType){if(je.hasData(e)&&(o=je.access(e),s=je.set(t,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;n>i;i++)me.event.add(t,r,c[r][i])}Le.hasData(e)&&(a=Le.access(e),l=me.extend({},a),Le.set(t,l))}}function D(e,t){var i=t.nodeName.toLowerCase();"input"===i&&qe.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function A(e,t,n,r){t=oe.apply([],t);var o,s,a,l,c,d,u=0,h=e.length,p=h-1,f=t[0],m=me.isFunction(f);if(m||h>1&&"string"==typeof f&&!pe.checkClone&&nt.test(f))return e.each(function(i){var o=e.eq(i);m&&(t[0]=f.call(this,i,o.html())),A(o,t,n,r)});if(h&&(o=w(t,e[0].ownerDocument,!1,e,r),s=o.firstChild,1===o.childNodes.length&&(o=s),s||r)){for(a=me.map(y(o,"script"),S),l=a.length;h>u;u++)c=o,u!==p&&(c=me.clone(c,!0,!0),l&&me.merge(a,y(c,"script"))),n.call(e[u],c,u);if(l)for(d=a[a.length-1].ownerDocument,me.map(a,_),u=0;l>u;u++)c=a[u],Ge.test(c.type||"")&&!je.access(c,"globalEval")&&me.contains(d,c)&&(c.src?me._evalUrl&&me._evalUrl(c.src):i(c.textContent.replace(ot,""),d))}return e}function N(e,t,i){for(var n,r=t?me.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||me.cleanData(y(n)),n.parentNode&&(i&&me.contains(n.ownerDocument,n)&&b(y(n,"script")),n.parentNode.removeChild(n));return e}function M(e,t,i){var n,r,o,s,a=e.style;return i=i||lt(e),i&&(s=i.getPropertyValue(t)||i[t],""!==s||me.contains(e.ownerDocument,e)||(s=me.style(e,t)),!pe.pixelMarginRight()&&at.test(s)&&st.test(t)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function F(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in ft)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=pt.length;i--;)if(e=pt[i]+t,e in ft)return e}function R(e){var t=me.cssProps[e];return t||(t=me.cssProps[e]=O(e)||e),t}function j(e,t,i){var n=Be.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function L(e,t,i,n,r){var o,s=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;4>o;o+=2)"margin"===i&&(s+=me.css(e,i+Ue[o],!0,r)),n?("content"===i&&(s-=me.css(e,"padding"+Ue[o],!0,r)),"margin"!==i&&(s-=me.css(e,"border"+Ue[o]+"Width",!0,r))):(s+=me.css(e,"padding"+Ue[o],!0,r),"padding"!==i&&(s+=me.css(e,"border"+Ue[o]+"Width",!0,r)));return s}function I(e,t,i){var n,r=lt(e),o=M(e,t,r),s="border-box"===me.css(e,"boxSizing",!1,r);return at.test(o)?o:(n=s&&(pe.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),o=parseFloat(o)||0,o+L(e,t,i||(s?"border":"content"),n,r)+"px")}function P(e,t,i,n,r){return new P.prototype.init(e,t,i,n,r)}function H(){gt&&(ie.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(H):e.setTimeout(H,me.fx.interval),me.fx.tick())}function B(){return e.setTimeout(function(){mt=void 0}),mt=me.now()}function U(e,t){var i,n=0,r={height:e};for(t=t?1:0;4>n;n+=2-t)i=Ue[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function Y(e,t,i){for(var n,r=(q.tweeners[t]||[]).concat(q.tweeners["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,t,e))return n}function z(e,t,i){var n,r,o,s,a,l,c,d,u="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&Ye(e),g=je.get(e,"fxshow");i.queue||(s=me._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,me.queue(e,"fx").length||s.empty.fire()})}));for(n in t)if(r=t[n],vt.test(r)){if(delete t[n],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[n])continue;m=!0}p[n]=g&&g[n]||me.style(e,n)}if(l=!me.isEmptyObject(t),l||!me.isEmptyObject(p)){u&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],c=g&&g.display,null==c&&(c=je.get(e,"display")),d=me.css(e,"display"),"none"===d&&(c?d=c:(v([e],!0),c=e.style.display||c,d=me.css(e,"display"),v([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===me.css(e,"float")&&(l||(h.done(function(){f.display=c}),null==c&&(d=f.display,c="none"===d?"":d)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1;for(n in p)l||(g?"hidden"in g&&(m=g.hidden):g=je.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&v([e],!0),h.done(function(){m||v([e]),je.remove(e,"fxshow");for(n in p)me.style(e,n,p[n])})),l=Y(m?g[n]:0,n,h),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}}function W(e,t){var i,n,r,o,s;for(i in e)if(n=me.camelCase(i),r=t[n],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),s=me.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function q(e,t,i){var n,r,o=0,s=q.prefilters.length,a=me.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=mt||B(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,i]),1>o&&l?i:(l||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:me.extend({},t),opts:me.extend(!0,{specialEasing:{},easing:me.easing._default},i),originalProperties:t,originalOptions:i,startTime:mt||B(),duration:i.duration,tweens:[],createTween:function(t,i){var n=me.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)c.tweens[i].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),d=c.props;for(W(d,c.opts.specialEasing);s>o;o++)if(n=q.prefilters[o].call(c,e,d,c.opts))return me.isFunction(n.stop)&&(me._queueHooks(c.elem,c.opts.queue).stop=me.proxy(n.stop,n)),n;return me.map(d,Y,c),me.isFunction(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),me.fx.timer(me.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}function V(e){var t=e.match(Ne)||[];return t.join(" ")}function G(e){return e.getAttribute&&e.getAttribute("class")||""}function K(e,t,i,n){var r;if(Array.isArray(t))me.each(t,function(t,r){i||Et.test(e)?n(e,r):K(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==me.type(t))n(e,t);else for(r in t)K(e+"["+r+"]",t[r],i,n)}function X(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(Ne)||[];if(me.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function J(e,t,i,n){function r(a){var l;return o[a]=!0,me.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===Ht;return r(t.dataTypes[0])||!o["*"]&&r("*")}function Z(e,t){var i,n,r=me.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&me.extend(!0,e,n),e}function Q(e,t,i){for(var n,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function ee(e,t,i,n){var r,o,s,a,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],d.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var te=[],ie=e.document,ne=Object.getPrototypeOf,re=te.slice,oe=te.concat,se=te.push,ae=te.indexOf,le={},ce=le.toString,de=le.hasOwnProperty,ue=de.toString,he=ue.call(Object),pe={},fe="3.2.1",me=function(e,t){return new me.fn.init(e,t)},ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,ye=/-([a-z])/g,be=function(e,t){return t.toUpperCase()};me.fn=me.prototype={jquery:fe,constructor:me,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=me.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return me.each(this,e)},map:function(e){return this.pushStack(me.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:te.sort,splice:te.splice},me.extend=me.fn.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||me.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(c&&n&&(me.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&me.isPlainObject(i)?i:{},s[t]=me.extend(c,o,n)):void 0!==n&&(s[t]=n));return s},me.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===me.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=me.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return e&&"[object Object]"===ce.call(e)?(t=ne(e))?(i=de.call(t,"constructor")&&t.constructor,"function"==typeof i&&ue.call(i)===he):!0:!1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[ce.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(ye,be)},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;i>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ge,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?me.merge(i,"string"==typeof e?[e]:e):se.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ae.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;i>n;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],o=0,s=e.length,a=!i;s>o;o++)n=!t(e[o],o),n!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o,s=0,a=[];if(n(e))for(r=e.length;r>s;s++)o=t(e[s],s,i),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,i),null!=o&&a.push(o);return oe.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),me.isFunction(e)?(n=re.call(arguments,2),r=function(){return e.apply(t||this,n.concat(re.call(arguments)))},r.guid=e.guid=e.guid||me.guid++,r):void 0},now:Date.now,support:pe}),"function"==typeof Symbol&&(me.fn[Symbol.iterator]=te[Symbol.iterator]),me.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var we=function(e){function t(e,t,i,n){var r,o,s,a,l,c,d,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return i;if(!n&&((t?t.ownerDocument||t:B)!==F&&M(t),t=t||F,R)){if(11!==f&&(l=ve.exec(e)))if(r=l[1]){if(9===f){if(!(s=t.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(h&&(s=h.getElementById(r))&&P(t,s)&&s.id===r)return i.push(s),i}else{if(l[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(r)),i}if(x.qsa&&!q[e+" "]&&(!j||!j.test(e))){if(1!==f)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ke,xe):t.setAttribute("id",a=H),c=S(e),o=c.length;o--;)c[o]="#"+a+" "+p(c[o]);d=c.join(","),h=ye.test(e)&&u(t.parentNode)||t}if(d)try{return Z.apply(i,h.querySelectorAll(d)),i}catch(m){}finally{a===H&&t.removeAttribute("id")}}}return E(e.replace(ae,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>C.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[H]=!0,e}function r(e){var t=F.createElement("fieldset");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=i.length;n--;)C.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Te(t)===e:t.disabled===e:"label"in t?t.disabled===e:!1}}function d(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,r=t.next,o=r||n,s=i&&"parentNode"===o,a=Y++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r);return!1}:function(t,i,l){var c,d,u,h=[U,a];if(l){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(u=t[H]||(t[H]={}),d=u[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((c=d[o])&&c[0]===U&&c[1]===a)return h[2]=c[2];if(d[o]=h,h[2]=e(t,i,l))return!0}return!1}}function m(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var r=0,o=i.length;o>r;r++)t(e,i[r],n);return n}function v(e,t,i,n,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!i||i(o,n,r))&&(s.push(o),c&&t.push(a));return s}function y(e,t,i,r,o,s){return r&&!r[H]&&(r=y(r)),o&&!o[H]&&(o=y(o,s)),n(function(n,s,a,l){var c,d,u,h=[],p=[],f=s.length,m=n||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?m:v(m,h,e,a,l),b=i?o||(n?e:f||r)?[]:s:y;if(i&&i(y,b,a,l),r)for(c=v(b,p),r(c,[],a,l),d=c.length;d--;)(u=c[d])&&(b[p[d]]=!(y[p[d]]=u));if(n){if(o||e){if(o){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(y[d]=u);o(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=o?ee(n,u):h[d])>-1&&(n[c]=!(s[c]=u))}}else b=v(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):Z.apply(s,b)})}function b(e){for(var t,i,n,r=e.length,o=C.relative[e[0].type],s=o||C.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return ee(t,e)>-1},s,!0),d=[function(e,i,n){var r=!o&&(n||i!==D)||((t=i).nodeType?l(e,i,n):c(e,i,n));return t=null,r}];r>a;a++)if(i=C.relative[e[a].type])d=[f(m(d),i)];else{if(i=C.filter[e[a].type].apply(null,e[a].matches),i[H]){for(n=++a;r>n&&!C.relative[e[n].type];n++);return y(a>1&&m(d),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),i,n>a&&b(e.slice(a,n)),r>n&&b(e=e.slice(n)),r>n&&p(e))}d.push(i)}return m(d)}function w(e,i){var r=i.length>0,o=e.length>0,s=function(n,s,a,l,c){var d,u,h,p=0,f="0",m=n&&[],g=[],y=D,b=n||o&&C.find.TAG("*",c),w=U+=null==y?1:Math.random()||.1,k=b.length;for(c&&(D=s===F||s||c);f!==k&&null!=(d=b[f]);f++){if(o&&d){for(u=0,s||d.ownerDocument===F||(M(d),a=!R);h=e[u++];)if(h(d,s||F,a)){l.push(d);break}c&&(U=w)}r&&((d=!h&&d)&&p--,n&&m.push(d))}if(p+=f,r&&f!==p){for(u=0;h=i[u++];)h(m,g,s,a);if(n){if(p>0)for(;f--;)m[f]||g[f]||(g[f]=X.call(l));g=v(g)}Z.apply(l,g),c&&!n&&g.length>0&&p+i.length>1&&t.uniqueSort(l)}return c&&(U=w,D=y),m};return r?n(s):s}var k,x,C,T,$,S,_,E,D,A,N,M,F,O,R,j,L,I,P,H="sizzle"+1*new Date,B=e.document,U=0,Y=0,z=i(),W=i(),q=i(),V=function(e,t){return e===t&&(N=!0),0},G={}.hasOwnProperty,K=[],X=K.pop,J=K.push,Z=K.push,Q=K.slice,ee=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ie+"+","g"),ae=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),ue=new RegExp(oe),he=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),we=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ke=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\x00"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){M()},Te=f(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(K=Q.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch($e){Z={apply:K.length?function(e,t){J.apply(e,Q.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}x=t.support={},$=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:B;return n!==F&&9===n.nodeType&&n.documentElement?(F=n,O=F.documentElement,R=!$(F),B!==F&&(i=F.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Ce,!1):i.attachEvent&&i.attachEvent("onunload",Ce)),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(F.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(F.getElementsByClassName),x.getById=r(function(e){return O.appendChild(e).id=H,!F.getElementsByName||!F.getElementsByName(H).length}),x.getById?(C.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var i=t.getElementById(e);return i?[i]:[]}}):(C.filter.ID=function(e){var t=e.replace(be,we);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var i,n,r,o=t.getElementById(e);if(o){if(i=o.getAttributeNode("id"),i&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if(i=o.getAttributeNode("id"),i&&i.value===e)return[o]}return[]}}),C.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},C.find.CLASS=x.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&R?t.getElementsByClassName(e):void 0},L=[],j=[],(x.qsa=ge.test(F.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||j.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=F.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&j.push(":enabled",":disabled"),O.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(x.matchesSelector=ge.test(I=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){x.disconnectedMatch=I.call(e,"*"),I.call(e,"[s!='']:x"),L.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),L=L.length&&new RegExp(L.join("|")),t=ge.test(O.compareDocumentPosition),P=t||ge.test(O.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return N=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!x.sortDetached&&t.compareDocumentPosition(e)===i?e===F||e.ownerDocument===B&&P(B,e)?-1:t===F||t.ownerDocument===B&&P(B,t)?1:A?ee(A,e)-ee(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return N=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!r||!o)return e===F?-1:t===F?1:r?-1:o?1:A?ee(A,e)-ee(A,t):0;if(r===o)return s(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===B?-1:l[n]===B?1:0},F):F},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==F&&M(e),i=i.replace(de,"='$1']"),x.matchesSelector&&R&&!q[i+" "]&&(!L||!L.test(i))&&(!j||!j.test(i)))try{var n=I.call(e,i);if(n||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,F,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==F&&M(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==F&&M(e);var i=C.attrHandle[t.toLowerCase()],n=i&&G.call(C.attrHandle,t.toLowerCase())?i(e,t,!R):void 0;return void 0!==n?n:x.attributes||!R?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(ke,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;
if(N=!x.detectDuplicates,A=!x.sortStable&&e.slice(0),e.sort(V),N){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return A=null,e},T=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=T(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=T(t);return i},C=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(se," ")+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(h=g,u=h[H]||(h[H]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),c=d[e]||[],p=c[0]===U&&c[1],b=p&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){d[e]=[U,p,b];break}}else if(y&&(h=t,u=h[H]||(h[H]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),c=d[e]||[],p=c[0]===U&&c[1],b=p),b===!1)for(;(h=++p&&h&&h[m]||(b=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&(u=h[H]||(h[H]={}),d=u[h.uniqueID]||(u[h.uniqueID]={}),d[e]=[U,b]),h!==t)););return b-=r,b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,i){var r,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(i):o.length>1?(r=[e,e,"",i],C.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),s=r.length;s--;)n=ee(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=_(e.replace(ae,"$1"));return r[H]?n(function(e,t,i,n){for(var o,s=r(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:n(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var i;do if(i=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,i){return[0>i?i+t:i]}),even:d(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:d(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:d(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:d(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},C.pseudos.nth=C.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[k]=a(k);for(k in{submit:!0,reset:!0})C.pseudos[k]=l(k);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,S=t.tokenize=function(e,i){var n,r,o,s,a,l,c,d=W[e+" "];if(d)return i?0:d.slice(0);for(a=e,l=[],c=C.preFilter;a;){(!n||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=ce.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ae," ")}),a=a.slice(n.length));for(s in C.filter)!(r=pe[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):W(e,l).slice(0)},_=t.compile=function(e,t){var i,n=[],r=[],o=q[e+" "];if(!o){for(t||(t=S(e)),i=t.length;i--;)o=b(t[i]),o[H]?n.push(o):r.push(o);o=q(e,w(r,n)),o.selector=e}return o},E=t.select=function(e,t,i,n){var r,o,s,a,l,c="function"==typeof e&&e,d=!n&&S(e=c.selector||e);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&R&&C.relative[o[1].type]){if(t=(C.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!C.relative[a=s.type]);)if((l=C.find[a])&&(n=l(s.matches[0].replace(be,we),ye.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&p(o),!e)return Z.apply(i,n),i;break}}return(c||_(e,d))(n,t,!R,i,!t||ye.test(e)&&u(t.parentNode)||t),i},x.sortStable=H.split("").sort(V).join("")===H,x.detectDuplicates=!!N,M(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(F.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);me.find=we,me.expr=we.selectors,me.expr[":"]=me.expr.pseudos,me.uniqueSort=me.unique=we.uniqueSort,me.text=we.getText,me.isXMLDoc=we.isXML,me.contains=we.contains,me.escapeSelector=we.escape;var ke=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&me(e).is(i))break;n.push(e)}return n},xe=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Ce=me.expr.match.needsContext,Te=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,$e=/^.[^:#\[\.,]*$/;me.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?me.find.matchesSelector(n,e)?[n]:[]:me.find.matches(e,me.grep(t,function(e){return 1===e.nodeType}))},me.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(me(e).filter(function(){for(t=0;n>t;t++)if(me.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;n>t;t++)me.find(e,r[t],i);return n>1?me.uniqueSort(i):i},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&Ce.test(e)?me(e):e||[],!1).length}});var Se,_e=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ee=me.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||Se,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:_e.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof me?t[0]:t,me.merge(this,me.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),Te.test(n[1])&&me.isPlainObject(t))for(n in t)me.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=ie.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):me.isFunction(e)?void 0!==i.ready?i.ready(e):e(me):me.makeArray(e,this)};Ee.prototype=me.fn,Se=me(ie);var De=/^(?:parents|prev(?:Until|All))/,Ae={children:!0,contents:!0,next:!0,prev:!0};me.fn.extend({has:function(e){var t=me(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(me.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],s="string"!=typeof e&&me(e);if(!Ce.test(e))for(;r>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&me.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?me.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(me(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(me.uniqueSort(me.merge(this.get(),me(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),me.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ke(e,"parentNode")},parentsUntil:function(e,t,i){return ke(e,"parentNode",i)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return ke(e,"nextSibling")},prevAll:function(e){return ke(e,"previousSibling")},nextUntil:function(e,t,i){return ke(e,"nextSibling",i)},prevUntil:function(e,t,i){return ke(e,"previousSibling",i)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return r(e,"iframe")?e.contentDocument:(r(e,"template")&&(e=e.content||e),me.merge([],e.childNodes))}},function(e,t){me.fn[e]=function(i,n){var r=me.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=me.filter(n,r)),this.length>1&&(Ae[e]||me.uniqueSort(r),De.test(e)&&r.reverse()),this.pushStack(r)}});var Ne=/[^\x20\t\r\n\f]+/g;me.Callbacks=function(e){e="string"==typeof e?a(e):me.extend({},e);var t,i,n,r,o=[],s=[],l=-1,c=function(){for(r=r||e.once,n=t=!0;s.length;l=-1)for(i=s.shift();++l<o.length;)o[l].apply(i[0],i[1])===!1&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},d={add:function(){return o&&(i&&!t&&(l=o.length-1,s.push(i)),function n(t){me.each(t,function(t,i){me.isFunction(i)?e.unique&&d.has(i)||o.push(i):i&&i.length&&"string"!==me.type(i)&&n(i)})}(arguments),i&&!t&&c()),this},remove:function(){return me.each(arguments,function(e,t){for(var i;(i=me.inArray(t,o,i))>-1;)o.splice(i,1),l>=i&&l--}),this},has:function(e){return e?me.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=s=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=s=[],i||t||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],s.push(i),t||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},me.extend({Deferred:function(t){var i=[["notify","progress",me.Callbacks("memory"),me.Callbacks("memory"),2],["resolve","done",me.Callbacks("once memory"),me.Callbacks("once memory"),0,"resolved"],["reject","fail",me.Callbacks("once memory"),me.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return r.then(null,e)},pipe:function(){var e=arguments;return me.Deferred(function(t){me.each(i,function(i,n){var r=me.isFunction(e[n[4]])&&e[n[4]];o[n[1]](function(){var e=r&&r.apply(this,arguments);e&&me.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,n,r){function o(t,i,n,r){return function(){var a=this,d=arguments,u=function(){var e,u;if(!(s>t)){if(e=n.apply(a,d),e===i.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,me.isFunction(u)?r?u.call(e,o(s,i,l,r),o(s,i,c,r)):(s++,u.call(e,o(s,i,l,r),o(s,i,c,r),o(s,i,l,i.notifyWith))):(n!==l&&(a=void 0,d=[e]),(r||i.resolveWith)(a,d))}},h=r?u:function(){try{u()}catch(e){me.Deferred.exceptionHook&&me.Deferred.exceptionHook(e,h.stackTrace),t+1>=s&&(n!==c&&(a=void 0,d=[e]),i.rejectWith(a,d))}};t?h():(me.Deferred.getStackHook&&(h.stackTrace=me.Deferred.getStackHook()),e.setTimeout(h))}}var s=0;return me.Deferred(function(e){i[0][3].add(o(0,e,me.isFunction(r)?r:l,e.notifyWith)),i[1][3].add(o(0,e,me.isFunction(t)?t:l)),i[2][3].add(o(0,e,me.isFunction(n)?n:c))}).promise()},promise:function(e){return null!=e?me.extend(e,r):r}},o={};return me.each(i,function(e,t){var s=t[2],a=t[5];r[t[1]]=s.add,a&&s.add(function(){n=a},i[3-e][2].disable,i[0][2].lock),s.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=s.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),r=re.call(arguments),o=me.Deferred(),s=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?re.call(arguments):i,--t||o.resolveWith(n,r)}};if(1>=t&&(d(e,o.done(s(i)).resolve,o.reject,!t),"pending"===o.state()||me.isFunction(r[i]&&r[i].then)))return o.then();for(;i--;)d(r[i],s(i),o.reject);return o.promise()}});var Me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;me.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Me.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},me.readyException=function(t){e.setTimeout(function(){throw t})};var Fe=me.Deferred();me.fn.ready=function(e){return Fe.then(e)["catch"](function(e){me.readyException(e)}),this},me.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--me.readyWait:me.isReady)||(me.isReady=!0,e!==!0&&--me.readyWait>0||Fe.resolveWith(ie,[me]))}}),me.ready.then=Fe.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?e.setTimeout(me.ready):(ie.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u));var Oe=function(e,t,i,n,r,o,s){var a=0,l=e.length,c=null==i;if("object"===me.type(i)){r=!0;for(a in i)Oe(e,t,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,me.isFunction(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(me(e),i)})),t))for(;l>a;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return r?e:c?t.call(e):l?t(e[0],i):o},Re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[me.camelCase(t)]=i;else for(n in t)r[me.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][me.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(me.camelCase):(t=me.camelCase(t),t=t in n?[t]:t.match(Ne)||[]),i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||me.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!me.isEmptyObject(t)}};var je=new h,Le=new h,Ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pe=/[A-Z]/g;me.extend({hasData:function(e){return Le.hasData(e)||je.hasData(e)},data:function(e,t,i){return Le.access(e,t,i)},removeData:function(e,t){Le.remove(e,t)},_data:function(e,t,i){return je.access(e,t,i)},_removeData:function(e,t){je.remove(e,t)}}),me.fn.extend({data:function(e,t){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=Le.get(o),1===o.nodeType&&!je.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=me.camelCase(n.slice(5)),f(o,n,r[n])));je.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Le.set(this,e)}):Oe(this,function(t){var i;if(o&&void 0===t){if(i=Le.get(o,e),void 0!==i)return i;if(i=f(o,e),void 0!==i)return i}else this.each(function(){Le.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Le.remove(this,e)})}}),me.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=je.get(e,t),i&&(!n||Array.isArray(i)?n=je.access(e,t,me.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=me.queue(e,t),n=i.length,r=i.shift(),o=me._queueHooks(e,t),s=function(){me.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return je.get(e,i)||je.access(e,i,{empty:me.Callbacks("once memory").add(function(){je.remove(e,[t+"queue",i])})})}}),me.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?me.queue(this[0],e):void 0===t?this:this.each(function(){var i=me.queue(this,e,t);me._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&me.dequeue(this,e)})},dequeue:function(e){return this.each(function(){me.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=me.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=je.get(o[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var He=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Be=new RegExp("^(?:([+-])=|)("+He+")([a-z%]*)$","i"),Ue=["Top","Right","Bottom","Left"],Ye=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&me.contains(e.ownerDocument,e)&&"none"===me.css(e,"display")},ze=function(e,t,i,n){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=s[o];return r},We={};me.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ye(this)?me(this).show():me(this).hide()})}});var qe=/^(?:checkbox|radio)$/i,Ve=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ge=/^$|\/(?:java|ecma)script/i,Ke={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td;var Xe=/<|&#?\w+;/;!function(){var e=ie.createDocumentFragment(),t=e.appendChild(ie.createElement("div")),i=ie.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),pe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Je=ie.documentElement,Ze=/^key/,Qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,et=/^([^.]*)(?:\.(.+)|)/;me.event={global:{},add:function(e,t,i,n,r){var o,s,a,l,c,d,u,h,p,f,m,g=je.get(e);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&me.find.matchesSelector(Je,r),i.guid||(i.guid=me.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return"undefined"!=typeof me&&me.event.triggered!==t.type?me.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ne)||[""],c=t.length;c--;)a=et.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(u=me.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=me.event.special[p]||{},d=me.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&me.expr.match.needsContext.test(r),namespace:f.join(".")},o),(h=l[p])||(h=l[p]=[],h.delegateCount=0,u.setup&&u.setup.call(e,n,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),me.event.global[p]=!0)},remove:function(e,t,i,n,r){var o,s,a,l,c,d,u,h,p,f,m,g=je.hasData(e)&&je.get(e);if(g&&(l=g.events)){for(t=(t||"").match(Ne)||[""],c=t.length;c--;)if(a=et.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=me.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)d=h[o],!r&&m!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(h.splice(o,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));s&&!h.length&&(u.teardown&&u.teardown.call(e,f,g.handle)!==!1||me.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)me.event.remove(e,p+t[c],i,n,!0);me.isEmptyObject(l)&&je.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,s,a=me.event.fix(e),l=new Array(arguments.length),c=(je.get(this,"events")||{})[a.type]||[],d=me.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,a)!==!1){for(s=me.event.handlers.call(this,a,c),t=0;(r=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!a.isImmediatePropagationStopped();)(!a.rnamespace||a.rnamespace.test(o.namespace))&&(a.handleObj=o,a.data=o.data,n=((me.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),void 0!==n&&(a.result=n)===!1&&(a.preventDefault(),a.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,r,o,s,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(o=[],s={},i=0;l>i;i++)n=t[i],r=n.selector+" ",void 0===s[r]&&(s[r]=n.needsContext?me(r,this).index(c)>-1:me.find(r,this,null,[c]).length),s[r]&&o.push(n);o.length&&a.push({elem:c,handlers:o})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(me.Event.prototype,e,{enumerable:!0,configurable:!0,get:me.isFunction(t)?function(){return this.originalEvent?t(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[me.expando]?e:new me.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==C()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===C()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&r(this,"input")?(this.click(),!1):void 0},_default:function(e){return r(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},me.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},me.Event=function(e,t){return this instanceof me.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?k:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&me.extend(this,t),this.timeStamp=e&&e.timeStamp||me.now(),void(this[me.expando]=!0)):new me.Event(e,t)},me.Event.prototype={constructor:me.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=k,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=k,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=k,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},me.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Qe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},me.event.addProp),me.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){me.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==n&&!me.contains(n,r))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),me.fn.extend({on:function(e,t,i,n){return T(this,e,t,i,n)},one:function(e,t,i,n){return T(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,me(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=x),this.each(function(){me.event.remove(this,e,i,t)})}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,it=/<script|<style|<link/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;me.extend({htmlPrefilter:function(e){return e.replace(tt,"<$1></$2>")},clone:function(e,t,i){var n,r,o,s,a=e.cloneNode(!0),l=me.contains(e.ownerDocument,e);if(!(pe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||me.isXMLDoc(e)))for(s=y(a),o=y(e),n=0,r=o.length;r>n;n++)D(o[n],s[n]);if(t)if(i)for(o=o||y(e),s=s||y(a),n=0,r=o.length;r>n;n++)E(o[n],s[n]);else E(e,a);return s=y(a,"script"),s.length>0&&b(s,!l&&y(e,"script")),a},cleanData:function(e){for(var t,i,n,r=me.event.special,o=0;void 0!==(i=e[o]);o++)if(Re(i)){if(t=i[je.expando]){if(t.events)for(n in t.events)r[n]?me.event.remove(i,n):me.removeEvent(i,n,t.handle);i[je.expando]=void 0}i[Le.expando]&&(i[Le.expando]=void 0)}}}),me.fn.extend({detach:function(e){return N(this,e,!0)},remove:function(e){return N(this,e)},text:function(e){return Oe(this,function(e){return void 0===e?me.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=$(this,e);t.appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=$(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(me.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return me.clone(this,e,t)})},html:function(e){return Oe(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!Ke[(Ve.exec(e)||["",""])[1].toLowerCase()]){e=me.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(me.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var i=this.parentNode;me.inArray(this,e)<0&&(me.cleanData(y(this)),i&&i.replaceChild(t,this))},e)}}),me.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){me.fn[e]=function(e){for(var i,n=[],r=me(e),o=r.length-1,s=0;o>=s;s++)i=s===o?this:this.clone(!0),me(r[s])[t](i),se.apply(n,i.get());return this.pushStack(n)}});var st=/^margin/,at=new RegExp("^("+He+")(?!px)[a-z%]+$","i"),lt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Je.appendChild(s);var t=e.getComputedStyle(a);i="1%"!==t.top,o="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,Je.removeChild(s),a=null}}var i,n,r,o,s=ie.createElement("div"),a=ie.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),me.extend(pe,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),r},reliableMarginLeft:function(){return t(),o}}))}();var ct=/^(none|table(?!-c[ea]).+)/,dt=/^--/,ut={position:"absolute",visibility:"hidden",display:"block"},ht={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],ft=ie.createElement("div").style;me.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=M(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=me.camelCase(t),l=dt.test(t),c=e.style;return l||(t=R(a)),s=me.cssHooks[t]||me.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:c[t]:(o=typeof i,"string"===o&&(r=Be.exec(i))&&r[1]&&(i=m(e,t,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(me.cssNumber[a]?"":"px")),pe.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l?c.setProperty(t,i):c[t]=i)),void 0)}},css:function(e,t,i,n){var r,o,s,a=me.camelCase(t),l=dt.test(t);return l||(t=R(a)),s=me.cssHooks[t]||me.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=M(e,t,n)),"normal"===r&&t in ht&&(r=ht[t]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r;
}}),me.each(["height","width"],function(e,t){me.cssHooks[t]={get:function(e,i,n){return i?!ct.test(me.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?I(e,t,n):ze(e,ut,function(){return I(e,t,n)}):void 0},set:function(e,i,n){var r,o=n&&lt(e),s=n&&L(e,t,n,"border-box"===me.css(e,"boxSizing",!1,o),o);return s&&(r=Be.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=me.css(e,t)),j(e,i,s)}}}),me.cssHooks.marginLeft=F(pe.reliableMarginLeft,function(e,t){return t?(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),me.each({margin:"",padding:"",border:"Width"},function(e,t){me.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[e+Ue[n]+t]=o[n]||o[n-2]||o[0];return r}},st.test(e)||(me.cssHooks[e+t].set=j)}),me.fn.extend({css:function(e,t){return Oe(this,function(e,t,i){var n,r,o={},s=0;if(Array.isArray(t)){for(n=lt(e),r=t.length;r>s;s++)o[t[s]]=me.css(e,t[s],!1,n);return o}return void 0!==i?me.style(e,t,i):me.css(e,t)},e,t,arguments.length>1)}}),me.Tween=P,P.prototype={constructor:P,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||me.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(me.cssNumber[i]?"":"px")},cur:function(){var e=P.propHooks[this.prop];return e&&e.get?e.get(this):P.propHooks._default.get(this)},run:function(e){var t,i=P.propHooks[this.prop];return this.options.duration?this.pos=t=me.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=me.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){me.fx.step[e.prop]?me.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[me.cssProps[e.prop]]&&!me.cssHooks[e.prop]?e.elem[e.prop]=e.now:me.style(e.elem,e.prop,e.now+e.unit)}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},me.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},me.fx=P.prototype.init,me.fx.step={};var mt,gt,vt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;me.Animation=me.extend(q,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return m(i.elem,e,Be.exec(t),i),i}]},tweener:function(e,t){me.isFunction(e)?(t=e,e=["*"]):e=e.match(Ne);for(var i,n=0,r=e.length;r>n;n++)i=e[n],q.tweeners[i]=q.tweeners[i]||[],q.tweeners[i].unshift(t)},prefilters:[z],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),me.speed=function(e,t,i){var n=e&&"object"==typeof e?me.extend({},e):{complete:i||!i&&t||me.isFunction(e)&&e,duration:e,easing:i&&t||t&&!me.isFunction(t)&&t};return me.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in me.fx.speeds?n.duration=me.fx.speeds[n.duration]:n.duration=me.fx.speeds._default),(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){me.isFunction(n.old)&&n.old.call(this),n.queue&&me.dequeue(this,n.queue)},n},me.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ye).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=me.isEmptyObject(e),o=me.speed(t,i,n),s=function(){var t=q(this,me.extend({},e),o);(r||je.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=me.timers,s=je.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&yt.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));(t||!i)&&me.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=je.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=me.timers,s=n?n.length:0;for(i.finish=!0,me.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),me.each(["toggle","show","hide"],function(e,t){var i=me.fn[t];me.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(U(t,!0),e,n,r)}}),me.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){me.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),me.timers=[],me.fx.tick=function(){var e,t=0,i=me.timers;for(mt=me.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||me.fx.stop(),mt=void 0},me.fx.timer=function(e){me.timers.push(e),me.fx.start()},me.fx.interval=13,me.fx.start=function(){gt||(gt=!0,H())},me.fx.stop=function(){gt=null},me.fx.speeds={slow:600,fast:200,_default:400},me.fn.delay=function(t,i){return t=me.fx?me.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=ie.createElement("input"),t=ie.createElement("select"),i=t.appendChild(ie.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=i.selected,e=ie.createElement("input"),e.value="t",e.type="radio",pe.radioValue="t"===e.value}();var bt,wt=me.expr.attrHandle;me.fn.extend({attr:function(e,t){return Oe(this,me.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){me.removeAttr(this,e)})}}),me.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?me.prop(e,t,i):(1===o&&me.isXMLDoc(e)||(r=me.attrHooks[t.toLowerCase()]||(me.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void me.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=me.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&r(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Ne);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return t===!1?me.removeAttr(e,i):e.setAttribute(i,i),i}},me.each(me.expr.match.bool.source.match(/\w+/g),function(e,t){var i=wt[t]||me.find.attr;wt[t]=function(e,t,n){var r,o,s=t.toLowerCase();return n||(o=wt[s],wt[s]=r,r=null!=i(e,t,n)?s:null,wt[s]=o),r}});var kt=/^(?:input|select|textarea|button)$/i,xt=/^(?:a|area)$/i;me.fn.extend({prop:function(e,t){return Oe(this,me.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[me.propFix[e]||e]})}}),me.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&me.isXMLDoc(e)||(t=me.propFix[t]||t,r=me.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=me.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||xt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),pe.optSelected||(me.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),me.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){me.propFix[this.toLowerCase()]=this}),me.fn.extend({addClass:function(e){var t,i,n,r,o,s,a,l=0;if(me.isFunction(e))return this.each(function(t){me(this).addClass(e.call(this,t,G(this)))});if("string"==typeof e&&e)for(t=e.match(Ne)||[];i=this[l++];)if(r=G(i),n=1===i.nodeType&&" "+V(r)+" "){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=V(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,o,s,a,l=0;if(me.isFunction(e))return this.each(function(t){me(this).removeClass(e.call(this,t,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ne)||[];i=this[l++];)if(r=G(i),n=1===i.nodeType&&" "+V(r)+" "){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=V(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):me.isFunction(e)?this.each(function(i){me(this).toggleClass(e.call(this,i,G(this),t),t)}):this.each(function(){var t,n,r,o;if("string"===i)for(n=0,r=me(this),o=e.match(Ne)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(void 0===e||"boolean"===i)&&(t=G(this),t&&je.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":je.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+V(G(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;me.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=me.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,me(this).val()):e,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=me.map(r,function(e){return null==e?"":e+""})),t=me.valHooks[this.type]||me.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=me.valHooks[r.type]||me.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Ct,""):null==i?"":i)}}}),me.extend({valHooks:{option:{get:function(e){var t=me.find.attr(e,"value");return null!=t?t:V(me.text(e))}},select:{get:function(e){var t,i,n,o=e.options,s=e.selectedIndex,a="select-one"===e.type,l=a?null:[],c=a?s+1:o.length;for(n=0>s?c:a?s:0;c>n;n++)if(i=o[n],(i.selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!r(i.parentNode,"optgroup"))){if(t=me(i).val(),a)return t;l.push(t)}return l},set:function(e,t){for(var i,n,r=e.options,o=me.makeArray(t),s=r.length;s--;)n=r[s],(n.selected=me.inArray(me.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),me.each(["radio","checkbox"],function(){me.valHooks[this]={set:function(e,t){return Array.isArray(t)?e.checked=me.inArray(me(e).val(),t)>-1:void 0}},pe.checkOn||(me.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt=/^(?:focusinfocus|focusoutblur)$/;me.extend(me.event,{trigger:function(t,i,n,r){var o,s,a,l,c,d,u,h=[n||ie],p=de.call(t,"type")?t.type:t,f=de.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||ie,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(p+me.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[me.expando]?t:new me.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:me.makeArray(i,[t]),u=me.event.special[p]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!me.isWindow(n)){for(l=u.delegateType||p,Tt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(n.ownerDocument||ie)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||p,d=(je.get(s,"events")||{})[t.type]&&je.get(s,"handle"),d&&d.apply(s,i),d=c&&s[c],d&&d.apply&&Re(s)&&(t.result=d.apply(s,i),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),i)!==!1||!Re(n)||c&&me.isFunction(n[p])&&!me.isWindow(n)&&(a=n[c],a&&(n[c]=null),me.event.triggered=p,n[p](),me.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(e,t,i){var n=me.extend(new me.Event,i,{type:e,isSimulated:!0});me.event.trigger(n,null,t)}}),me.fn.extend({trigger:function(e,t){return this.each(function(){me.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?me.event.trigger(e,t,i,!0):void 0}}),me.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){me.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),me.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||me.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){me.event.simulate(t,e.target,me.event.fix(e))};me.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=je.access(n,t);r||n.addEventListener(e,i,!0),je.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=je.access(n,t)-1;r?je.access(n,t,r):(n.removeEventListener(e,i,!0),je.remove(n,t))}}});var $t=e.location,St=me.now(),_t=/\?/;me.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){i=void 0}return(!i||i.getElementsByTagName("parsererror").length)&&me.error("Invalid XML: "+t),i};var Et=/\[\]$/,Dt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;me.param=function(e,t){var i,n=[],r=function(e,t){var i=me.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!me.isPlainObject(e))me.each(e,function(){r(this.name,this.value)});else for(i in e)K(i,e[i],t,r);return n.join("&")},me.fn.extend({serialize:function(){return me.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=me.prop(this,"elements");return e?me.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!me(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!qe.test(e))}).map(function(e,t){var i=me(this).val();return null==i?null:Array.isArray(i)?me.map(i,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:i.replace(Dt,"\r\n")}}).get()}});var Mt=/%20/g,Ft=/#.*$/,Ot=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,It=/^\/\//,Pt={},Ht={},Bt="*/".concat("*"),Ut=ie.createElement("a");Ut.href=$t.href,me.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$t.href,type:"GET",isLocal:jt.test($t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":me.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Z(Z(e,me.ajaxSettings),t):Z(me.ajaxSettings,e)},ajaxPrefilter:X(Pt),ajaxTransport:X(Ht),ajax:function(t,i){function n(t,i,n,a){var c,h,p,w,k,x=i;d||(d=!0,l&&e.clearTimeout(l),r=void 0,s=a||"",C.readyState=t>0?4:0,c=t>=200&&300>t||304===t,n&&(w=Q(f,C,n)),w=ee(f,w,C,c),c?(f.ifModified&&(k=C.getResponseHeader("Last-Modified"),k&&(me.lastModified[o]=k),k=C.getResponseHeader("etag"),k&&(me.etag[o]=k)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=w.state,h=w.data,p=w.error,c=!p)):(p=x,(t||!x)&&(x="error",0>t&&(t=0))),C.status=t,C.statusText=(i||x)+"",c?v.resolveWith(m,[h,x,C]):v.rejectWith(m,[C,x,p]),C.statusCode(b),b=void 0,u&&g.trigger(c?"ajaxSuccess":"ajaxError",[C,f,c?h:p]),y.fireWith(m,[C,x]),u&&(g.trigger("ajaxComplete",[C,f]),--me.active||me.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,s,a,l,c,d,u,h,p,f=me.ajaxSetup({},i),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?me(m):me.event,v=me.Deferred(),y=me.Callbacks("once memory"),b=f.statusCode||{},w={},k={},x="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(d){if(!a)for(a={};t=Rt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return d?s:null},setRequestHeader:function(e,t){return null==d&&(e=k[e.toLowerCase()]=k[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==d&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),n(0,t),this}};if(v.promise(C),f.url=((t||f.url||$t.href)+"").replace(It,$t.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Ne)||[""],null==f.crossDomain){c=ie.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ut.protocol+"//"+Ut.host!=c.protocol+"//"+c.host}catch(T){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=me.param(f.data,f.traditional)),J(Pt,f,i,C),d)return C;u=me.event&&f.global,u&&0===me.active++&&me.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Lt.test(f.type),o=f.url.replace(Ft,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Mt,"+")):(p=f.url.slice(o.length),f.data&&(o+=(_t.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(o=o.replace(Ot,"$1"),p=(_t.test(o)?"&":"?")+"_="+St++ +p),f.url=o+p),f.ifModified&&(me.lastModified[o]&&C.setRequestHeader("If-Modified-Since",me.lastModified[o]),me.etag[o]&&C.setRequestHeader("If-None-Match",me.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||i.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Bt+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(m,C,f)===!1||d))return C.abort();if(x="abort",y.add(f.complete),C.done(f.success),C.fail(f.error),r=J(Ht,f,i,C)){if(C.readyState=1,u&&g.trigger("ajaxSend",[C,f]),d)return C;f.async&&f.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},f.timeout));try{d=!1,r.send(w,n)}catch(T){if(d)throw T;n(-1,T)}}else n(-1,"No Transport");return C},getJSON:function(e,t,i){return me.get(e,t,i,"json")},getScript:function(e,t){return me.get(e,void 0,t,"script")}}),me.each(["get","post"],function(e,t){me[t]=function(e,i,n,r){return me.isFunction(i)&&(r=r||n,n=i,i=void 0),me.ajax(me.extend({url:e,type:t,dataType:r,data:i,success:n},me.isPlainObject(e)&&e))}}),me._evalUrl=function(e){return me.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},me.fn.extend({wrapAll:function(e){var t;return this[0]&&(me.isFunction(e)&&(e=e.call(this[0])),t=me(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return me.isFunction(e)?this.each(function(t){me(this).wrapInner(e.call(this,t))}):this.each(function(){var t=me(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=me.isFunction(e);return this.each(function(i){me(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){me(this).replaceWith(this.childNodes)}),this}}),me.expr.pseudos.hidden=function(e){return!me.expr.pseudos.visible(e)},me.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},me.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Yt={0:200,1223:204},zt=me.ajaxSettings.xhr();pe.cors=!!zt&&"withCredentials"in zt,pe.ajax=zt=!!zt,me.ajaxTransport(function(t){var i,n;return pe.cors||zt&&!t.crossDomain?{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Yt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}:void 0}),me.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),me.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return me.globalEval(e),e}}}),me.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),me.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=me("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),ie.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Wt=[],qt=/(=)\?(?=&|$)|\?\?/;me.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||me.expando+"_"+St++;return this[e]=!0,e}}),me.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,s,a=t.jsonp!==!1&&(qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=me.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(qt,"$1"+r):t.jsonp!==!1&&(t.url+=(_t.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||me.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},n.always(function(){void 0===o?me(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Wt.push(r)),s&&me.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),pe.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),me.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,r,o;return t||(pe.createHTMLDocument?(t=ie.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=ie.location.href,t.head.appendChild(n)):t=ie),r=Te.exec(e),o=!i&&[],r?[t.createElement(r[1])]:(r=w([e],t,o),o&&o.length&&me(o).remove(),me.merge([],r.childNodes))},me.fn.load=function(e,t,i){var n,r,o,s=this,a=e.indexOf(" ");return a>-1&&(n=V(e.slice(a)),e=e.slice(0,a)),me.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&me.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?me("<div>").append(me.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},me.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){me.fn[t]=function(e){return this.on(t,e)}}),me.expr.pseudos.animated=function(e){return me.grep(me.timers,function(t){return e===t.elem}).length},me.offset={setOffset:function(e,t,i){var n,r,o,s,a,l,c,d=me.css(e,"position"),u=me(e),h={};"static"===d&&(e.style.position="relative"),a=u.offset(),o=me.css(e,"top"),l=me.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(o+l).indexOf("auto")>-1,c?(n=u.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),me.isFunction(t)&&(t=t.call(e,i,me.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},me.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){me.offset.setOffset(this,e,t)});var t,i,n,r,o=this[0];if(o)return o.getClientRects().length?(n=o.getBoundingClientRect(),t=o.ownerDocument,i=t.documentElement,r=t.defaultView,{top:n.top+r.pageYOffset-i.clientTop,left:n.left+r.pageXOffset-i.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===me.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),r(e[0],"html")||(n=e.offset()),n={top:n.top+me.css(e[0],"borderTopWidth",!0),left:n.left+me.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-me.css(i,"marginTop",!0),left:t.left-n.left-me.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===me.css(e,"position");)e=e.offsetParent;return e||Je})}}),me.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;me.fn[e]=function(n){return Oe(this,function(e,n,r){var o;return me.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r?o?o[t]:e[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r)},e,n,arguments.length)}}),me.each(["top","left"],function(e,t){me.cssHooks[t]=F(pe.pixelPosition,function(e,i){return i?(i=M(e,t),at.test(i)?me(e).position()[t]+"px":i):void 0})}),me.each({Height:"height",Width:"width"},function(e,t){me.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){me.fn[n]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return Oe(this,function(t,i,r){var o;return me.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?me.css(t,i,a):me.style(t,i,r,a)},t,s?r:void 0,s)}})}),me.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),me.holdReady=function(e){e?me.readyWait++:me.ready(!0)},me.isArray=Array.isArray,me.parseJSON=JSON.parse,me.nodeName=r,"function"==typeof define&&define.amd&&define("jquery",[],function(){return me});var Vt=e.jQuery,Gt=e.$;return me.noConflict=function(t){return e.$===me&&(e.$=Gt),t&&e.jQuery===me&&(e.jQuery=Vt),me},t||(e.jQuery=e.$=me),me}),function(e){e.fn.selectOverlap=function(){var t={container:{position:"relative"},select:{cursor:"pointer",opacity:"0",position:"absolute",top:"0",left:"0",height:"100%",width:"100%"},back:{cursor:"pointer"}},i=function(t,i){var n=e(t).val();n=e(t).find('option[value="'+n+'"]').html(),e(i).html(n),1==e(t).find("option").length?(e(t).attr("disabled","disabled"),e(i).css("opacity","0.5")):(e(t).removeAttr("disabled"),e(i).css("opacity","1"))};e(this).each(function(){if("yes"==e(this).attr("data-inited"))return void i(this,e(this).prev()[0]);e(this).attr("data-inited","yes");var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("span");e(n).addClass("j-select-holder select-holder");for(var s in t.container)e(n).css(s,t.container[s]);e(n).hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),e(this).focus(function(){e(n).removeClass("hover"),e(n).addClass("focus")}).blur(function(){e(n).removeClass("focus")}),e(this).attr("name")&&e(n).addClass("j-select-"+e(this).attr("name")+" "+e(this).attr("data-class")),"none"==e(this).css("display")&&e(n).css("display","none");for(s in t.back)e(r).css(s,t.back[s]);for(s in t.select)e(this).css(s,t.select[s]);"disabled"==e(this).attr("disabled")&&e(r).css("opacity","0.5"),e(n).insertBefore(this),e(r).addClass("select-text").appendTo(n),e(this).appendTo(n),e(o).addClass("arrow-icon").appendTo(n),i(this,r),e(this).change(function(){i(this,r)})})}}(jQuery),function(e){e.fn.liteTooltip=e.fn.popup=function(t){t=t||{};var i={hideClass:null,openClass:null,action:"hover"};t=e.extend(i,t);var n=function(e,i){t.hideClass?e.removeClass(t.hideClass):e.show(),t.openClass&&i.addClass(t.openClass)},r=function(e,i){t.hideClass?e.addClass(t.hideClass):e.hide(),t.openClass&&i.removeClass(t.openClass)},o=function(i){e(i).attr("id")||e(i).attr("id","j-popup-"+parseInt(1e8*Math.random(),10));var o=e(i).attr("id"),s=o+"-open",a=!1,l=e(i),c=e("."+s);"hover"===t.action?(e("."+s).on("mouseover",function(e){n(l,c)}),e("."+s).on("mouseout",function(e){r(l,c)})):"click"===t.action&&(e("."+s).on("click",function(e){a?r(l,c):n(l,c),a=!a}),e(document).click(function(t){e(t.target).parents().andSelf().is("#"+o+", ."+s)||(r(l,c),a=!1)}))};this.each(function(){o(this)})}}(jQuery),function(e,t){"use strict";function i(i,n,o,a,l){function c(){T=e.devicePixelRatio>1,o=d(o),n.delay>=0&&setTimeout(function(){u(!0)},n.delay),(n.delay<0||n.combined)&&(a.e=y(n.throttle,function(e){"resize"===e.type&&(x=C=-1),u(e.all)}),a.a=function(e){e=d(e),o.push.apply(o,e)},a.g=function(){return o=r(o).filter(function(){return!r(this).data(n.loadedName)})},a.f=function(e){for(var t=0;t<e.length;t++){var i=o.filter(function(){return this===e[t]});i.length&&u(!1,i)}},u(),r(n.appendScroll).on("scroll."+l+" resize."+l,a.e))}function d(e){var o=n.defaultImage,s=n.placeholder,a=n.imageBase,l=n.srcsetAttribute,c=n.loaderAttribute,d=n._f||{};e=r(e).filter(function(){var e=r(this),i=g(this);return!e.data(n.handledName)&&(e.attr(n.attribute)||e.attr(l)||e.attr(c)||d[i]!==t)}).data("plugin_"+n.name,i);for(var u=0,h=e.length;h>u;u++){var p=r(e[u]),f=g(e[u]),m=p.attr(n.imageBaseAttribute)||a;f===E&&m&&p.attr(l)&&p.attr(l,v(p.attr(l),m)),d[f]===t||p.attr(c)||p.attr(c,d[f]),f===E&&o&&!p.attr(D)?p.attr(D,o):f===E||!s||p.css(M)&&"none"!==p.css(M)||p.css(M,"url('"+s+"')")}return e}function u(e,t){if(!o.length)return void(n.autoDestroy&&i.destroy());for(var s=t||o,a=!1,l=n.imageBase||"",c=n.srcsetAttribute,d=n.handledName,u=0;u<s.length;u++)if(e||t||p(s[u])){var f=r(s[u]),m=g(s[u]),v=f.attr(n.attribute),y=f.attr(n.imageBaseAttribute)||l,b=f.attr(n.loaderAttribute);f.data(d)||n.visibleOnly&&!f.is(":visible")||!((v||f.attr(c))&&(m===E&&(y+v!==f.attr(D)||f.attr(c)!==f.attr(A))||m!==E&&y+v!==f.css(M))||b)||(a=!0,f.data(d,!0),h(f,m,y,b))}a&&(o=r(o).filter(function(){return!r(this).data(d)}))}function h(e,t,i,o){++k;var s=function(){w("onError",e),b(),s=r.noop};w("beforeLoad",e);var a=n.attribute,l=n.srcsetAttribute,c=n.sizesAttribute,d=n.retinaAttribute,u=n.removeAttribute,h=n.loadedName,p=e.attr(d);if(o){var f=function(){u&&e.removeAttr(n.loaderAttribute),e.data(h,!0),w($,e),setTimeout(b,1),f=r.noop};e.off(_).one(_,s).one(S,f),w(o,e,function(t){t?(e.off(S),f()):(e.off(_),s())})||e.trigger(_)}else{var m=r(new Image);m.one(_,s).one(S,function(){e.hide(),t===E?e.attr(N,m.attr(N)).attr(A,m.attr(A)).attr(D,m.attr(D)):e.css(M,"url('"+m.attr(D)+"')"),e[n.effect](n.effectTime),u&&(e.removeAttr(a+" "+l+" "+d+" "+n.imageBaseAttribute),c!==N&&e.removeAttr(c)),e.data(h,!0),w($,e),m.remove(),b()});var g=(T&&p?p:e.attr(a))||"";m.attr(N,e.attr(c)).attr(A,e.attr(l)).attr(D,g?i+g:null),m.complete&&m.trigger(S)}}function p(e){var t=e.getBoundingClientRect(),i=n.scrollDirection,r=n.threshold,o=m()+r>t.top&&-r<t.bottom,s=f()+r>t.left&&-r<t.right;return"vertical"===i?o:"horizontal"===i?s:o&&s}function f(){
return x>=0?x:x=r(e).width()}function m(){return C>=0?C:C=r(e).height()}function g(e){return e.tagName.toLowerCase()}function v(e,t){if(t){var i=e.split(",");e="";for(var n=0,r=i.length;r>n;n++)e+=t+i[n].trim()+(n!==r-1?",":"")}return e}function y(e,t){var r,o=0;return function(s,a){function l(){o=+new Date,t.call(i,s)}var c=+new Date-o;r&&clearTimeout(r),c>e||!n.enableThrottle||a?l():r=setTimeout(l,e-c)}}function b(){--k,o.length||k||w("onFinishedAll")}function w(e,t,r){return(e=n[e])?(e.apply(i,[].slice.call(arguments,1)),!0):!1}var k=0,x=-1,C=-1,T=!1,$="afterLoad",S="load",_="error",E="img",D="src",A="srcset",N="sizes",M="background-image";"event"===n.bind||s?c():r(e).on(S+"."+l,c)}function n(n,s){var a=this,l=r.extend({},a.config,s),c={},d=l.name+"-"+ ++o;return a.config=function(e,i){return i===t?l[e]:(l[e]=i,a)},a.addItems=function(e){return c.a&&c.a("string"===r.type(e)?r(e):e),a},a.getItems=function(){return c.g?c.g():{}},a.update=function(e){return c.e&&c.e({},!e),a},a.force=function(e){return c.f&&c.f("string"===r.type(e)?r(e):e),a},a.loadAll=function(){return c.e&&c.e({all:!0},!0),a},a.destroy=function(){return r(l.appendScroll).off("."+d,c.e),r(e).off("."+d),c={},t},i(a,l,n,c,d),l.chainable?n:a}var r=e.jQuery||e.Zepto,o=0,s=!1;r.fn.Lazy=r.fn.lazy=function(e){return new n(this,e)},r.Lazy=r.lazy=function(e,i,o){if(r.isFunction(i)&&(o=i,i=[]),r.isFunction(o)){e=r.isArray(e)?e:[e],i=r.isArray(i)?i:[i];for(var s=n.prototype.config,a=s._f||(s._f={}),l=0,c=e.length;c>l;l++)(s[e[l]]===t||r.isFunction(s[e[l]]))&&(s[e[l]]=o);for(var d=0,u=i.length;u>d;d++)a[i[d]]=e[0]}},n.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:e,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:t,afterLoad:t,onError:t,onFinishedAll:t},r(e).on("load",function(){s=!0})}(window),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return ot.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(n(e,t))return;return 1}function o(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){for(var i=[],n=0;n<e.length;++n)i.push(t(e[n],n));return i}function c(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,i,n){return ve(e,t,i,n,!0).utc()}function u(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function h(e){if(null==e._isValid){var t=u(e),i=st.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function p(e){var t=d(NaN);return null!=e?c(u(t),e):u(t).userInvalidated=!0,t}function f(e,t){var i,n,r;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=u(t)),o(t._locale)||(e._locale=t._locale),0<lt.length)for(i=0;i<lt.length;i++)o(r=t[n=lt[i]])||(e[n]=r);return e}function m(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===ct&&(ct=!0,e.updateOffset(this),ct=!1)}function g(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function v(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function y(t,i){var r=!0;return c(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var o,s,a=[],l=0;l<arguments.length;l++){if(o="","object"==typeof arguments[l]){for(s in o+="\n["+l+"] ",arguments[0])n(arguments[0],s)&&(o+=s+": "+arguments[0][s]+", ");o=o.slice(0,-2)}else o=arguments[l];a.push(o)}v(t+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),r=!1}return i.apply(this,arguments)},i)}function b(t,i){null!=e.deprecationHandler&&e.deprecationHandler(t,i),dt[t]||(v(i),dt[t]=!0)}function w(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function k(e,t){var r,o=c({},e);for(r in t)n(t,r)&&(i(e[r])&&i(t[r])?(o[r]={},c(o[r],e[r]),c(o[r],t[r])):null!=t[r]?o[r]=t[r]:delete o[r]);for(r in e)n(e,r)&&!n(t,r)&&i(e[r])&&(o[r]=c({},o[r]));return o}function x(e){null!=e&&this.set(e)}function C(e,t,i){var n=""+Math.abs(e),r=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function T(e,t,i,n){var r="string"==typeof n?function(){return this[n]()}:n;e&&(mt[e]=r),t&&(mt[t[0]]=function(){return C(r.apply(this,arguments),t[1],t[2])}),i&&(mt[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function $(e,t){return e.isValid()?(t=S(t,e.localeData()),ft[t]=ft[t]||function(e){for(var t,i=e.match(ht),n=0,r=i.length;r>n;n++)mt[i[n]]?i[n]=mt[i[n]]:i[n]=(t=i[n]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var n="",o=0;r>o;o++)n+=w(i[o])?i[o].call(t,e):i[o];return n}}(t),ft[t](e)):e.localeData().invalidDate()}function S(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(pt.lastIndex=0;n>=0&&pt.test(e);)e=e.replace(pt,i),pt.lastIndex=0,--n;return e}function _(e,t){var i=e.toLowerCase();gt[i]=gt[i+"s"]=gt[t]=e}function E(e){return"string"==typeof e?gt[e]||gt[e.toLowerCase()]:void 0}function D(e){var t,i,r={};for(i in e)n(e,i)&&(t=E(i))&&(r[t]=e[i]);return r}function A(e,t){vt[e]=t}function N(e){return e%4==0&&e%100!=0||e%400==0}function M(e){return 0>e?Math.ceil(e)||0:Math.floor(e)}function F(e){var t=+e,i=0;return 0!=t&&isFinite(t)&&(i=M(t)),i}function O(t,i){return function(n){return null!=n?(j(this,t,n),e.updateOffset(this,i),this):R(this,t)}}function R(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function j(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&N(e.year())&&1===e.month()&&29===e.date()?(i=F(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),U(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function L(e,t,i){ut[e]=w(t)?t:function(e,n){return e&&i?i:t}}function I(e,t){return n(ut,e)?ut[e](t._strict,t._locale):new RegExp(P(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r})))}function P(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),s(t)&&(n=function(e,i){i[t]=F(e)}),i=0;i<e.length;i++)Rt[e[i]]=n}function B(e,t){H(e,function(e,i,n,r){n._w=n._w||{},t(e,n._w,n,r)})}function U(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,n=(t%(i=12)+i)%i;return e+=(t-n)/12,1==n?N(e)?29:28:31-n%7%2}function Y(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=F(t);else if(!s(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function z(t){return null!=t?(Y(this,t),e.updateOffset(this,!0),this):R(this,"Month")}function W(){function e(e,t){return t.length-e.length}for(var t,i=[],n=[],r=[],o=0;12>o;o++)t=d([2e3,o]),i.push(this.monthsShort(t,"")),n.push(this.months(t,"")),r.push(this.months(t,"")),r.push(this.monthsShort(t,""));for(i.sort(e),n.sort(e),r.sort(e),o=0;12>o;o++)i[o]=P(i[o]),n[o]=P(n[o]);for(o=0;24>o;o++)r[o]=P(r[o]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function q(e){return N(e)?366:365}function V(e){var t,i;return 100>e&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function G(e,t,i){var n=7+t-i;return n-(7+V(e,0,n).getUTCDay()-t)%7-1}function K(e,t,i,n,r){var o,s=1+7*(t-1)+(7+i-n)%7+G(e,n,r),a=0>=s?q(o=e-1)+s:s>q(e)?(o=e+1,s-q(e)):(o=e,s);return{year:o,dayOfYear:a}}function X(e,t,i){var n,r,o=G(e.year(),t,i),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return 1>s?n=s+J(r=e.year()-1,t,i):s>J(e.year(),t,i)?(n=s-J(e.year(),t,i),r=e.year()+1):(r=e.year(),n=s),{week:n,year:r}}function J(e,t,i){var n=G(e,t,i),r=G(e+1,t,i);return(q(e)-n+r)/7}function Z(e,t){return e.slice(t,7).concat(e.slice(0,t))}function Q(){function e(e,t){return t.length-e.length}for(var t,i,n,r,o=[],s=[],a=[],l=[],c=0;7>c;c++)t=d([2e3,1]).day(c),i=P(this.weekdaysMin(t,"")),n=P(this.weekdaysShort(t,"")),r=P(this.weekdays(t,"")),o.push(i),s.push(n),a.push(r),l.push(i),l.push(n),l.push(r);o.sort(e),s.sort(e),a.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ee(){return this.hours()%12||12}function te(e,t){T(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ie(e,t){return t._meridiemParse}function ne(e){return e?e.toLowerCase().replace("_","-"):e}function re(e){for(var t,i,n,r,o=0;o<e.length;){for(t=(r=ne(e[o]).split("-")).length,i=(i=ne(e[o+1]))?i.split("-"):null;t>0;){if(n=oe(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&function(e,t){for(var i=Math.min(e.length,t.length),n=0;i>n;n+=1)if(e[n]!==t[n])return n;return i}(r,i)>=t-1)break;t--}o++}return ni}function oe(e){var t=null;if(void 0===si[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=ni._abbr,require("./locale/"+e),se(t)}catch(t){si[e]=null}return si[e]}function se(e,t){var i;return e&&((i=o(t)?le(e):ae(e,t))?ni=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ni._abbr}function ae(e,t){if(null===t)return delete si[e],null;var i,n=oi;if(t.abbr=e,null!=si[e])b("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=si[e]._config;else if(null!=t.parentLocale)if(null!=si[t.parentLocale])n=si[t.parentLocale]._config;else{if(null==(i=oe(t.parentLocale)))return ai[t.parentLocale]||(ai[t.parentLocale]=[]),ai[t.parentLocale].push({name:e,config:t}),null;n=i._config}return si[e]=new x(k(n,t)),ai[e]&&ai[e].forEach(function(e){ae(e.name,e.config)}),se(e),si[e]}function le(e){var i;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ni;if(!t(e)){if(i=oe(e))return i;e=[e]}return re(e)}function ce(e){var t,i=e._a;return i&&-2===u(e).overflow&&(t=i[Lt]<0||11<i[Lt]?Lt:i[It]<1||i[It]>U(i[jt],i[Lt])?It:i[Pt]<0||24<i[Pt]||24===i[Pt]&&(0!==i[Ht]||0!==i[Bt]||0!==i[Ut])?Pt:i[Ht]<0||59<i[Ht]?Ht:i[Bt]<0||59<i[Bt]?Bt:i[Ut]<0||999<i[Ut]?Ut:-1,u(e)._overflowDayOfYear&&(jt>t||t>It)&&(t=It),u(e)._overflowWeeks&&-1===t&&(t=Yt),u(e)._overflowWeekday&&-1===t&&(t=zt),u(e).overflow=t),e}function de(e){var t,i,n,r,o,s,a=e._i,l=li.exec(a)||ci.exec(a);if(l){for(u(e).iso=!0,t=0,i=ui.length;i>t;t++)if(ui[t][1].exec(l[1])){r=ui[t][0],n=!1!==ui[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,i=hi.length;i>t;t++)if(hi[t][1].exec(l[3])){o=(l[2]||" ")+hi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(l[4]){if(!di.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(o||"")+(s||""),me(e)}else e._isValid=!1}function ue(e,t,i,n,r,o){var s=[function(e){var t=parseInt(e,10);return 49>=t?2e3+t:999>=t?1900+t:t}(e),qt.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function he(e){var t,i,n,r,o=fi.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(o){if(t=ue(o[4],o[3],o[2],o[5],o[6],o[7]),i=o[1],n=t,r=e,i&&Zt.indexOf(i)!==new Date(n[0],n[1],n[2]).getDay()&&(u(r).weekdayMismatch=!0,!void(r._isValid=!1)))return;e._a=t,e._tzm=function(e,t,i){if(e)return mi[e];if(t)return 0;var n=parseInt(i,10),r=n%100;return 60*((n-r)/100)+r}(o[8],o[9],o[10]),e._d=V.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),u(e).rfc2822=!0}else e._isValid=!1}function pe(e,t,i){return null!=e?e:null!=t?t:i}function fe(t){var i,n,r,o,s,a,l,c=[];if(!t._d){for(a=t,l=new Date(e.now()),r=a._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],t._w&&null==t._a[It]&&null==t._a[Lt]&&function(e){var t,i,n,r,o,s,a,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,i=pe(t.GG,e._a[jt],X(ye(),1,4).year),n=pe(t.W,1),((r=pe(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,c=X(ye(),o,s),i=pe(t.gg,e._a[jt],c.year),n=pe(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||6<t.e)&&(l=!0)):r=o),1>n||n>J(i,o,s)?u(e)._overflowWeeks=!0:null!=l?u(e)._overflowWeekday=!0:(a=K(i,n,r,o,s),e._a[jt]=a.year,e._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=pe(t._a[jt],r[jt]),(t._dayOfYear>q(s)||0===t._dayOfYear)&&(u(t)._overflowDayOfYear=!0),n=V(s,0,t._dayOfYear),t._a[Lt]=n.getUTCMonth(),t._a[It]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=c[i]=r[i];for(;7>i;i++)t._a[i]=c[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[Pt]&&0===t._a[Ht]&&0===t._a[Bt]&&0===t._a[Ut]&&(t._nextDay=!0,t._a[Pt]=0),t._d=(t._useUTC?V:function(e,t,i,n,r,o,s){var a;return 100>e&&e>=0?(a=new Date(e+400,t,i,n,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,r,o,s),a}).apply(null,c),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Pt]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(u(t).weekdayMismatch=!0)}}function me(t){if(t._f!==e.ISO_8601)if(t._f!==e.RFC_2822){t._a=[],u(t).empty=!0;for(var i,r,o,s,a,l,c,d=""+t._i,h=d.length,p=0,f=S(t._f,t._locale).match(ht)||[],m=0;m<f.length;m++)r=f[m],(i=(d.match(I(r,t))||[])[0])&&(0<(o=d.substr(0,d.indexOf(i))).length&&u(t).unusedInput.push(o),d=d.slice(d.indexOf(i)+i.length),p+=i.length),mt[r]?(i?u(t).empty=!1:u(t).unusedTokens.push(r),a=r,c=t,null!=(l=i)&&n(Rt,a)&&Rt[a](l,c._a,c,a)):t._strict&&!i&&u(t).unusedTokens.push(r);u(t).charsLeftOver=h-p,0<d.length&&u(t).unusedInput.push(d),t._a[Pt]<=12&&!0===u(t).bigHour&&0<t._a[Pt]&&(u(t).bigHour=void 0),u(t).parsedDateParts=t._a.slice(0),u(t).meridiem=t._meridiem,t._a[Pt]=function(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):(null!=e.isPM&&((n=e.isPM(i))&&12>t&&(t+=12),n||12!==t||(t=0)),t)}(t._locale,t._a[Pt],t._meridiem),null!==(s=u(t).era)&&(t._a[jt]=t._locale.erasConvertYear(s,t._a[jt])),fe(t),ce(t)}else he(t);else de(t)}function ge(n){var r,d,v=n._i,y=n._f;return n._locale=n._locale||le(n._l),null===v||void 0===y&&""===v?p({nullInput:!0}):("string"==typeof v&&(n._i=v=n._locale.preparse(v)),g(v)?new m(ce(v)):(a(v)?n._d=v:t(y)?function(e){var t,i,n,r,o,s,a=!1;if(0===e._f.length)return u(e).invalidFormat=!0,e._d=new Date(NaN);for(r=0;r<e._f.length;r++)o=0,s=!1,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],me(t),h(t)&&(s=!0),o+=u(t).charsLeftOver,o+=10*u(t).unusedTokens.length,u(t).score=o,a?n>o&&(n=o,i=t):(null==n||n>o||s)&&(n=o,i=t,s&&(a=!0));c(e,i||t)}(n):y?me(n):o(d=(r=n)._i)?r._d=new Date(e.now()):a(d)?r._d=new Date(d.valueOf()):"string"==typeof d?function(t){var i=pi.exec(t._i);null===i?(de(t),!1===t._isValid&&(delete t._isValid,he(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:e.createFromInputFallback(t)))):t._d=new Date(+i[1])}(r):t(d)?(r._a=l(d.slice(0),function(e){return parseInt(e,10)}),fe(r)):i(d)?function(e){var t,i;e._d||(i=void 0===(t=D(e._i)).day?t.date:t.day,e._a=l([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),fe(e))}(r):s(d)?r._d=new Date(d):e.createFromInputFallback(r),h(n)||(n._d=null),n))}function ve(e,n,o,s,a){var l,c={};return!0!==n&&!1!==n||(s=n,n=void 0),!0!==o&&!1!==o||(s=o,o=void 0),(i(e)&&r(e)||t(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=o,c._i=e,c._f=n,c._strict=s,(l=new m(ce(ge(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function ye(e,t,i,n){return ve(e,t,i,n,!1)}function be(e,i){var n,r;if(1===i.length&&t(i[0])&&(i=i[0]),!i.length)return ye();for(n=i[0],r=1;r<i.length;++r)i[r].isValid()&&!i[r][e](n)||(n=i[r]);return n}function we(e){var t=D(e),i=t.year||0,r=t.quarter||0,o=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=function(e){var t,i,r=!1;for(t in e)if(n(e,t)&&(-1===Ot.call(yi,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<yi.length;++i)if(e[yi[i]]){if(r)return!1;parseFloat(e[yi[i]])!==F(e[yi[i]])&&(r=!0)}return!0}(t),this._milliseconds=+u+1e3*d+6e4*c+1e3*l*60*60,this._days=+a+7*s,this._months=+o+3*r+12*i,this._data={},this._locale=le(),this._bubble()}function ke(e){return e instanceof we}function xe(e){return 0>e?-1*Math.round(-1*e):Math.round(e)}function Ce(e,t){T(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+C(~~(e/60),2)+t+C(~~e%60,2)})}function Te(e,t){var i,n,r=(t||"").match(e);return null===r?null:0===(n=60*(i=((r[r.length-1]||[])+"").match(bi)||["-",0,0])[1]+F(i[2]))?0:"+"===i[0]?n:-n}function $e(t,i){var n,r;return i._isUTC?(n=i.clone(),r=(g(t)||a(t)?t.valueOf():ye(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),e.updateOffset(n,!1),n):ye(t).local()}function Se(e){return-Math.round(e._d.getTimezoneOffset())}function _e(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ee(e,t){var i,r,o,a=e,l=null;return ke(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:s(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(l=wi.exec(e))?(i="-"===l[1]?-1:1,a={y:0,d:F(l[It])*i,h:F(l[Pt])*i,m:F(l[Ht])*i,s:F(l[Bt])*i,ms:F(xe(1e3*l[Ut]))*i}):(l=ki.exec(e))?(i="-"===l[1]?-1:1,a={y:De(l[2],i),M:De(l[3],i),w:De(l[4],i),d:De(l[5],i),h:De(l[6],i),m:De(l[7],i),s:De(l[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=function(e,t){var i;return e.isValid()&&t.isValid()?(t=$e(t,e),e.isBefore(t)?i=Ae(e,t):((i=Ae(t,e)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}(ye(a.from),ye(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),r=new we(a),ke(e)&&n(e,"_locale")&&(r._locale=e._locale),ke(e)&&n(e,"_isValid")&&(r._isValid=e._isValid),r}function De(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Ae(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=t-e.clone().add(i.months,"M"),i}function Ne(e,t){return function(i,n){var r;return null===n||isNaN(+n)||(b(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),Me(this,Ee(i,n),e),this}}function Me(t,i,n,r){var o=i._milliseconds,s=xe(i._days),a=xe(i._months);t.isValid()&&(r=null==r||r,a&&Y(t,R(t,"Month")+a*n),s&&j(t,"Date",R(t,"Date")+s*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&e.updateOffset(t,s||a))}function Fe(e){return"string"==typeof e||e instanceof String}function Oe(e){return g(e)||a(e)||Fe(e)||s(e)||function(e){var i=t(e),n=!1;return i&&(n=0===e.filter(function(t){return!s(t)&&Fe(e)}).length),i&&n}(e)||function(e){var t,o,s=i(e)&&!r(e),a=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<l.length;t+=1)o=l[t],a=a||n(e,o);return s&&a}(e)||null==e}function Re(e,t){if(e.date()<t.date())return-Re(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months"),r=0>t-n?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(1+i,"months")-n);return-(i+r)||0}function je(e){var t;return void 0===e?this._locale._abbr:(null!=(t=le(e))&&(this._locale=t),this)}function Le(){return this._locale}function Ie(e,t){return(e%t+t)%t}function Pe(e,t,i){return 100>e&&e>=0?new Date(e+400,t,i)-$i:new Date(e,t,i).valueOf()}function He(e,t,i){return 100>e&&e>=0?Date.UTC(e+400,t,i)-$i:Date.UTC(e,t,i)}function Be(e,t){return t.erasAbbrRegex(e)}function Ue(){for(var e=[],t=[],i=[],n=[],r=this.eras(),o=0,s=r.length;s>o;++o)t.push(P(r[o].name)),e.push(P(r[o].abbr)),i.push(P(r[o].narrow)),n.push(P(r[o].name)),n.push(P(r[o].abbr)),n.push(P(r[o].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Ye(e,t){T(0,[e,e.length],0,t)}function ze(e,t,i,n,r){var o;return null==e?X(this,n,r).year:((o=J(e,n,r))<t&&(t=o),function(e,t,i,n,r){var o=K(e,t,i,n,r),s=V(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,e,t,i,n,r))}function We(e,t){t[Ut]=F(1e3*("0."+e))}function qe(e){return e}function Ve(e,t,i,n){var r=le(),o=d().set(n,t);return r[i](o,e)}function Ge(e,t,i){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ve(e,t,i,"month");for(var n=[],r=0;12>r;r++)n[r]=Ve(e,r,i,"month");return n}function Ke(e,t,i,n){"boolean"==typeof e?s(t)&&(i=t,t=void 0):(t=e,e=!1,s(i=t)&&(i=t,t=void 0)),t=t||"";var r,o=le(),a=e?o._week.dow:0,l=[];if(null!=i)return Ve(t,(i+a)%7,n,"day");for(r=0;7>r;r++)l[r]=Ve(t,(r+a)%7,n,"day");return l}function Xe(e,t,i,n){var r=Ee(t,i);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function Je(e){return 0>e?Math.floor(e):Math.ceil(e)}function Ze(e){return 4800*e/146097}function Qe(e){return 146097*e/4800}function et(e){return function(){return this.as(e)}}function tt(e){return function(){return this.isValid()?this._data[e]:NaN}}function it(e,t,i,n){var r=Ee(e).abs(),o=Xi(r.as("s")),s=Xi(r.as("m")),a=Xi(r.as("h")),l=Xi(r.as("d")),c=Xi(r.as("M")),d=Xi(r.as("w")),u=Xi(r.as("y")),h=(o<=i.ss?["s",o]:o<i.s&&["ss",o])||1>=s&&["m"]||s<i.m&&["mm",s]||1>=a&&["h"]||a<i.h&&["hh",a]||1>=l&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(h=h||1>=d&&["w"]||d<i.w&&["ww",d]),(h=h||1>=c&&["M"]||c<i.M&&["MM",c]||1>=u&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=n,function(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}.apply(null,h)}function nt(e){return(e>0)-(0>e)||+e}function rt(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,r,o,s,a,l=Zi(this._milliseconds)/1e3,c=Zi(this._days),d=Zi(this._months),u=this.asSeconds();return u?(e=M(l/60),t=M(e/60),l%=60,e%=60,i=M(d/12),d%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=0>u?"-":"",o=nt(this._months)!==nt(u)?"-":"",s=nt(this._days)!==nt(u)?"-":"",a=nt(this._milliseconds)!==nt(u)?"-":"",r+"P"+(i?o+i+"Y":"")+(d?o+d+"M":"")+(c?s+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+n+"S":"")):"P0D"}var ot,st;st=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;i>n;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var at,lt=e.momentProperties=[],ct=!1,dt={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null,at=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)n(e,t)&&i.push(t);return i};var ut,ht=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ft={},mt={},gt={},vt={},yt=/\d/,bt=/\d\d/,wt=/\d{3}/,kt=/\d{4}/,xt=/[+-]?\d{6}/,Ct=/\d\d?/,Tt=/\d\d\d\d?/,$t=/\d\d\d\d\d\d?/,St=/\d{1,3}/,_t=/\d{1,4}/,Et=/[+-]?\d{1,6}/,Dt=/\d+/,At=/[+-]?\d+/,Nt=/Z|[+-]\d\d:?\d\d/gi,Mt=/Z|[+-]\d\d(?::?\d\d)?/gi,Ft=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;ut={};var Ot,Rt={},jt=0,Lt=1,It=2,Pt=3,Ht=4,Bt=5,Ut=6,Yt=7,zt=8;Ot=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},T("M",["MM",2],"Mo",function(){return this.month()+1}),T("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),T("MMMM",0,0,function(e){return this.localeData().months(this,e)}),_("month","M"),A("month",8),L("M",Ct),L("MM",Ct,bt),L("MMM",function(e,t){return t.monthsShortRegex(e)}),L("MMMM",function(e,t){return t.monthsRegex(e)}),H(["M","MM"],function(e,t){t[Lt]=F(e)-1}),H(["MMM","MMMM"],function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);null!=r?t[Lt]=r:u(i).invalidMonth=e});var Wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),qt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Vt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gt=Ft,Kt=Ft;T("Y",0,0,function(){var e=this.year();return 9999>=e?C(e,4):"+"+e}),T(0,["YY",2],0,function(){return this.year()%100}),T(0,["YYYY",4],0,"year"),T(0,["YYYYY",5],0,"year"),T(0,["YYYYYY",6,!0],0,"year"),_("year","y"),A("year",1),L("Y",At),L("YY",Ct,bt),L("YYYY",_t,kt),L("YYYYY",Et,xt),L("YYYYYY",Et,xt),H(["YYYYY","YYYYYY"],jt),H("YYYY",function(t,i){i[jt]=2===t.length?e.parseTwoDigitYear(t):F(t)}),H("YY",function(t,i){i[jt]=e.parseTwoDigitYear(t)}),H("Y",function(e,t){t[jt]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return F(e)+(68<F(e)?1900:2e3)};var Xt=O("FullYear",!0);T("w",["ww",2],"wo","week"),T("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),A("week",5),A("isoWeek",5),L("w",Ct),L("ww",Ct,bt),L("W",Ct),L("WW",Ct,bt),B(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=F(e)}),T("d",0,"do","day"),T("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),T("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),T("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),T("e",0,0,"weekday"),T("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),L("d",Ct),L("e",Ct),L("E",Ct),L("dd",function(e,t){return t.weekdaysMinRegex(e)}),L("ddd",function(e,t){return t.weekdaysShortRegex(e)}),L("dddd",function(e,t){return t.weekdaysRegex(e)}),B(["dd","ddd","dddd"],function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);null!=r?t.d=r:u(i).invalidWeekday=e}),B(["d","e","E"],function(e,t,i,n){t[n]=F(e)});var Jt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Zt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Qt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ei=Ft,ti=Ft,ii=Ft;T("H",["HH",2],0,"hour"),T("h",["hh",2],0,ee),T("k",["kk",2],0,function(){return this.hours()||24}),T("hmm",0,0,function(){return""+ee.apply(this)+C(this.minutes(),2)}),T("hmmss",0,0,function(){return""+ee.apply(this)+C(this.minutes(),2)+C(this.seconds(),2)}),T("Hmm",0,0,function(){return""+this.hours()+C(this.minutes(),2)}),T("Hmmss",0,0,function(){return""+this.hours()+C(this.minutes(),2)+C(this.seconds(),2)}),te("a",!0),te("A",!1),_("hour","h"),A("hour",13),L("a",ie),L("A",ie),L("H",Ct),L("h",Ct),L("k",Ct),L("HH",Ct,bt),L("hh",Ct,bt),L("kk",Ct,bt),L("hmm",Tt),L("hmmss",$t),L("Hmm",Tt),L("Hmmss",$t),H(["H","HH"],Pt),H(["k","kk"],function(e,t,i){var n=F(e);t[Pt]=24===n?0:n}),H(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),H(["h","hh"],function(e,t,i){t[Pt]=F(e),u(i).bigHour=!0}),H("hmm",function(e,t,i){var n=e.length-2;t[Pt]=F(e.substr(0,n)),t[Ht]=F(e.substr(n)),u(i).bigHour=!0}),H("hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[Pt]=F(e.substr(0,n)),t[Ht]=F(e.substr(n,2)),t[Bt]=F(e.substr(r)),u(i).bigHour=!0}),H("Hmm",function(e,t,i){var n=e.length-2;t[Pt]=F(e.substr(0,n)),t[Ht]=F(e.substr(n))}),H("Hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[Pt]=F(e.substr(0,n)),t[Ht]=F(e.substr(n,2)),t[Bt]=F(e.substr(r))});var ni,ri=O("Hours",!0),oi={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Wt,monthsShort:qt,week:{dow:0,doy:6},weekdays:Jt,weekdaysMin:Qt,weekdaysShort:Zt,meridiemParse:/[ap]\.?m?\.?/i},si={},ai={},li=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ci=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,di=/Z|[+-]\d\d(?::?\d\d)?/,ui=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],hi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pi=/^\/?Date\((-?\d+)/i,fi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,mi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var gi=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){
var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:p()}),vi=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()}),yi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ce("Z",":"),Ce("ZZ",""),L("Z",Mt),L("ZZ",Mt),H(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Te(Mt,e)});var bi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var wi=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ki=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ee.fn=we.prototype,Ee.invalid=function(){return Ee(NaN)};var xi=Ne(1,"add"),Ci=Ne(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ti=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)}),$i=126227808e5;T("N",0,0,"eraAbbr"),T("NN",0,0,"eraAbbr"),T("NNN",0,0,"eraAbbr"),T("NNNN",0,0,"eraName"),T("NNNNN",0,0,"eraNarrow"),T("y",["y",1],"yo","eraYear"),T("y",["yy",2],0,"eraYear"),T("y",["yyy",3],0,"eraYear"),T("y",["yyyy",4],0,"eraYear"),L("N",Be),L("NN",Be),L("NNN",Be),L("NNNN",function(e,t){return t.erasNameRegex(e)}),L("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),H(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,n){var r=i._locale.erasParse(e,n,i._strict);r?u(i).era=r:u(i).invalidEra=e}),L("y",Dt),L("yy",Dt),L("yyy",Dt),L("yyyy",Dt),L("yo",function(e,t){return t._eraYearOrdinalRegex||Dt}),H(["y","yy","yyy","yyyy"],jt),H(["yo"],function(e,t,i,n){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[jt]=i._locale.eraYearOrdinalParse(e,r):t[jt]=parseInt(e,10)}),T(0,["gg",2],0,function(){return this.weekYear()%100}),T(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ye("gggg","weekYear"),Ye("ggggg","weekYear"),Ye("GGGG","isoWeekYear"),Ye("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),L("G",At),L("g",At),L("GG",Ct,bt),L("gg",Ct,bt),L("GGGG",_t,kt),L("gggg",_t,kt),L("GGGGG",Et,xt),L("ggggg",Et,xt),B(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=F(e)}),B(["gg","GG"],function(t,i,n,r){i[r]=e.parseTwoDigitYear(t)}),T("Q",0,"Qo","quarter"),_("quarter","Q"),A("quarter",7),L("Q",yt),H("Q",function(e,t){t[Lt]=3*(F(e)-1)}),T("D",["DD",2],"Do","date"),_("date","D"),A("date",9),L("D",Ct),L("DD",Ct,bt),L("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),H(["D","DD"],It),H("Do",function(e,t){t[It]=F(e.match(Ct)[0])});var Si=O("Date",!0);T("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),A("dayOfYear",4),L("DDD",St),L("DDDD",wt),H(["DDD","DDDD"],function(e,t,i){i._dayOfYear=F(e)}),T("m",["mm",2],0,"minute"),_("minute","m"),A("minute",14),L("m",Ct),L("mm",Ct,bt),H(["m","mm"],Ht);var _i=O("Minutes",!1);T("s",["ss",2],0,"second"),_("second","s"),A("second",15),L("s",Ct),L("ss",Ct,bt),H(["s","ss"],Bt);var Ei,Di,Ai=O("Seconds",!1);for(T("S",0,0,function(){return~~(this.millisecond()/100)}),T(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),T(0,["SSS",3],0,"millisecond"),T(0,["SSSS",4],0,function(){return 10*this.millisecond()}),T(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),T(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),T(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),T(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),T(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),_("millisecond","ms"),A("millisecond",16),L("S",St,yt),L("SS",St,bt),L("SSS",St,wt),Ei="SSSS";Ei.length<=9;Ei+="S")L(Ei,Dt);for(Ei="S";Ei.length<=9;Ei+="S")H(Ei,We);Di=O("Milliseconds",!1),T("z",0,0,"zoneAbbr"),T("zz",0,0,"zoneName");var Ni=m.prototype;Ni.add=xi,Ni.calendar=function(t,o){1===arguments.length&&(Oe(arguments[0])?(t=arguments[0],o=void 0):function(e){for(var t=i(e)&&!r(e),o=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a=0;a<s.length;a+=1)o=o||n(e,s[a]);return t&&o}(arguments[0])&&(o=arguments[0],t=void 0));var s=t||ye(),a=$e(s,this).startOf("day"),l=e.calendarFormat(this,a)||"sameElse",c=o&&(w(o[l])?o[l].call(this,s):o[l]);return this.format(c||this.localeData().calendar(l,this,ye(s)))},Ni.clone=function(){return new m(this)},Ni.diff=function(e,t,i){var n,r,o;if(!this.isValid())return NaN;if(!(n=$e(e,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),t=E(t)){case"year":o=Re(this,n)/12;break;case"month":o=Re(this,n);break;case"quarter":o=Re(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:M(o)},Ni.endOf=function(t){var i,n;if(void 0===(t=E(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?He:Pe,t){case"year":i=n(this.year()+1,0,1)-1;break;case"quarter":i=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":i=n(this.year(),this.month()+1,1)-1;break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":i=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":i=this._d.valueOf(),i+=36e5-Ie(i+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":i=this._d.valueOf(),i+=6e4-Ie(i,6e4)-1;break;case"second":i=this._d.valueOf(),i+=1e3-Ie(i,1e3)-1}return this._d.setTime(i),e.updateOffset(this,!0),this},Ni.format=function(t){t=t||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var i=$(this,t);return this.localeData().postformat(i)},Ni.from=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||ye(e).isValid())?Ee({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ni.fromNow=function(e){return this.from(ye(),e)},Ni.to=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||ye(e).isValid())?Ee({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Ni.toNow=function(e){return this.to(ye(),e)},Ni.get=function(e){return w(this[e=E(e)])?this[e]():this},Ni.invalidAt=function(){return u(this).overflow},Ni.isAfter=function(e,t){var i=g(e)?e:ye(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},Ni.isBefore=function(e,t){var i=g(e)?e:ye(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},Ni.isBetween=function(e,t,i,n){var r=g(e)?e:ye(e),o=g(t)?t:ye(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(n=n||"()")[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i))},Ni.isSame=function(e,t){var i,n=g(e)?e:ye(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},Ni.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Ni.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Ni.isValid=function(){return h(this)},Ni.lang=Ti,Ni.locale=je,Ni.localeData=Le,Ni.max=vi,Ni.min=gi,Ni.parsingFlags=function(){return c({},u(this))},Ni.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t,i=[];for(t in e)n(e,t)&&i.push({unit:t,priority:vt[t]});return i.sort(function(e,t){return e.priority-t.priority}),i}(e=D(e)),r=0;r<i.length;r++)this[i[r].unit](e[i[r].unit]);else if(w(this[e=E(e)]))return this[e](t);return this},Ni.startOf=function(t){var i,n;if(void 0===(t=E(t))||"millisecond"===t||!this.isValid())return this;switch(n=this._isUTC?He:Pe,t){case"year":i=n(this.year(),0,1);break;case"quarter":i=n(this.year(),this.month()-this.month()%3,1);break;case"month":i=n(this.year(),this.month(),1);break;case"week":i=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":i=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":i=n(this.year(),this.month(),this.date());break;case"hour":i=this._d.valueOf(),i-=Ie(i+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":i=this._d.valueOf(),i-=Ie(i,6e4);break;case"second":i=this._d.valueOf(),i-=Ie(i,1e3)}return this._d.setTime(i),e.updateOffset(this,!0),this},Ni.subtract=Ci,Ni.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Ni.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Ni.toDate=function(){return new Date(this.valueOf())},Ni.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||9999<i.year()?$(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):w(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(i,"Z")):$(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Ni.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n="moment",r="";return this.isLocal()||(n=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+n+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+i)},"undefined"!=typeof Symbol&&null!=Symbol["for"]&&(Ni[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Ni.toJSON=function(){return this.isValid()?this.toISOString():null},Ni.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Ni.unix=function(){return Math.floor(this.valueOf()/1e3)},Ni.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Ni.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Ni.eraName=function(){for(var e,t=this.localeData().eras(),i=0,n=t.length;n>i;++i){if(e=this.startOf("day").valueOf(),t[i].since<=e&&e<=t[i].until)return t[i].name;if(t[i].until<=e&&e<=t[i].since)return t[i].name}return""},Ni.eraNarrow=function(){for(var e,t=this.localeData().eras(),i=0,n=t.length;n>i;++i){if(e=this.startOf("day").valueOf(),t[i].since<=e&&e<=t[i].until)return t[i].narrow;if(t[i].until<=e&&e<=t[i].since)return t[i].narrow}return""},Ni.eraAbbr=function(){for(var e,t=this.localeData().eras(),i=0,n=t.length;n>i;++i){if(e=this.startOf("day").valueOf(),t[i].since<=e&&e<=t[i].until)return t[i].abbr;if(t[i].until<=e&&e<=t[i].since)return t[i].abbr}return""},Ni.eraYear=function(){for(var t,i,n=this.localeData().eras(),r=0,o=n.length;o>r;++r)if(t=n[r].since<=n[r].until?1:-1,i=this.startOf("day").valueOf(),n[r].since<=i&&i<=n[r].until||n[r].until<=i&&i<=n[r].since)return(this.year()-e(n[r].since).year())*t+n[r].offset;return this.year()},Ni.year=Xt,Ni.isLeapYear=function(){return N(this.year())},Ni.weekYear=function(e){return ze.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Ni.isoWeekYear=function(e){return ze.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Ni.quarter=Ni.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Ni.month=z,Ni.daysInMonth=function(){return U(this.year(),this.month())},Ni.week=Ni.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Ni.isoWeek=Ni.isoWeeks=function(e){var t=X(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Ni.weeksInYear=function(){var e=this.localeData()._week;return J(this.year(),e.dow,e.doy)},Ni.weeksInWeekYear=function(){var e=this.localeData()._week;return J(this.weekYear(),e.dow,e.doy)},Ni.isoWeeksInYear=function(){return J(this.year(),1,4)},Ni.isoWeeksInISOWeekYear=function(){return J(this.isoWeekYear(),1,4)},Ni.date=Si,Ni.day=Ni.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},Ni.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Ni.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,i,n=(t=e,i=this.localeData(),"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?n:n-7)},Ni.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Ni.hour=Ni.hours=ri,Ni.minute=Ni.minutes=_i,Ni.second=Ni.seconds=Ai,Ni.millisecond=Ni.milliseconds=Di,Ni.utcOffset=function(t,i,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:Se(this);if("string"==typeof t){if(null===(t=Te(Mt,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&i&&(r=Se(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!i||this._changeInProgress?Me(this,Ee(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},Ni.utc=function(e){return this.utcOffset(0,e)},Ni.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Se(this),"m")),this},Ni.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Te(Nt,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},Ni.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?ye(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Ni.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Ni.isLocal=function(){return!!this.isValid()&&!this._isUTC},Ni.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Ni.isUtc=_e,Ni.isUTC=_e,Ni.zoneAbbr=function(){return this._isUTC?"UTC":""},Ni.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Ni.dates=y("dates accessor is deprecated. Use date instead.",Si),Ni.months=y("months accessor is deprecated. Use month instead",z),Ni.years=y("years accessor is deprecated. Use year instead",Xt),Ni.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Ni.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e,t={};return f(t,this),(t=ge(t))._a?(e=(t._isUTC?d:ye)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,i){for(var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,s=0;n>s;s++)(i&&e[s]!==t[s]||!i&&F(e[s])!==F(t[s]))&&o++;return o+r}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});var Mi=x.prototype;Mi.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return w(n)?n.call(t,i):n},Mi.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(ht).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Mi.invalidDate=function(){return this._invalidDate},Mi.ordinal=function(e){return this._ordinal.replace("%d",e)},Mi.preparse=qe,Mi.postformat=qe,Mi.relativeTime=function(e,t,i,n){var r=this._relativeTime[i];return w(r)?r(e,t,i,n):r.replace(/%d/i,e)},Mi.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return w(i)?i(t):i.replace(/%s/i,t)},Mi.set=function(e){var t,i;for(i in e)n(e,i)&&(w(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Mi.eras=function(t,i){for(var n,r=this._eras||le("en")._eras,o=0,s=r.length;s>o;++o){switch(typeof r[o].since){case"string":n=e(r[o].since).startOf("day"),r[o].since=n.valueOf()}switch(typeof r[o].until){case"undefined":r[o].until=1/0;break;case"string":n=e(r[o].until).startOf("day").valueOf(),r[o].until=n.valueOf()}}return r},Mi.erasParse=function(e,t,i){var n,r,o,s,a,l=this.eras();for(e=e.toUpperCase(),n=0,r=l.length;r>n;++n)if(o=l[n].name.toUpperCase(),s=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(s===e)return l[n];break;case"NNNN":if(o===e)return l[n];break;case"NNNNN":if(a===e)return l[n]}else if(0<=[o,s,a].indexOf(e))return l[n]},Mi.erasConvertYear=function(t,i){var n=t.since<=t.until?1:-1;return void 0===i?e(t.since).year():e(t.since).year()+(i-t.offset)*n},Mi.erasAbbrRegex=function(e){return n(this,"_erasAbbrRegex")||Ue.call(this),e?this._erasAbbrRegex:this._erasRegex},Mi.erasNameRegex=function(e){return n(this,"_erasNameRegex")||Ue.call(this),e?this._erasNameRegex:this._erasRegex},Mi.erasNarrowRegex=function(e){return n(this,"_erasNarrowRegex")||Ue.call(this),e?this._erasNarrowRegex:this._erasRegex},Mi.months=function(e,i){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Vt).test(i)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone},Mi.monthsShort=function(e,i){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Vt.test(i)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Mi.monthsParse=function(e,t,i){var n,r,o;if(this._monthsParseExact)return function(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)o=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(r=Ot.call(this._shortMonthsParse,s))?r:null:-1!==(r=Ot.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Ot.call(this._shortMonthsParse,s))||-1!==(r=Ot.call(this._longMonthsParse,s))?r:null:-1!==(r=Ot.call(this._longMonthsParse,s))||-1!==(r=Ot.call(this._shortMonthsParse,s))?r:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(r=d([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},Mi.monthsRegex=function(e){return this._monthsParseExact?(n(this,"_monthsRegex")||W.call(this),e?this._monthsStrictRegex:this._monthsRegex):(n(this,"_monthsRegex")||(this._monthsRegex=Kt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Mi.monthsShortRegex=function(e){return this._monthsParseExact?(n(this,"_monthsRegex")||W.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(n(this,"_monthsShortRegex")||(this._monthsShortRegex=Gt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Mi.week=function(e){return X(e,this._week.dow,this._week.doy).week},Mi.firstDayOfYear=function(){return this._week.doy},Mi.firstDayOfWeek=function(){return this._week.dow},Mi.weekdays=function(e,i){var n=t(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(i)?"format":"standalone"];return!0===e?Z(n,this._week.dow):e?n[e.day()]:n},Mi.weekdaysMin=function(e){return!0===e?Z(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Mi.weekdaysShort=function(e){return!0===e?Z(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Mi.weekdaysParse=function(e,t,i){var n,r,o;if(this._weekdaysParseExact)return function(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)o=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(r=Ot.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ot.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Ot.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Ot.call(this._weekdaysParse,s))||-1!==(r=Ot.call(this._shortWeekdaysParse,s))||-1!==(r=Ot.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ot.call(this._shortWeekdaysParse,s))||-1!==(r=Ot.call(this._weekdaysParse,s))||-1!==(r=Ot.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Ot.call(this._minWeekdaysParse,s))||-1!==(r=Ot.call(this._weekdaysParse,s))||-1!==(r=Ot.call(this._shortWeekdaysParse,s))?r:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(r=d([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},Mi.weekdaysRegex=function(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Q.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(n(this,"_weekdaysRegex")||(this._weekdaysRegex=ei),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Mi.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Q.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(n(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ti),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Mi.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(n(this,"_weekdaysRegex")||Q.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(n(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ii),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Mi.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Mi.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},se("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===F(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),e.lang=y("moment.lang is deprecated. Use moment.locale instead.",se),e.langData=y("moment.langData is deprecated. Use moment.localeData instead.",le);var Fi=Math.abs,Oi=et("ms"),Ri=et("s"),ji=et("m"),Li=et("h"),Ii=et("d"),Pi=et("w"),Hi=et("M"),Bi=et("Q"),Ui=et("y"),Yi=tt("milliseconds"),zi=tt("seconds"),Wi=tt("minutes"),qi=tt("hours"),Vi=tt("days"),Gi=tt("months"),Ki=tt("years"),Xi=Math.round,Ji={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Zi=Math.abs,Qi=we.prototype;return Qi.isValid=function(){return this._isValid},Qi.abs=function(){var e=this._data;return this._milliseconds=Fi(this._milliseconds),this._days=Fi(this._days),this._months=Fi(this._months),e.milliseconds=Fi(e.milliseconds),e.seconds=Fi(e.seconds),e.minutes=Fi(e.minutes),e.hours=Fi(e.hours),e.months=Fi(e.months),e.years=Fi(e.years),this},Qi.add=function(e,t){return Xe(this,e,t,1)},Qi.subtract=function(e,t){return Xe(this,e,t,-1)},Qi.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=E(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+Ze(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Qe(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Qi.asMilliseconds=Oi,Qi.asSeconds=Ri,Qi.asMinutes=ji,Qi.asHours=Li,Qi.asDays=Ii,Qi.asWeeks=Pi,Qi.asMonths=Hi,Qi.asQuarters=Bi,Qi.asYears=Ui,Qi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*F(this._months/12):NaN},Qi._bubble=function(){var e,t,i,n,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||0>=o&&0>=s&&0>=a||(o+=864e5*Je(Qe(a)+s),a=s=0),l.milliseconds=o%1e3,e=M(o/1e3),l.seconds=e%60,t=M(e/60),l.minutes=t%60,i=M(t/60),l.hours=i%24,s+=M(i/24),a+=r=M(Ze(s)),s-=Je(Qe(r)),n=M(a/12),a%=12,l.days=s,l.months=a,l.years=n,this},Qi.clone=function(){return Ee(this)},Qi.get=function(e){return e=E(e),this.isValid()?this[e+"s"]():NaN},Qi.milliseconds=Yi,Qi.seconds=zi,Qi.minutes=Wi,Qi.hours=qi,Qi.days=Vi,Qi.weeks=function(){return M(this.days()/7)},Qi.months=Gi,Qi.years=Ki,Qi.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,r=!1,o=Ji;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},Ji,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=this.localeData(),n=it(this,!r,o,i),r&&(n=i.pastFuture(+this,n)),i.postformat(n)},Qi.toISOString=rt,Qi.toString=rt,Qi.toJSON=rt,Qi.locale=je,Qi.localeData=Le,Qi.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rt),Qi.lang=Ti,T("X",0,0,"unix"),T("x",0,0,"valueOf"),L("x",At),L("X",/[+-]?\d+(\.\d{1,3})?/),H("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e))}),H("x",function(e,t,i){i._d=new Date(F(e))}),e.version="2.27.0",ot=ye,e.fn=Ni,e.min=function(){return be("isBefore",[].slice.call(arguments,0))},e.max=function(){return be("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=d,e.unix=function(e){return ye(1e3*e)},e.months=function(e,t){return Ge(e,t,"months")},e.isDate=a,e.locale=se,e.invalid=p,e.duration=Ee,e.isMoment=g,e.weekdays=function(e,t,i){return Ke(e,t,i,"weekdays")},e.parseZone=function(){return ye.apply(null,arguments).parseZone()},e.localeData=le,e.isDuration=ke,e.monthsShort=function(e,t){return Ge(e,t,"monthsShort")},e.weekdaysMin=function(e,t,i){return Ke(e,t,i,"weekdaysMin")},e.defineLocale=ae,e.updateLocale=function(e,t){var i,n,r;return null!=t?(r=oi,null!=si[e]&&null!=si[e].parentLocale?si[e].set(k(si[e]._config,t)):(null!=(n=oe(e))&&(r=n._config),t=k(r,t),null==n&&(t.abbr=e),(i=new x(t)).parentLocale=si[e],si[e]=i),se(e)):null!=si[e]&&(null!=si[e].parentLocale?(si[e]=si[e].parentLocale,e===se()&&se(e)):null!=si[e]&&delete si[e]),si[e]},e.locales=function(){return at(si)},e.weekdaysShort=function(e,t,i){return Ke(e,t,i,"weekdaysShort")},e.normalizeUnits=E,e.relativeTimeRounding=function(e){return void 0===e?Xi:"function"==typeof e&&(Xi=e,!0)},e.relativeTimeThreshold=function(e,t){return void 0!==Ji[e]&&(void 0===t?Ji[e]:(Ji[e]=t,"s"===e&&(Ji.ss=t-1),!0))},e.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"},e.prototype=Ni,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e});var HP=HP||{};HP.cookie={},HP.cookie.set=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="expires="+n.toGMTString();document.cookie=e+"="+t+"; "+r},HP.cookie.get=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){var r=i[n].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""};var HP=HP||{},setSubmitValue;$(function(){function e(e){function t(e){var t="<p>"+e+"</p>";$('.onboarding-content button[type="submit"]').prop("disabled",!1),$(".loading-animation").hide(),$(".j-modal-form-message").show().addClass("error-message").html(t)}var i=window.location.pathname.split("/")[1],n="/"+i+" : like/follow modal";$("#modal-onboarding-back").show(),$("#onboarding-modal").show(),$(".onboarding-interests").hide(),$(".onboarding-signup").show(),$("#signup-switch").click(function(e){e.preventDefault(),$(".headline h1.title").text("Become a Hackaday.io member"),$(".onboarding-subtitle-login").removeClass("hidden"),$(".onboarding-subtitle-signup").addClass("hidden"),$(".onboarding-modal-captcha").removeClass("hidden"),$('#onboarding-modal input[name="email"]').attr("placeholder","Enter your email address"),$('#onboarding-modal input[name="password"]').attr("placeholder","Pick a secure password"),$(".remember-me,.signin-empty-bottom,.forgot-password").addClass("hidden"),$(".onboardingCaption").text("Sign up"),$(".onboarding-content form").attr("action","/signupfast"),$('.onboarding-content button[type="submit"]').prop("disabled",!1)}),$("#login-switch").click(function(e){e.preventDefault(),$(".headline h1.title").text("Log in to your account"),$(".onboarding-subtitle-signup").removeClass("hidden"),$(".onboarding-subtitle-login").addClass("hidden"),$(".onboarding-modal-captcha").addClass("hidden"),$('#onboarding-modal input[name="email"]').attr("placeholder","Your email address"),$('#onboarding-modal input[name="password"]').attr("placeholder","Your password"),$(".remember-me,.signin-empty-bottom,.forgot-password").removeClass("hidden"),$(".onboardingCaption").text("Log in"),$(".onboarding-content form").attr("action","/signin"),$('.onboarding-content button[type="submit"]').prop("disabled",!1)});var r=function(i){i.preventDefault(),ga("send","event",{eventCategory:"onboarding",eventAction:"submit",eventLabel:n}),$('.onboarding-content button[type="submit"]').prop("disabled",!0);var r=$("#onboarding-email").val(),o=$("#onboarding-pass").val().length;if(!isEmail(r))return t("Please enter a valid email address."),!1;if(4>o)return t("Password must be at least 4 characters"),!1;if(o>256)return t("Password is too long"),!1;$(".j-modal-form-message").removeClass("error-message"),$(".onboarding-modal .j-modal-form-message").html("<div class='loading-animation'></div>").show();var s=window.location.href;$.ajax({beforeSend:function(e,t){},type:"POST",url:$(this).attr("action"),data:$(this).serialize(),timeout:5e3,success:function(i){if(i.errors)if($("#captchaUrl").removeAttr("src").attr("src","/captcha.jpg?="+(new Date).getTime()),$("#captchaInput").val(""),i.errors.password)t(i.errors.password.msg);else if(i.errors.email)t(i.errors.email.msg);else if(i.errors.captcha||i.errors.captchaUrl)t("captcha incorrect");else if(i.errors.deleted){
var n=$("<input>",{type:"hidden",name:"redirect",value:!0});$(".onboarding-content form").append(n),$(".onboarding-content form")[0].submit()}else t("An error occured, please try again.");else"project-following-container"==e?$(".gold-gold-button.follow").trigger("click"):"project-skulling-container"==e&&$(".gold-gold-button.skulled").trigger("click"),i.newUser?($(".onboarding-interests").show(),$(".onboarding-signup").hide(),interestsModal(s)):window.location.reload()},error:function(e){t(e.responseJSON.errors.password?e.responseJSON.errors.password.msg:"An error occured, please try again."),$("#captchaUrl").removeAttr("src").attr("src","/captcha.jpg?="+(new Date).getTime()),$("#captchaInput").val("")}})};$(".onboarding-content form").submit(r)}function t(){setTimeout(function(){var e=sessionStorage.getItem("notificationsCheckedTime");sessionStorage.setItem("notificationsCheckedTime",moment().format("X"));var t=JSON.parse(sessionStorage.getItem("notifications"));n(t,e),$(".j-notifications-loading").hide(),$("#j-notifications-menu").show()},1e3)}function i(){setTimeout(function(){var e="/api/user/notifications";$.ajax({url:e,timeout:25e3,success:function(e){if(e.error)$(".j-notifications-item").remove(),$(".j-notifications-loading").hide(),$(".j-notifications-retry").show();else{var t=e.userNotificationsCheckedTime,i=e.parsedNotificationsContent.items;window.sessionStorage?(sessionStorage.setItem("notificationsCheckedTime",moment().format("X")),sessionStorage.setItem("notifications",JSON.stringify(i))):HP.cookie.set("notificationsCheckedTime",moment().format("X")),n(i,t),$("#j-notifications-dropdown .j-unread-count").hide(),$("#j-notifications-link .j-unread-count").text("").hide()}},error:function(e){$(".j-notifications-item").remove(),$(".j-notifications-loading").hide(),$(".j-notifications-retry").show()}})},1e3)}function n(e,t){if(e.length>0){for(var i=[],n=0;n<e.length;n++){var r=$.parseJSON(e[n].actor),o=$.parseJSON(e[n].object),s=$.parseJSON(e[n].target);const a={followuser:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed you.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",listFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your list <a href="/list/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",projectFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your project <a href="/project/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",projectSkull:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> liked your project <a href="/project/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",discussionsComment:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/'+(s?s.type:"NULL")+"/"+(s?s.id:"NULL")+"/discussion-"+o.id+'">comment</a> on your '+(s?s.type:"NULL")+' <a href="/'+(s?s.type:"NULL")+"/"+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",discussionsCommentReply:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/'+(s?s.type:"NULL")+"/"+(s?s.id:"NULL")+"/discussion-"+o.id+'">reply</a> on the '+(s?s.type:"NULL")+' <a href="/'+(s?s.type:"NULL")+"/"+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",logPageComment:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/project/'+(s&&s.project?s.project.id:"NULL")+"/log/"+(s?s.id:"NULL")+"/discussion-"+o.id+'">comment</a> on your log <a href="/project/'+(s&&s.project?s.project.id:"NULL")+"/log/"+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",logPageCommentReply:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/project/'+(s&&s.project?s.project.id:"NULL")+"/log/"+(s?s.id:"NULL")+"/discussion-"+o.id+'">reply</a> on the log <a href="/project/'+(s&&s.project?s.project.id:"NULL")+"/log/"+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",profileComment:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a comment on your <a href="/hacker/'+(s?s.id:"NULL")+"/discussion-"+o.id+'#discussion-list">Bits</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",profileCommentReply:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a reply on <a href="/hacker/'+(s?s.id:"NULL")+"/discussion-"+o.id+'#discussion-list">Bits</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",eventFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your event <a href="/event/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",contestFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your contest <a href="/contest/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",courseFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your course <a href="/course/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",hackerspaceFollow:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> followed your hackerspace <a href="/hackerspace/'+o.id+'">'+o.name+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",stackPageComment:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/page/'+(s?s.id:"NULL")+'#comments">comment</a> on your '+(s?s.type:"NULL")+' <a href="/page/'+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>",stackPageCommentReply:'<img src="'+r.image+'" width="40"></div>       <div class="hfr-is-size-7"><a href="/hacker/'+r.id+'">'+r.name+'</a> wrote a <a href="/page/'+(s?s.id:"NULL")+'#comments">reply</a> on the '+(s?s.type:"NULL")+' <a href="/page/'+(s?s.id:"NULL")+'">'+(s?s.name:"NULL")+'</a>.<br>       <span class="hfr-has-text-grey">'+moment(e[n].time,"X").fromNow()+"</span>"};("followuser"===e[n].type||"listFollow"===e[n].type||"projectFollow"===e[n].type||"projectSkull"===e[n].type||"discussionsComment"===e[n].type||"discussionsCommentReply"===e[n].type||"logPageComment"===e[n].type||"logPageCommentReply"===e[n].type||"profileComment"===e[n].type||"profileCommentReply"===e[n].type||"eventFollow"===e[n].type||"contestFollow"===e[n].type||"courseFollow"===e[n].type||"hackerspaceFollow"===e[n].type||"stackPageComment"===e[n].type||"stackPageCommentReply"===e[n].type)&&i.push('<div class="j-notifications-item" style="display: flex; padding: 5px 8px; '+(t<e[n].time?"background-color: #3c3c3c;":"")+'">    <div style="flex-shrink: 0; flex-basis: 30px;" class="identity-card" data-checked="'+t+" - "+e[n].time+'">'+a[e[n].type]+"    </div></div>")}$(".j-notifications-loading").hide(),$(".j-notifications-item").remove(),$("#j-notifications-items").append(i)}}$("#resend-email-verification").click(function(e){var t=$(this);e.preventDefault(),$.ajax({url:"/api/profile/resendEmailVerification",data:{_csrf:csrftoken},timeout:5e3,method:"POST",success:function(e){e.error?t.append("Something is wrong. Please try again"):t.parent().html("A new verification email should arrive soon.")},error:function(e){t.append("Something is wrong. Please try again")}})});var r;$("body").on({mouseenter:function(){$("#identity-card").length&&$("#identity-card").remove();var e=$(this);if(identityCardType=$(this).data("card-type"),"project"===identityCardType){var t='<div id="identity-card" class="identity-card-overlay">   <img class="project" src="'+$(this).data("image")+'" />   <h3>       <a href="/project/'+$(this).data("id")+'" target="_blank">'+$(this).data("title")+"</a>   </h3>   <p>"+$(this).data("summary")+'</p>   <div class="stats">       <span class="col"><small>'+utils.numberFormatK($(this).data("likes-count"))+'</small> Likes</span>       <span class="col"><small>'+utils.numberFormatK($(this).data("followers-count"))+"</small> Followers</span>   </div></div>";$(t).appendTo("body"),$("#identity-card").css({top:e.offset().top-$("#identity-card").outerHeight()-5,left:e.offset().left})}else profileId=$(this).data("id"),r=setTimeout(function(){$.ajax({url:"/api/profile/popup/"+profileId,timeout:5e3,success:function(t){var i='<div id="identity-card" class="identity-card-overlay">   <img src="'+utils.resizeImage(t.avatar_url,"75x75")+'" />   <h3>       <a href="/hacker/'+t.id+'" target="_blank">'+t.screen_name+"</a>   </h3>   <p>"+t.about_me+'</p>   <div class="stats">       <span class="col"><small>'+utils.numberFormatK(t.followersCount)+'</small> Followers</span>       <span class="col"><small>'+utils.numberFormatK(t.projectsCount)+"</small> Projects</span>   </div></div>";$(i).appendTo("body"),$("#identity-card").css({top:e.offset().top-$("#identity-card").outerHeight()-5,left:e.offset().left})},error:function(e){}})},1e3)},mouseleave:function(){clearTimeout(r),$("#identity-card").length&&$("#identity-card").remove()}},".identity-card"),$("#forgot-pass-link").click(function(e){e.preventDefault();var t=$("input[name=email]").val(),i=t?"?email="+encodeURIComponent(t):"";window.location="/forgotpass"+i}),$(".sign-in-with-mail-button").click(function(e){$(".signup-options").addClass("hidden"),$(".singup-section-home").removeClass("hidden")}),($(".signin-container").length>0||$(".no-results").length>0&&0===$(".section-hackers").length)&&$(".footer .back-to-top").hide(),$(".textarea-holder").on("keyup","textarea",function(e){$(this).css("height","auto"),$(this).height(this.scrollHeight)}),$(".textarea-holder").find("textarea").keyup(),$(".following-container a").click(function(e){var t=$(this).parent();if(t.hasClass("loading"))return!1;var i=$(this).attr("data-href");return t.addClass("loading"),$.ajax({url:i,method:"POST",context:t,data:{_csrf:csrftoken},beforeSend:function(){if("registered"===window.dimensionValue){var e=null!==i.match(/\d+(\/event)?\/follow$/);e?this.addClass("on"):this.removeClass("on"),this.removeClass("loading")}}}).done(function(e){e&&!e.error&&(e.following&&e.similars&&e.similars.length&&showSimilarUsers(e.similars),e.profile&&($("#follower_count span").text(e.profile.following_count),$("#following_count span").text(e.profile.follower_count)))}).fail(function(e,t){401==e.status&&(location.href="/signin?returnUrl="+encodeURIComponent(window.location.pathname))}).always(function(){this.removeClass("loading")}),!1}),$(".project-following-container, .project-skulling-container, .stack-following-container").click(function(t){if($(this).hasClass("loading"))return!1;var i,n=t.target||t.srcElement,r=$(n).data("href")||$(n).parent().data("href");return r?(urlMatch=r.match(/\/event\/(\w+)$/),urlMatch?i=urlMatch[1]:(i=!1,window.location.href=r)):"project-skulling-container"==$(this).hasClass()?i="skull":"project-following-container"==$(this).hasClass()&&(i="follow"),i&&($(this).addClass("loading"),$.ajax({url:r,method:"POST",context:$(this),timeout:15e3,data:{_csrf:csrftoken,fromClient:!0},beforeSend:function(){if("registered"===window.dimensionValue){var e=this,t=$(".follower_count span").text(),n=$(".like_count span").text(),r=null===t.match(/\.|k/),o=null===n.match(/\.|k/);switch(i){case"follow":r&&$(".follower_count span").text(Number(t)+1),e.addClass("on");break;case"unfollow":r&&$(".follower_count span").text(Number(t)-1),e.removeClass("on");break;case"skull":o&&$(".like_count span").text(Number(n)+1),e.addClass("on");break;case"unskull":o&&$(".like_count span").text(Number(n)-1),e.removeClass("on")}$(this).removeClass("loading")}},success:function(e){e.errors&&($("#captchaUrl").removeAttr("src").attr("src","/captcha.jpg?="+(new Date).getTime()),$("#captchaInput").val(""))}}).done(function(t){if(t&&!t.error){var i=this;this.data("rel")&&(i=$("[data-rel="+this.data("rel")+"]")),t.following||t.liking?(i.addClass("on"),t.similars&&t.similars.length&&showSimilars(t.similars)):i.removeClass("on"),t.project&&($(".comment_count span").text(t.project.comment_count),$(".follower_count span").text(t.project.follower_count),$(".like_count span").text(t.project.like_count))}else if(t&&t.error){this.removeClass("loading");var n=$(this).attr("class");e(n)}}).always(function(){this.removeClass("loading")})),!1}),$("#invitations-list, #j-notifications-list, #j-account, #j-more, #j-contests-more, #j-projects").liteTooltip({openClass:"current",hideClass:"remove-current"}),$(".date-relative").click(function(){$(this).addClass("hidden"),$(".date-exact").removeClass("hidden")}),$(".date-exact").click(function(){$(this).addClass("hidden"),$(".date-relative").removeClass("hidden")});var o=$(".page-basic-info");if(o.length>0&&"disabled"!==o.data("sticky")){var s=$(".page-basic-info .page-basic-info--title").height(),a=$(".page-basic-info .page-basic-info--title").offset().top,l=a+s,c=function(){$(window).scrollTop()<=l?($(".page-basic-info").css("position","inherit"),$("body").css("padding-top",0)):($(".page-basic-info").css({position:"fixed",top:-(s+24),zIndex:1}),$("body").css("padding-top",$(".page-basic-info").outerHeight()+$("#gallery-error.error-message").outerHeight()))};$(window).scroll(function(){c()}),c()}$(".submission-icon").hover(function(){$(this).addClass("submission-icon-hover")},function(){$(this).removeClass("submission-icon-hover")});var d=!1,u=document.querySelector("#whole-page-form .publish-button");setSubmitValue=function(e){d=e}.bind(this),$("#whole-page-form").submit(function(e){d||e.preventDefault()}),$("#whole-page-form .publish-button, #whole-page-form button").click(function(e){u.setAttribute("disabled",!0),e.preventDefault(),d=!0,$("#whole-page-form").submit()}),$(".section-private .tag-public, .section-private .tag-private").on("click",function(e){var t=$(this).hasClass("tag-private"),i=t?"Save":"Publish";$(".publish-button").text(i)}),$("#show-search-holder").click(function(){$(".search-holder").show(),$(".search-holder .input-search").focus(),$(this).hide()}),$("select").selectOverlap(),$("#sort-by-tag, #sort-by, #sort-by-range").change(function(){window.location=$(this).val()}),$("#invitations-form").submit(function(e){e.preventDefault();var t,i=$(this).find(".invited-email");for(t=0;t<i.length;t++)!function(e){var t=$(e).val(),i=$(e).attr("id");t&&($("#"+i).hide(),$("#"+i).next().show(),$.ajax({url:"/invitation/send?invitedEmail="+t,success:function(e){if(e.error)$("#"+i).addClass("field-error"),$("#"+i).show(),$("#"+i).next().hide();else{var n=parseInt($("#invitations-left").html())-1;$("#"+i).next().remove(),$("#"+i).remove(),$("#invitations-list-drop").prepend('<li><div class="class="invitation-list""><p>'+t+" is invited<p></div></li>"),$("#invitations-left").html(n),n||$("#j-invitations-title").hide()}},error:function(e){window.console,$("#"+i).show(),$("#"+i).next().hide()},timeout:15e3}))}(i[t])});var h=function(e,t){var i=this;this.$el=e,this.interval=null,this.$msg=e.find(".j-top-content"),this.$close=e.find(".j-top-message-close"),this.set=function(e,t){this.$msg.html(e),this.show(t)},this.show=function(e){this.interval&&(clearInterval(this.interval),this.interval=null),this.$el.show(),"undefined"!=typeof e&&(this.interval=setTimeout(function(){i.hide()},e))},this.hide=function(){this.$el.slideUp(),this.interval&&(clearInterval(this.interval),this.interval=null)},this.$msg.html()&&this.show(t),this.$close.click(function(){i.hide()})};if(HP.topMessage=new h($("#topMessage")),initHackadayRedactor(),$(".need-help").click(function(){$(".need-help-content").toggle()}),$(".j-need-confirmation").click(function(e){e.preventDefault(),$(".j-modal-confirmation.modal-background, .j-modal-confirmation.modal-content-holder").show(),$("#modal-message").html($(this).data("message"))}),$("#modal-yes").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).data(),i="";t.pageid&&t.pagetype?(i+=["details","instruction","log"].indexOf(t.pagetype)>=0?"/post":"/page",i+="/"+t.pageid):i="/"+t.projecttype+"/"+t.projectid,i+="/delete",$.ajax({url:i,data:{_csrf:csrftoken},method:"POST",success:function(e){$(location).attr("href",i)},error:function(e){var t=i.replace(/\/delete/,"");$(location).attr("href",t)}})}),$(".modal-background").click(function(e){e.target===e.currentTarget&&(window.messagesApp||$(".modal-background, .modal-content-holder").hide())}),$(document).on("click","#modal-cancel",function(){$(".modal-background, .modal-content-holder").hide()}),$(document).keyup(function(e){27==e.keyCode&&$(".modal-background, .modal-content-holder").hide()}),$(".button-menu").click(function(){$(".nav").toggleClass("nav-show")}),$("#j-account").length>0){var p="/api/user/me";-1!==window.location.search.indexOf("new-feed"),null!==window.location.pathname.match(/\/(my)?feed\-new/gi);$.ajax({url:p,success:function(e){e.unread_counts.feeds=Math.max(0,e.unread_counts.feeds),e.unread_counts.feeds&&0!=e.unread_counts.feeds&&$("#myFeed .unread-count").text(e.unread_counts.feeds).show(),e.unread_counts.conversations&&$("#myMessages .unread-count").text(e.unread_counts.conversations).show(),e.unread_counts.notifications&&($("#j-notifications-dropdown .j-unread-count").attr("style","display: block; position: absolute; top: 1.25rem; left: 2.25rem;"),$("#j-notifications-link .j-unread-count").text(e.unread_counts.notifications).show())},error:function(e){window.console},timeout:15e3,cache:!1})}$(".j-store-tracking").on("click",function(e){ga("send","event","menu-link","store")}),$("#j-notifications-link, #j-notifications-retry").click(function(e){e.preventDefault(),$(".j-notifications-item").remove(),$(".j-notifications-retry").hide(),$(".j-notifications-loading").show(),$("#j-notifications-menu").show(),$("#j-notifications-link .unread-count").text()>0?i():window.sessionStorage&&sessionStorage.getItem("notifications")?t():i()}),$("#j-notifications-close").click(function(e){$("#j-notifications-menu").hide()}),$(".j-blackboard-close").click(function(){$(".j-blackboard").slideUp()}),$(".hfr-navbar-burger").click(function(){$(".hfr-navbar-burger").toggleClass("hfr-is-active"),$(".hfr-navbar-menu").toggleClass("hfr-is-active")}),$(".j-tag-radio").click(function(){$(".tag-radio input").attr("checked",!1),$(".hfr-tag").removeClass("hfr-is-active"),$("span",this).addClass("hfr-is-active"),$("input",this).attr("checked",!0)})}),$(".text-changing-button").hover(function(){$(this).html($(this).data("after"))},function(){$(this).html($(this).data("before"))}),$("#similars").on("click",".follow-similar",function(e){e.preventDefault();var t=$(this),i=t.data("href");$.ajax({url:i,method:"POST",data:{_csrf:csrftoken}}).done(function(e){e&&!e.error&&($("#similars .hide:first").removeClass("hide"),t.parent().parent().slideUp(function(){$(".similar-project:hidden").length===$(".similar-project").length&&$("#similars").hide()}))}).fail(function(e,t){401==e.status&&(location.href="/signin?returnUrl="+encodeURIComponent(window.location.pathname))})}),$("#similar-users").on("click",".follow-similar",function(e){e.preventDefault();var t=$(this),i=t.data("href");$.ajax({url:i,method:"POST",data:{_csrf:csrftoken}}).done(function(e){e&&!e.error&&t.parent().parent().animate({width:0},50,function(){$("#similar-users .hide:first").removeClass("hide"),$(this).hide(),$(".similar-user:hidden").length===$(".similar-user").length&&$("#similar-users").slideUp()})}).fail(function(e,t){401==e.status&&(location.href="/signin?returnUrl="+encodeURIComponent(window.location.pathname))})}),$("#choose-username").submit(function(e){e.preventDefault();var t=$(this).attr("action");$("#select-username").addClass("input-username-loading"),$("#setEmailErrorMessage").addClass("hide"),$.ajax({url:t,data:$(this).serialize(),method:"POST",success:function(e){var t=e.message.split(" ")[0];e.error?$("#setEmailErrorMessage p").html(e.message).parent().show():($("#setEmailErrorMessage").hide(),$(".j-share-username h2").html(e.message).parent().show(),$(".j-share-username a.share-twitter").attr("href","https://twitter.com/intent/tweet?url="+t+"&text="+t+"&related=hackaday&via=hackaday"),$(".j-share-username a.share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+t),$(".j-register-welcome").hide()),$("#select-username").removeClass("input-username-loading")},error:function(e){$("#setEmailErrorMessage p").html(e.responseJSON.message).parent().show(),$("#select-username").removeClass("input-username-loading")},timeout:5e3})});var HIO=HIO||{};HIO.interests={terms:["Arduino","Robotics","BeagleBone","Raspberry Pi","Art","Hardware","Software","LED","AVR","Bluetooth","Satellites","Radio","Cameras","Rockets","Drones","Clock","Automation","Remote Control","Wearables","IoT","3D Printing","Music","Audio","Medical","Environment","Security","Science","Virtual Reality"],termsLink:{Arduino:"/img/interests_icons/png/grayicons/arduino2x.png",Art:"/img/interests_icons/png/grayicons/art2x.png",AVR:"/img/interests_icons/png/grayicons/avr2x.png",Robotics:"/img/interests_icons/png/grayicons/robotics2x.png","Raspberry Pi":"/img/interests_icons/png/grayicons/raspberrypi2x.png",BeagleBone:"/img/interests_icons/png/grayicons/beaglebone2x.png",Hardware:"/img/interests_icons/png/grayicons/hardware2x.png",Software:"/img/interests_icons/png/grayicons/software2x.png",LED:"/img/interests_icons/png/grayicons/led2x.png",Bluetooth:"/img/interests_icons/png/grayicons/bluetooth2x.png",Satellites:"/img/interests_icons/png/grayicons/satellites2x.png",Radio:"/img/interests_icons/png/grayicons/radio2x.png",Cameras:"/img/interests_icons/png/grayicons/cameras2x.png",Rockets:"/img/interests_icons/png/grayicons/rockets2x.png",Drones:"/img/interests_icons/png/grayicons/drones2x.png",Clock:"/img/interests_icons/png/grayicons/clocks2x.png",Automation:"/img/interests_icons/png/grayicons/automation2x.png","Remote Control":"/img/interests_icons/png/grayicons/remote2x.png",Wearables:"/img/interests_icons/png/grayicons/wearables2x.png",IoT:"/img/interests_icons/png/grayicons/iot2x.png","3D Printing":"/img/interests_icons/png/grayicons/3d-printing2x.png",Music:"/img/interests_icons/png/grayicons/music2x.png",Audio:"/img/interests_icons/png/grayicons/audio2x.png",Medical:"/img/interests_icons/png/grayicons/medical2x.png",Environment:"/img/interests_icons/png/grayicons/enviroment2x.png",Security:"/img/interests_icons/png/grayicons/security2x.png",Science:"/img/interests_icons/png/grayicons/science2x.png","Virtual Reality":"/img/interests_icons/png/grayicons/vr2x.png"},activeTermsLink:{Arduino:"/img/interests_icons/png/whiteicons/arduino2x.png",Art:"/img/interests_icons/png/whiteicons/art2x.png",AVR:"/img/interests_icons/png/whiteicons/avr2x.png",Robotics:"/img/interests_icons/png/whiteicons/robotics2x.png","Raspberry Pi":"/img/interests_icons/png/whiteicons/raspberrypi2x.png",BeagleBone:"/img/interests_icons/png/whiteicons/beaglebone2x.png",Hardware:"/img/interests_icons/png/whiteicons/hardware2x.png",Software:"/img/interests_icons/png/whiteicons/software2x.png",LED:"/img/interests_icons/png/whiteicons/led2x.png",Bluetooth:"/img/interests_icons/png/whiteicons/bluetooth2x.png",Satellites:"/img/interests_icons/png/whiteicons/satellites2x.png",Radio:"/img/interests_icons/png/whiteicons/radio2x.png",Cameras:"/img/interests_icons/png/whiteicons/cameras2x.png",Rockets:"/img/interests_icons/png/whiteicons/rockets2x.png",Drones:"/img/interests_icons/png/whiteicons/drones2x.png",Clock:"/img/interests_icons/png/whiteicons/clocks2x.png",Automation:"/img/interests_icons/png/whiteicons/automation2x.png","Remote Control":"/img/interests_icons/png/whiteicons/remote2x.png",Wearables:"/img/interests_icons/png/whiteicons/wearables2x.png",IoT:"/img/interests_icons/png/whiteicons/iot2x.png","3D Printing":"/img/interests_icons/png/whiteicons/3d-printing2x.png",Music:"/img/interests_icons/png/whiteicons/music2x.png",Audio:"/img/interests_icons/png/whiteicons/audio2x.png",Medical:"/img/interests_icons/png/whiteicons/medical2x.png",Environment:"/img/interests_icons/png/whiteicons/enviroment2x.png",Security:"/img/interests_icons/png/whiteicons/security2x.png",Science:"/img/interests_icons/png/whiteicons/science2x.png","Virtual Reality":"/img/interests_icons/png/whiteicons/vr2x.png"},initBase:function(e){this.terms.sort(),this.page="",this.totalProjects=0,this.totalUsers=0,this.totalTerms=0;var t=this;$.ajax({url:"/api/interests/",method:"GET",success:function(i){if(i){this.totalTerms=i.length;for(var r=0;r<i.length;r++){var o=$('.interests-list-item[data-term="'+i[r]+'"]');o.addClass("active"),o.find("img").attr("src",HIO.interests.activeTermsLink[n]),t.selectTerm(i[r],function(t){t&&$('<div id="interests-error" class="error-message"><p>An error occured while rendering some projects and people.</p></div>').insertAfter(e)})}}},error:function(){$('<div id="interests-error" class="error-message"><p>An error occured while fetching user interests.</p></div>').insertAfter(e)}});for(var i=0;i<this.terms.length;i++){var n=this.terms[i],r='<li class="interests-list-item grey-gold-button hvr-underline-from-center" data-term="'+n+'">';r+=' <div class="interests-list-icons hvr-icon-spin">',r+='     <img class="icon" src="'+this.termsLink[n]+'" />',r+=" </div>",r+=' <div class="interests-list-terms">',r+="     <p>"+n+"</p>",r+=" </div>",r+="</li>",$(".list-terms-ul").append($(r))}$(".interests-list-item").on("click",function(e){var i=$(this).data("term"),n=$(this);t.selectTerm(i,function(e){e?(n.removeClass("active"),n.find("img").attr("src",HIO.interests.termsLink[i])):(n.addClass("active"),n.find("img").attr("src",HIO.interests.activeTermsLink[i]))})}),$(".refine-people, .refine-projects").on("click",function(e){t.refine($(this).attr("class").split("-")[1])}),$("#back").on("click",function(e){t.back()})},doneInterests:function(e){var t=[],i="";if(!(this.totalTerms<1)){for(var n in this.data)t.push(n);i=t.join(",");var r=this;$.ajax({url:"/api/interests/follow/",method:"POST",data:{_csrf:csrftoken,interests:i,data:flatten(r.data)},success:function(t){t.error?($('<div id="interests-error" class="error-message"><p>'+t.message+"</p></div>").insertAfter(e),setTimeout(function(){window.location="/"},3e3)):window.location=r.redirectURL},error:function(t){$('<div id="interests-error" class="error-message"><p>'+t.responseJSON.message+"</p></div>").insertAfter(e),setTimeout(function(){window.location="/"},3e3)}})}},removeSelected:function(e,t){for(var i in this.data)for(var n=0;n<this.data[i][t].length;n++)this.data[i][t][n].id===e&&(this.data[i][t][n].deleted?(this.data[i][t][n].deleted=!1,"projects"===t?this.totalProjects++:this.totalUsers++):(this.data[i][t][n].deleted=!0,"projects"===t?this.totalProjects--:this.totalUsers--),this.selected=flatten(this.data),this.updateStats())},isTermSelected:function(e){return this.data[e]},selectTerm:function(e,t){if(this.data[e])return this.totalProjects-=this.data[e].projects.length,this.totalUsers-=this.data[e].users.length,this.totalTerms--,delete this.data[e],this.updateStats(),t(!0);var i=this;$.ajax({url:"/api/interests/results/"+e,method:"GET",success:function(n){n&&(i.data[e]=n,n.projects&&(i.totalProjects+=n.projects.length),n.users&&(i.totalUsers+=n.users.length),i.totalTerms++,i.updateStats(),t(!1))},error:function(e){t(!0),window.console}})},back:function(){$("#interests-list, .stats-text").show(),$("#selected, .more-interests").hide(),this.page=""},updateStats:function(){$(".refine-people").html(this.totalUsers+(1===this.totalUsers?" person":" people")),$(".refine-projects").html(this.totalProjects+(1===this.totalProjects?" project":" projects")),this.totalTerms>0?($("#done").addClass("gold-gold-button"),$("#done").removeClass("grey-grey-button"),$(".stats-text").removeClass("hide")):($("#done").addClass("grey-grey-button"),$("#done").removeClass("gold-gold-button"),$(".stats-text").addClass("hide"))}},HIO.interests.redirectURL="/",HIO.interests.data={},HIO.interests.init=function(){var e=this;$(".j-modal-form-message").hide(),$(".loading-animation").hide(),this.initBase(".footer-static"),$("#done").on("click",function(t){e.doneUsernameAndInterests()}),$(document).on("click",".remove-selected",function(t){e.removeSelected($(this).data("id"),$(this).data("type"));var i=$(this);i.hasClass("deleted")?i.removeClass("deleted"):i.addClass("deleted")}),$("#modal-onboarding-back,.onboarding-interests .modal-close").click(function(){window.location.reload()}),$("#skipUsernameInterests").click(function(e){window.location.reload()}),this.usernameChecking()},HIO.interests.usernameChecking=function(){var e=this;$("#usernameModal").on("change",function(){var t=$("#usernameModal").val(),i="";""===t?(i="Username is a required field.",$("#username-interests-modal .icon-complete-circle").hide(),$("#username-interests-modal .prefixed-input-container").addClass("highlight-error"),e.showModalErrorMessage(i)):$.ajax({url:"/api/user/checkUsername",method:"GET",data:{username:t},success:function(e){e.error&&(i=e.message)},error:function(e){i=e.responseJSON.message},complete:function(t){i?($("#username-interests-modal .icon-complete-circle").hide(),$("#username-interests-modal .prefixed-input-container").addClass("highlight-error"),e.showModalErrorMessage(i)):($("#username-interests-modal .icon-complete-circle").show(),$("#username-interests-modal .prefixed-input-container").removeClass("highlight-error"),$(".j-modal-form-message").hide())}})})},HIO.interests.showModalErrorMessage=function(e){var t="<p>"+e+"</p>";$(".loading-animation").hide(),$(".j-modal-form-message").show().addClass("error-message").html(t)},HIO.interests.doneUsernameAndInterests=function(){var e=this,t=$("#usernameModal").val();if(""===t)errorMessage="Username is a required field.",$("#username-interests-modal .icon-complete-circle").hide(),$("#username-interests-modal .prefixed-input-container").addClass("highlight-error"),e.showModalErrorMessage(errorMessage);else{if(this.totalTerms<1)return errorMessage="Select a few interests.",void e.showModalErrorMessage(errorMessage);$.ajax({url:"/api/user/setUsername",method:"POST",data:{_csrf:csrftoken,username:t},success:function(i){i.error?(errorMessage=i.message,$("#username-interests-modal .icon-complete-circle").hide(),$("#username-interests-modal .prefixed-input-container").addClass("highlight-error"),e.showModalErrorMessage(errorMessage)):($("#username-interests-modal .icon-complete-circle").show(),$("#username-interests-modal input.prefixed-input-field").prop("readonly",!0),$("#username-interests-modal .urlhint").html("Your profile is now live at hackaday.io/<strong>"+t+"</strong>! You can change it later if you like."),e.doneInterests(".footer-static"))},error:function(t){var i=t.responseJSON.message;$("#username-interests-modal .icon-complete-circle").hide(),
e.showModalErrorMessage(i)}})}},HIO.interests.refine=function(e){$("#interests-list, .stats-text").hide(),$("#selected, .more-interests").show(),this.page="refine",this.selected=flatten(this.data),$(".list-projects, .list-people").html("");for(var t=0;t<this.selected.length;t++){var i=this.selected[t];if(i.title){var n='<li class="item-li-mini identity-card remove-selected deleted-holder'+(i.deleted?" deleted":"")+'" data-type="projects" style="background-image: url('+i.image+')" data-id="'+i.id.substring(7)+'" data-card-type="project"data-image="'+i.image+'" data-title="'+i.title+'" data-followers-count="'+i.followersCount+'" data-likes-count="'+i.likesCount+'" data-summary="'+i.summary+'" >';n+="</li>",$(".list-projects").append(n)}if(i.screen_name){var n='<li class="item-li-mini identity-card remove-selected deleted-holder'+(i.deleted?" deleted":"")+'" data-type="users" style="background-image: url('+i.avatar_url+')" data-id="'+i.id+'">';n+="</li>",$(".list-people").append(n)}}location.hash="#interests-"+e+"-frame"},$(function(){$("#setMailForm").submit(function(e){e.preventDefault();var t=$(this).serialize(),i=$(".save-email-form .input-email").val(),n=function(e){$("#setEmailErrorMessage").removeClass("hidden"),$("#setEmailErrorMessage").html("<p>"+e+"</p>"),$(".save-email-form .input-email").focus()};return i&&0!==i.length?isEmail(i)?void $.ajax({url:"/api/profile/setEmail",method:"POST",data:t,dataType:"json",success:function(e){$(".save-email-form").remove(),$("#setEmailErrorMessage").remove()},error:function(e){window.console,n(e.responseJSON?e.responseJSON.message:"System error!")}}):(n("Please enter a valid email address."),!1):(n("Please enter your email."),!1)})});var pluralize=function(e,t){return e>1||-1>e||0===e?t+"s":t},getDays=function(){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e},formatProjectDates=function(e){var t=e.toString().match(/\(([A-Z]+)\)$/),i=t?t[1]:"",n=getDays(),r=n[e.getDay()],o=e.toDateString().slice(4),s=e.toLocaleTimeString();s=s.replace(":00",""),s.includes("AM")?s=s.replace("AM","am"):s.includes("PM")&&(s=s.replace("PM","pm"));var a=r+", "+o+", "+s+" "+i;return a},getLocalTime=function(e){var t=/\+|\-/,i=new Date(e),n=i.toString().split(t)[0],r=new Date(n).toISOString();return r},extractTimeZone=function(e){e=e.trim();const t=e.split(" ").slice(-1)[0];return t};"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1});var CT=function(e,t,i,n){ga("send","event",{eventCategory:t,eventAction:i,eventLabel:n,hitCallback:function(){e&&e.href&&(document.location=e.href)}})},allowNumbersOnly=function(e){-1!==$.inArray(e.keyCode,[46,8,9,27])||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},emailRex=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,isEmail=function(e){return emailRex.test(e)},utils={};if(utils.numberFormat=function(e,t,i){var n,r,o,s;t=t||0,i=i||!1,e=""+e.toFixed(t),n=e.split("."),r=n[0],o=n.length>1?"."+n[1]:"";for(var a=/(\d+)(\d{3})/;a.test(r);)r=r.replace(a,"$1,$2");if(s=r+o,i){var l=s.slice(0,1);0==l&&(s=s.slice(1,s.length))}return s},utils.numberFormatK=function(e){var t=e;return e>999&&(t=this.numberFormat(e/1e3,1).replace(".0","")+"k"),t},utils.svgWrap=function(e,t){return'<div class="icon icon-'+e+'">'+t+"</div>"},utils.resizeImage=function(e,t){if(e){var i=document.createElement("a");return i.href=e,"undefined"==typeof t&&(t="600x600"),i.hostname&&(e=e.replace(/\/images/g,"/images/resize/"+t)),e}},utils.addLinksToImages=function(e){var t=$(e).find("img");$(t).each(function(){var e="";"a"!==$(this).parent().get(0).tagName.toLowerCase()&&(e=$(this).attr("src")||$(this).attr("data-src"),$(this).wrap('<a href="'+e+'" target="_blank"></a>'))})},utils.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},utils.wrapQuotes=function(e,t){$(e).find(t).each(function(){$(this).text()&&$(this).prepend('"').append('..."')})},utils.urlRex=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.‌​\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[‌​6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1‌​,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00‌​a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u‌​00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,utils.startUrlRex=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?/,utils.removeStyles=function(e){if(e.removeAttribute("style"),e.childNodes.length>0)for(var t in e.childNodes)1==e.childNodes[t].nodeType&&removeStyles(e.childNodes[t])},utils.formatRedactorContent=function(e){var t=e.replace(/[\u200B-\u200D\uFEFF]/g,"").trim();if(!t)return"";var i=t.replace(/<\/?p>/g,"").replace(/<br>/g,"");if(!i)return"";var n=encodeURIComponent(t).replace(/(%E2%80%8B|%26nbsp%3B|%20)/g,"");return n?t:""},utils.serializeJQueryFormDataIntoObject=function(e){return e.serialize().split("&").reduce(function(e,t){var i=t.split("="),n=i[0],r=decodeURIComponent(i[1]);return e[n]=r,e},{_csrf:csrftoken})},utils.debounce=function(e,t,i){var n;return function(){var r=this,o=arguments,s=function(){n=null,i||e.apply(r,o)},a=i&&!n;clearTimeout(n),n=setTimeout(s,t),a&&e.apply(r,o)}},utils.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},utils.queryParams={get:function(e){if(e.length&&"?"===e[0]){var t=e.slice(1).split("&");return t.reduce(function(e,t){var i=t.split("=");return e[i[0]]=i[1],e},{})}return{}},create:function(e){e=e||{};var t=Object.keys(e).map(function(t){return"undefined"!=typeof e[t]&&""!==e[t]&&"undefined"!==e[t]?t+"="+e[t]:t});return t.length?"?"+t.join("&"):""},update:function(e,t){var i=utils.queryParams.get(e),n=Object.assign(i,t),r=utils.queryParams.create(n);return r}},!RedactorPlugins)var RedactorPlugins={};RedactorPlugins.readMoreTag=function(){return{init:function(){var e=this.button.add("readMoreTag","Insert Read More Tag");this.button.setIcon(e,'<i class="re-readMoreTag"></i>'),this.button.addCallback(e,this.readMoreTag.insertHTML)},insertHTML:function(e){this.buffer.set();var t=$('<div class="read-more-tag">---------- more ----------</div>');this.insert.node(t),this.caret.after(t),window.setTimeout(function(){this.core.editor().focus()}.bind(this),0)}}},RedactorPlugins.horizontalRule=function(){return{init:function(){var e=this.button.add("horizontalrule","Insert Horizontal Rule");this.button.setIcon(e,'<i class="re-icon-horizontalrule"></i>'),this.button.addCallback(e,this.horizontalRule.insertHTML)},insertHTML:function(e){this.buffer.set();var t=$("<hr />");this.insert.node(t),this.caret.after(t),window.setTimeout(function(){this.core.editor().focus()}.bind(this),0)}}};var viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0),STICKY_VIEWPORT_WIDTH=500,MAX_TEXT_LENGTH=65e3,hackadayRedactorOptions={focus:!0,minHeight:500,imageUpload:"/api/upload/image?ref=redactor&_csrf="+encodeURIComponent(csrftoken),clipboardImageUpload:!0,callbacks:{counter:function(e){e.characters>=MAX_TEXT_LENGTH},imageUpload:function(){$("#gallery-error").remove()},imageUploadError:function(e){var t="Unkown Error";"string"==typeof e.error?t=e.error:e.data&&e.data.indexOf("Request Entity Too Large")>-1&&(t="Sorry, image size should be less than 5MB."),$("#gallery-error").remove(),$('<div id="gallery-error" class="error-message"><p>'+t+'</p><div class="close">x</div></div>').insertAfter(this.$toolbar),$("#gallery-error.error-message").css("position",$(".redactor-toolbar").css("position")),$("#gallery-error.error-message").css("z-index",1),$("#gallery-error.error-message").css("top",0),$(window).scroll(function(){$("#gallery-error.error-message").css("position",$(".redactor-toolbar").css("position")),"absolute"===$(".redactor-toolbar").css("position")?$("#gallery-error.error-message").css("top",parseInt($(".redactor-toolbar").css("top"))+36):$("#gallery-error.error-message").css("top",0)}),$(".error-message").click(function(){$(this).remove()})}},buttonsHide:["outdent","indent","alignment","deleted","horizontalrule"],convertVideoLinks:!0,imageResizable:!0,imagePosition:!0,observeLinks:!0,toolbarFixed:viewportWidth>STICKY_VIEWPORT_WIDTH,linkTooltip:!1,formatting:["p","blockquote","h1","h2"],linkSize:1e3,source:!0,limiter:MAX_TEXT_LENGTH,plugins:["html","video","table","imagemanager","horizontalRule","latex","codeSnippet","readMoreTag","mention","source","limiter","counter"]},initHackadayRedactor=function(e,t){"function"==typeof $.fn.redactor&&($("body").bind("dragenter dragover",!1).bind("drop",function(e){e.stopPropagation(),e.preventDefault()}),e||(e=$(".redactor")),t||(t=hackadayRedactorOptions),e.redactor(t))};$(function(){var e={rows:50,columns:25};$("body").on("keyup","#redactor-table-columns, #redactor-table-rows",function(t){var i=$(t.currentTarget),n=i.val(),r=$("#redactor-modal-table-insert label");"0"===n&&(i.val(1).attr("value",1),n=1),i.is("#redactor-table-rows")&&(n>e.rows?(i.val(e.rows).attr("value",e.rows),r.first().text("Rows (max: "+e.rows+")")):r.first().text("Rows")),i.is("#redactor-table-columns")&&(n>e.columns?(i.val(e.columns).attr("value",e.columns),r.last().text("Columns (max: "+e.columns+")")):r.last().text("Columns"))})});var searchQuery=$(".j-add-search").val(),searchApi="/search/suggest",selectedItemIndex=-1,submitSearch=function(){return $(".j-add-search").val($(".j-add-search").val().trim()),$(".j-add-search").val().length<2?($("#search-form")[0].checkValidity(),!1):!0},addAutocompleteMouseEvents=function(){var e=$("#search-autocomplete li");$("#search-autocomplete li").on("mouseover",function(t){e.css("background-color","transparent"),$(this).css("background-color","#202020"),selectedItemIndex=Number($(this).attr("class").slice(10))}),e.on("mouseout",function(e){$(this).css("background-color","transparent")}),$("#search-autocomplete").on("mouseout",function(e){selectedItemIndex=-1})},buildSearchResult=function(e,t,i){var n=t[e.type].url.replace("[projectId]",e.projectId),r=$("<a>",{href:n+e.rid}),o=$("<div>",{"class":"image"}).css({background:"#333 url("+(e.image||"../img/placeholder.png")+") center center no-repeat",backgroundSize:"cover"});r.append(o);var s=$("<div>",{"class":"search-result-right"}),a=$("<div>",{"class":"title"}).text(e.title),l=$("<div>",{"class":"type"}),c=e.type,d=t[c].resultName;"hacker"===c||"hackerspace"===c?e.location&&(d+=" in "+e.location):"project event"===c?e.location&&(d+=" on "+e.id):e.userName&&(d+=" by "+e.userName),s.append(a),l.text(d),s.append(l);var u=makeFollowsAndLikesContainer(e.followersCount,e.likesCount);s.append(u),r.append(s);var h=$("<li>",{"class":"list-item-"+i});return h.append(r),h},userIconSvg='<div class="icon icon-user"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><title>user</title><path d="M11.418 10.812C9.828 10.24 9.32 9.757 9.32 8.724c0-.62.486-.417.7-1.553.088-.47.516-.007.598-1.082 0-.43-.234-.536-.234-.536s.12-.634.165-1.122c.057-.608-.356-2.18-2.56-2.18-2.206 0-2.62 1.572-2.56 2.18.045.488.164 1.122.164 1.122s-.234.107-.234.536c.082 1.075.51.612.6 1.083.212 1.136.697.934.697 1.554 0 1.033-.508 1.516-2.096 2.088-1.593.574-2.628 1.16-2.628 1.558v1.34h12.114v-1.34c0-.4-1.036-.984-2.63-1.558z" fill-rule="evenodd"/></svg></div>',skullIconSvg='<div class="icon icon-skull"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><title>skull</title><path d="M5.508 5.892l.583-.582-.68-.627c-.522-.48-.703-.753-.77-1.166a1.694 1.694 0 0 0-1.41-1.395l-.544-.076.524.503.524.5-.51.577c-.28.317-.558.63-.618.7-.062.067-.3-.04-.542-.242-.238-.2-.48-.364-.54-.364-.234 0 .048.726.432 1.11.32.318.53.407.98.41.484 0 .686.1 1.264.613.38.336.697.614.707.617.01.003.28-.257.6-.578zm6.173.045c.635-.55.877-.676 1.292-.675a1.59 1.59 0 0 0 1.49-1.07c.09-.27.136-.514.106-.545-.03-.03-.286.134-.567.365l-.51.42-.606-.665-.607-.665.505-.535.506-.534-.544.083c-.71.108-1.296.69-1.41 1.402-.07.423-.25.688-.826 1.215l-.737.673.52.59c.286.325.54.597.565.604.025.007.396-.29.826-.663zm-2.137 3.52c-.06-.103-.29-.273-.51-.38-.603-.29-.745-.598-.434-.94.376-.418 1.082-.38 1.442.078.34.433.36.71.07 1.12-.244.352-.412.387-.57.12zm-3.82-.12c-.288-.41-.27-.69.07-1.122.36-.457 1.066-.496 1.444-.08.31.344.168.653-.433.943-.22.106-.45.276-.51.378-.158.266-.326.23-.57-.12zm1.85 1.21c0-.378.278-.927.44-.873.194.064.41.78.295.97-.045.072-.138.047-.21-.058-.103-.145-.148-.148-.202-.014-.096.235-.322.217-.322-.026zm-.275.997c0-.24.253-.306.23-.016-.012.18-.015.638.528.655.542.017.49-.384.493-.572.002-.36.246-.28.246.012 0 .296.22.545.6.547.38 0 .38-.323.38-.624 0-.252.146-.59.366-.85.535-.636.736-1.22.736-2.135 0-2.387-2.244-3.872-4.32-2.857-1.917.94-2.3 3.69-.72 5.168.198.184.36.466.36.627.01.535.12.67.554.676.435.007.445-.366.546-.63zm5.458 2.057l-.51-.447.567-.654c.31-.36.634-.655.72-.655.084 0 .326.166.538.37.463.442.627.344.39-.23-.277-.666-.894-1.104-1.556-1.104-.47 0-.662-.09-1.108-.515-.323-.31-.563-.45-.6-.353-.032.09-.236.408-.453.706l-.394.544.47.456c.26.25.47.56.47.684 0 .857.754 1.645 1.573 1.646h.402l-.51-.447zm-8.896.24c.443-.23.822-.842.822-1.327 0-.17.195-.51.432-.756l.432-.446-.328-.402c-.18-.222-.4-.52-.487-.662-.148-.246-.18-.237-.618.17-.346.324-.63.45-1.133.503-.77.08-1.256.47-1.456 1.17-.153.533-.03.563.404.1.178-.19.4-.345.494-.345.094 0 .43.294.747.654l.574.653-.518.448-.518.448h.375c.205 0 .555-.094.777-.21z" fill-rule="evenodd"/></svg></div>',getSearchResults=function(){$.ajax({url:searchApi,data:{term:searchQuery},type:"GET",dataType:"json"}).done(function(e){var t;try{t=JSON.parse(e)}catch(i){t=e}var n=t.numFound,r=t.searchTypes||{},o=t.results,s=5;if(Number(n)>0){var a=$("#search-autocomplete");a.length>0?a.empty():a=$("<ul>",{id:"search-autocomplete","class":"search-autocomplete"});for(var l=0;l<Math.min(o.length,s);l++)a.append(buildSearchResult(o[l],r,l));if(n>s){var c=$("<li>",{"class":"list-item-5 search-result-see-all"}),d=$("<a>",{href:"/search?term="+searchQuery}).text("See all "+n+" results");c.append(d),a.append(c)}$("#search-form .hfr-control").append(a)}})};$(function(){$(".j-add-search").on("keyup",function(e){var t="",i=$("#search-autocomplete li"),n=$("#search-autocomplete"),r=$("#search-autocomplete li.list-item-0");38===e.keyCode?(0>=selectedItemIndex?selectedItemIndex=i.length-1:selectedItemIndex--,i.css("background-color","transparent"),r=$("#search-autocomplete li.list-item-"+selectedItemIndex),r.css("background-color","#202020"),0===selectedItemIndex?$("#search-autocomplete li.list-item-"+selectedItemIndex).css("border-radius","5px"):selectedItemIndex===i.length-1&&$("#search-autocomplete li.list-item-"+selectedItemIndex).css("border-radius","5px")):40===e.keyCode?(selectedItemIndex>=i.length-1?selectedItemIndex=0:selectedItemIndex++,i.css("background-color","transparent"),r=$("#search-autocomplete li.list-item-"+selectedItemIndex),r.css("background-color","#202020"),0===selectedItemIndex?r.css("border-radius","5px"):selectedItemIndex===i.length-1&&r.css("border-radius","5px")):13===e.keyCode?-1!==selectedItemIndex&&(t=$("#search-autocomplete li.list-item-"+selectedItemIndex).find("a").attr("href"),window.location.href=t):27===e.keyCode?(n.remove(),selectedItemIndex=-1):(selectedItemIndex=-1,searchQuery=$(".j-add-search").val(),""===searchQuery.trim()?n.remove():(n.remove(),searchQuery.length>=3&&getSearchResults())),addAutocompleteMouseEvents()}),$(document).on("mouseup",function(e){var t=$("#search-autocomplete");t.length>0&&(t.is(e.target)||0!==t.has(e.target).length||t.remove())}),addAutocompleteMouseEvents()}),$(function(){function e(){$(".lazy").lazy({onError:function(){t&&clearTimeout(t),r>=i||(t=setTimeout(function(){++r,e()},n))}})}var t,i=5,n=3e3,r=1;e()}),function(e){"use strict";function t(e,i){return new t.prototype.init(e,i)}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e)}});var i=0;e.fn.redactor=function(i){var n=[],r=Array.prototype.slice.call(arguments,1);return"string"==typeof i?this.each(function(){var t,o=e.data(this,"redactor");if("-1"!==i.search(/\./)?(t=i.split("."),"undefined"!=typeof o[t[0]]&&(t=o[t[0]][t[1]])):t=o[i],"undefined"!=typeof o&&e.isFunction(t)){var s=t.apply(o,r);void 0!==s&&s!==o&&n.push(s)}else e.error('No such method "'+i+'" for Redactor')}):this.each(function(){e.data(this,"redactor",{}),e.data(this,"redactor",t(this,i))}),0===n.length?this:1===n.length?n[0]:n},e.Redactor=t,e.Redactor.VERSION="2.8.1",e.Redactor.modules=["air","autosave","block","buffer","build","button","caret","clean","code","core","detect","dropdown","events","file","focus","image","indent","inline","insert","keydown","keyup","lang","line","link","linkify","list","marker","modal","observe","offset","paragraphize","paste","placeholder","progress","selection","shortcuts","storage","toolbar","upload","uploads3","utils","browser"],e.Redactor.settings={},e.Redactor.opts={animation:!1,lang:"en",direction:"ltr",spellcheck:!0,overrideStyles:!0,scrollTarget:document,focus:!1,focusEnd:!1,clickToEdit:!1,structure:!1,tabindex:!1,minHeight:!1,maxHeight:!1,maxWidth:!1,plugins:!1,callbacks:{},placeholder:!1,linkify:!0,enterKey:!0,pastePlainText:!1,pasteImages:!0,pasteLinks:!0,pasteBlockTags:["pre","h1","h2","h3","h4","h5","h6","table","tbody","thead","tfoot","th","tr","td","ul","ol","li","blockquote","p","figure","figcaption"],pasteInlineTags:["br","strong","ins","code","del","span","samp","kbd","sup","sub","mark","var","cite","small","b","u","em","i"],preClass:!1,preSpaces:4,tabAsSpaces:!1,tabKey:!0,autosave:!1,autosaveName:!1,autosaveFields:!1,imageUpload:null,imageUploadParam:"file",imageUploadFields:!1,imageUploadForms:!1,imageTag:"figure",imageEditable:!0,imageCaption:!0,imagePosition:!1,imageResizable:!1,imageFloatMargin:"10px",dragImageUpload:!0,multipleImageUpload:!0,clipboardImageUpload:!0,fileUpload:null,fileUploadParam:"file",fileUploadFields:!1,fileUploadForms:!1,dragFileUpload:!0,s3:!1,linkNewTab:!1,linkTooltip:!0,linkNofollow:!1,linkSize:30,pasteLinkTarget:!1,videoContainerClass:"video-container",toolbar:!0,toolbarFixed:!0,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarExternal:!1,toolbarOverflow:!1,air:!1,airWidth:!1,formatting:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],formattingAdd:!1,buttons:["format","bold","italic","deleted","lists","image","file","link","horizontalrule"],buttonsTextLabeled:!1,buttonsHide:[],buttonsHideOnMobile:[],script:!0,removeNewlines:!1,removeComments:!0,replaceTags:{b:"strong",i:"em",strike:"del"},keepStyleAttr:[],shortcuts:{"ctrl+shift+m, meta+shift+m":{func:"inline.removeFormat"},"ctrl+b, meta+b":{func:"inline.format",params:["bold"]},"ctrl+i, meta+i":{func:"inline.format",params:["italic"]},"ctrl+h, meta+h":{func:"inline.format",params:["superscript"]},"ctrl+l, meta+l":{func:"inline.format",params:["subscript"]},"ctrl+k, meta+k":{func:"link.show"},"ctrl+shift+7":{func:"list.toggle",params:["orderedlist"]},"ctrl+shift+8":{func:"list.toggle",params:["unorderedlist"]}},shortcutsAdd:!1,activeButtons:["deleted","italic","bold"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted"},langs:{en:{format:"Format",image:"Image",file:"File",link:"Link",bold:"Bold",italic:"Italic",deleted:"Strikethrough",underline:"Underline","bold-abbr":"B","italic-abbr":"I","deleted-abbr":"S","underline-abbr":"U",lists:"Lists","link-insert":"Insert link","link-edit":"Edit link","link-in-new-tab":"Open link in new tab",unlink:"Unlink",cancel:"Cancel",close:"Close",insert:"Insert",save:"Save","delete":"Delete",text:"Text",edit:"Edit",title:"Title",paragraph:"Normal text",quote:"Quote",code:"Code",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",filename:"Name",optional:"optional",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",horizontalrule:"Line","upload-label":"Drop file here or ",caption:"Caption",bulletslist:"Bullets",numberslist:"Numbers","image-position":"Position",none:"None",left:"Left",right:"Right",center:"Center","accessibility-help-label":"Rich text editor"}},type:"textarea",inline:!1,inlineTags:["a","span","strong","strike","b","u","em","i","code","del","ins","samp","kbd","sup","sub","mark","var","cite","small"],blockTags:["pre","ul","ol","li","p","h1","h2","h3","h4","h5","h6","dl","dt","dd","div","td","blockquote","output","figcaption","figure","address","section","header","footer","aside","article","iframe"],paragraphize:!0,paragraphizeBlocks:["table","div","pre","form","ul","ol","h1","h2","h3","h4","h5","h6","dl","blockquote","figcaption","address","section","header","footer","aside","article","object","style","script","iframe","select","input","textarea","button","option","map","area","math","hr","fieldset","legend","hgroup","nav","figure","details","menu","summary","p"],emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",emptyHtmlRendered:e("").html("​").html(),imageTypes:["image/png","image/jpeg","image/gif"],userAgent:navigator.userAgent.toLowerCase(),observe:{dropdowns:[]},regexps:{linkyoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,linkvimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,linkvimeoChannel:/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/,linkimage:/((https?|www)[^\s]+\.)(jpe?g|png|gif)(\?[^\s-]+)?/gi,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/gi}},t.fn=e.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,UP:38,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,CTRL:17,META:91,SHIFT:16,ALT:18,RIGHT:39,LEFT:37,LEFT_WIN:91},init:function(t,n){return this.$element=e(t),this.uuid=i++,this.sBuffer=[],this.sRebuffer=[],this.loadOptions(n),this.loadModules(),this.opts.clickToEdit&&!this.$element.hasClass("redactor-click-to-edit")?this.loadToEdit(n):(this.$element.hasClass("redactor-click-to-edit")&&this.$element.removeClass("redactor-click-to-edit"),this.reIsBlock=new RegExp("^("+this.opts.blockTags.join("|").toUpperCase()+")$","i"),this.reIsInline=new RegExp("^("+this.opts.inlineTags.join("|").toUpperCase()+")$","i"),this.opts.dragImageUpload=null===this.opts.imageUpload?!1:this.opts.dragImageUpload,this.opts.dragFileUpload=null===this.opts.fileUpload?!1:this.opts.dragFileUpload,this.formatting={},this.lang.load(),e.extend(this.opts.shortcuts,this.opts.shortcutsAdd),this.$editor=this.$element,this.detectType(),this.core.callback("start"),this.core.callback("startToEdit"),this.start=!0,void this.build.start())},detectType:function(){this.build.isInline()||this.opts.inline?this.opts.type="inline":this.build.isTag("DIV")?this.opts.type="div":this.build.isTag("PRE")&&(this.opts.type="pre")},loadToEdit:function(t){this.$element.on("click.redactor-click-to-edit",e.proxy(function(){this.initToEdit(t)},this)),this.$element.addClass("redactor-click-to-edit")},initToEdit:function(t){e.extend(t.callbacks,{startToEdit:function(){this.insert.node(this.marker.get(),!1)},initToEdit:function(){this.selection.restore(),this.clickToCancelStorage=this.code.get(),e(this.opts.clickToCancel).off(".redactor-click-to-edit"),e(this.opts.clickToCancel).show().on("click.redactor-click-to-edit",e.proxy(function(i){i.preventDefault(),this.core.destroy(),this.events.syncFire=!1,this.$element.html(this.clickToCancelStorage),this.core.callback("cancel",this.clickToCancelStorage),this.events.syncFire=!0,this.clickToCancelStorage="",e(this.opts.clickToCancel).hide(),e(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",e.proxy(function(){this.initToEdit(t)},this)),this.$element.addClass("redactor-click-to-edit")},this)),e(this.opts.clickToSave).off(".redactor-click-to-edit"),e(this.opts.clickToSave).show().on("click.redactor-click-to-edit",e.proxy(function(i){i.preventDefault(),this.core.destroy(),this.core.callback("save",this.code.get()),e(this.opts.clickToCancel).hide(),e(this.opts.clickToSave).hide(),this.$element.on("click.redactor-click-to-edit",e.proxy(function(){this.initToEdit(t)},this)),this.$element.addClass("redactor-click-to-edit")},this))}}),this.$element.redactor(t),this.$element.off(".redactor-click-to-edit")},loadOptions:function(t){var i={};"undefined"!=typeof e.Redactor.settings.namespace?this.$element.hasClass(e.Redactor.settings.namespace)&&(i=e.Redactor.settings):i=e.Redactor.settings,this.opts=e.extend({},e.Redactor.opts,this.$element.data(),t),this.opts=e.extend({},this.opts,i)},getModuleMethods:function(e){return Object.getOwnPropertyNames(e).filter(function(t){return"function"==typeof e[t]})},loadModules:function(){for(var t=e.Redactor.modules.length,i=0;t>i;i++)this.bindModuleMethods(e.Redactor.modules[i])},bindModuleMethods:function(e){if("undefined"!=typeof this[e]){this[e]=this[e]();for(var t=this.getModuleMethods(this[e]),i=t.length,n=0;i>n;n++)this[e][t[n]]=this[e][t[n]].bind(this)}},air:function(){return{enabled:!1,collapsed:function(){this.opts.air&&this.selection.get().collapseToStart()},collapsedEnd:function(){this.opts.air&&this.selection.get().collapseToEnd()},build:function(){this.detect.isMobile()||(this.button.hideButtons(),this.button.hideButtonsOnMobile(),0!==this.opts.buttons.length&&(this.$air=this.air.createContainer(),this.opts.airWidth!==!1&&this.$air.css("width",this.opts.airWidth),this.air.append(),this.button.$toolbar=this.$air,this.button.setFormatting(),this.button.load(this.$air),this.core.editor().on("mouseup.redactor",this,e.proxy(function(e){""!==this.selection.text()&&this.air.show(e)},this))))},append:function(){this.$air.appendTo("body")},createContainer:function(){return e("<ul>").addClass("redactor-air").attr({id:"redactor-air-"+this.uuid,role:"toolbar"}).hide()},show:function(t){this.selection.saveInstant(),e(".redactor-air").hide();var i=0,n=this.$air.innerWidth();e(window).width()<t.clientX+n&&(i=200),this.$air.css({left:t.clientX-i+"px",top:t.clientY+10+e(document).scrollTop()+"px"}).show(),this.air.enabled=!0,this.air.bindHide()},bindHide:function(){e(document).on("mousedown.redactor-air."+this.uuid,e.proxy(function(t){var i=e(t.target).closest(".redactor-dropdown").length;if(0===e(t.target).closest(this.$air).length&&0===i){var n=this.air.hide(t);n!==!1&&this.marker.remove()}},this)).on("keydown.redactor-air."+this.uuid,e.proxy(function(t){var i=t.which;if((this.utils.isRedactorParent(t.target)||e(t.target).hasClass("redactor-in"))&&0===e(t.target).closest("#redactor-modal").length){if(i===this.keyCode.ESC)this.selection.get().collapseToStart();else if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){var n=this.selection.get(),r=this.selection.range(n);r.deleteContents()}else i===this.keyCode.ENTER&&this.selection.get().collapseToEnd();this.air.enabled?this.air.hide(t):this.selection.get().collapseToStart()}},this))},hide:function(t){var i=t.ctrlKey||t.metaKey||t.shiftKey&&t.altKey;return i?!1:(this.button.setInactiveAll(),this.$air.fadeOut(100),this.air.enabled=!1,e(document).off("mousedown.redactor-air."+this.uuid),void e(document).off("keydown.redactor-air."+this.uuid))}}},autosave:function(){return{enabled:!1,html:!1,init:function(){this.opts.autosave&&(this.autosave.enabled=!0,this.autosave.name=this.opts.autosaveName?this.opts.autosaveName:this.$textarea.attr("name"))},is:function(){return this.autosave.enabled},send:function(){if(this.opts.autosave&&(this.autosave.source=this.code.get(),this.autosave.html!==this.autosave.source)){var t={};t.name=this.autosave.name,t[this.autosave.name]=this.autosave.source,t=this.autosave.getHiddenFields(t);var i=e.ajax({url:this.opts.autosave,type:"post",data:t});i.done(this.autosave.success)}},getHiddenFields:function(t){return this.opts.autosaveFields===!1||"object"!=typeof this.opts.autosaveFields?t:(e.each(this.opts.autosaveFields,e.proxy(function(i,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),t[i]=n},this)),t)},success:function(e){var t;try{t=JSON.parse(e)}catch(i){t=e}var n="undefined"==typeof t.error?"autosave":"autosaveError";this.core.callback(n,this.autosave.name,t),this.autosave.html=this.autosave.source},disable:function(){this.autosave.enabled=!1,clearInterval(this.autosaveTimeout)}}},block:function(){return{format:function(t,i,n,r){return t="quote"===t?"blockquote":t,this.block.tags=["p","blockquote","pre","h1","h2","h3","h4","h5","h6","div","figure"],-1!==e.inArray(t,this.block.tags)?("p"===t&&"undefined"==typeof i&&(i="class"),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.block.formatCollapsed(t,i,n,r):this.block.formatUncollapsed(t,i,n,r)):void 0},formatCollapsed:function(t,i,n,r){this.selection.save();var o=this.selection.block(),s=o.tagName.toLowerCase();if(-1===e.inArray(s,this.block.tags))return void this.selection.restore();var a=!1;s===t&&void 0===i&&(t="p",a=!0),a&&(this.block.removeAllClass(),this.block.removeAllAttr());var l;if("blockquote"===s&&this.utils.isEndOfElement(o)){this.marker.remove(),l=document.createElement("p"),l.innerHTML=this.opts.invisibleSpace,e(o).after(l),this.caret.start(l);var c=e(o).children().last();0!==c.length&&"BR"===c[0].tagName&&c.remove()}else l=this.utils.replaceToTag(o,t);if("object"==typeof i){r=n;for(var d in i)l=this.block.setAttr(l,d,i[d],r)}else l=this.block.setAttr(l,i,n,r);return"pre"===t&&1===l.length&&e(l).html(e.trim(e(l).html())),this.selection.restore(),this.block.removeInlineTags(l),l},formatUncollapsed:function(t,i,n,r){this.selection.save();var o=[],s=this.selection.blocks();s[0]&&(e(s[0]).hasClass("redactor-in")||e(s[0]).hasClass("redactor-box"))&&(s=this.core.editor().find(this.opts.blockTags.join(", ")));for(var a=s.length,l=0;a>l;l++){var c=s[l].tagName.toLowerCase();if(-1!==e.inArray(c,this.block.tags)&&"figure"!==c){var d=this.utils.replaceToTag(s[l],t);if("object"==typeof i){r=n;for(var u in i)d=this.block.setAttr(d,u,i[u],r)}else d=this.block.setAttr(d,i,n,r);o.push(d),this.block.removeInlineTags(d)}}if(this.selection.restore(),"pre"===t&&0!==o.length){var h=o[0];e.each(o,function(t,i){0!==t&&(e(h).append("\n"+e.trim(i.html())),e(i).remove())}),o=[],o.push(h)}return o},removeInlineTags:function(t){t=t[0]||t;var i=this.opts.inlineTags,n=["PRE","H1","H2","H3","H4","H5","H6"];if(-1!==e.inArray(t.tagName,n)){if("PRE"!==t.tagName){var r=i.indexOf("a");i.splice(r,1)}e(t).find(i.join(",")).not(".redactor-selection-marker").contents().unwrap()}},setAttr:function(e,t,i,n){if("undefined"==typeof t)return e;var r="undefined"==typeof n?"replace":n;return e="class"===t?this.block[r+"Class"](i,e):"remove"===r?this.block[r+"Attr"](t,e):"removeAll"===r?this.block[r+"Attr"](t,e):this.block[r+"Attr"](t,i,e);
},getBlocks:function(t){if(t="undefined"==typeof t?this.selection.blocks():t,e(t).hasClass("redactor-box")){var i=[],n=this.core.editor().children();return e.each(n,e.proxy(function(e,t){this.utils.isBlock(t)&&i.push(t)},this)),i}return t},replaceClass:function(t,i){return e(this.block.getBlocks(i)).removeAttr("class").addClass(t)[0]},toggleClass:function(t,i){return e(this.block.getBlocks(i)).toggleClass(t)[0]},addClass:function(t,i){return e(this.block.getBlocks(i)).addClass(t)[0]},removeClass:function(t,i){return e(this.block.getBlocks(i)).removeClass(t)[0]},removeAllClass:function(t){return e(this.block.getBlocks(t)).removeAttr("class")[0]},replaceAttr:function(t,i,n){return n=this.block.removeAttr(t,n),e(n).attr(t,i)[0]},toggleAttr:function(t,i,n){n=this.block.getBlocks(n);var r=this,o=[];return e.each(n,function(n,s){var a=e(s);a.attr(t)?o.push(r.block.removeAttr(t,s)):o.push(r.block.addAttr(t,i,s))}),o},addAttr:function(t,i,n){return e(this.block.getBlocks(n)).attr(t,i)[0]},removeAttr:function(t,i){return e(this.block.getBlocks(i)).removeAttr(t)[0]},removeAllAttr:function(t){t=this.block.getBlocks(t);var i=[];return e.each(t,function(t,n){"undefined"==typeof n.attributes&&i.push(n);for(var r=e(n),o=n.attributes.length,s=0;o>s;s++)r.removeAttr(n.attributes[s].name);i.push(r[0])}),i}}},buffer:function(){return{set:function(e){"undefined"==typeof e&&this.buffer.clear(),"undefined"==typeof e||"undo"===e?this.buffer.setUndo():this.buffer.setRedo()},setUndo:function(){var e=this.selection.saveInstant(),t=this.sBuffer[this.sBuffer.length-1],i=this.core.editor().html(),n="undefined"!=typeof t&&t[0]===i?!1:!0;n&&this.sBuffer.push([i,e])},setRedo:function(){var e=this.selection.saveInstant();this.sRebuffer.push([this.core.editor().html(),e])},add:function(){this.sBuffer.push([this.core.editor().html(),0])},undo:function(){if(0!==this.sBuffer.length){var e=this.sBuffer.pop();this.buffer.set("redo"),this.core.editor().html(e[0]),this.selection.restoreInstant(e[1]),this.observe.load()}},redo:function(){if(0!==this.sRebuffer.length){var e=this.sRebuffer.pop();this.buffer.set("undo"),this.core.editor().html(e[0]),this.selection.restoreInstant(e[1]),this.observe.load()}},clear:function(){this.sRebuffer=[]}}},build:function(){return{start:function(){if("inline"===this.opts.type)this.opts.type="inline";else if("div"===this.opts.type){var t=e.trim(this.$editor.html());""===t&&this.$editor.html(this.opts.emptyHtml)}else"textarea"===this.opts.type&&this.build.startTextarea();this.build.setIn(),this.build.setId(),this.build.enableEditor(),this.build.setOptions(),this.build.callEditor()},createContainerBox:function(){this.$box=e('<div class="redactor-box" role="application" />')},setIn:function(){this.core.editor().addClass("redactor-in")},setId:function(){var e="textarea"===this.opts.type?"redactor-uuid-"+this.uuid:this.$element.attr("id");this.core.editor().attr("id","undefined"==typeof e?"redactor-uuid-"+this.uuid:e)},getName:function(){var e=this.$element.attr("name");return"undefined"==typeof e?"content-"+this.uuid:e},loadFromTextarea:function(){this.$editor=e("<div />"),this.$textarea=this.$element,this.$element.attr("name",this.build.getName()),this.$box.insertAfter(this.$element).append(this.$editor).append(this.$element),this.$editor.addClass("redactor-layer"),this.opts.overrideStyles&&this.$editor.addClass("redactor-styles"),this.$element.hide(),this.$box.prepend('<span class="redactor-voice-label" id="redactor-voice-'+this.uuid+'" aria-hidden="false">'+this.lang.get("accessibility-help-label")+"</span>"),this.$editor.attr({"aria-labelledby":"redactor-voice-"+this.uuid,role:"presentation"})},startTextarea:function(){this.build.createContainerBox(),this.build.loadFromTextarea(),this.code.start(this.core.textarea().val()),this.core.textarea().val(this.clean.onSync(this.$editor.html()))},isTag:function(e){return this.$element[0].tagName===e},isInline:function(){return!this.build.isTag("TEXTAREA")&&!this.build.isTag("DIV")&&!this.build.isTag("PRE")},enableEditor:function(){this.core.editor().attr({contenteditable:!0})},setOptions:function(){"inline"===this.opts.type&&(this.opts.enterKey=!1),("inline"===this.opts.type||"pre"===this.opts.type)&&(this.opts.toolbarMobile=!1,this.opts.toolbar=!1,this.opts.air=!1,this.opts.linkify=!1),this.core.editor().attr("spellcheck",this.opts.spellcheck),this.opts.structure&&this.core.editor().addClass("redactor-structure"),"textarea"===this.opts.type&&(this.core.box().attr("dir",this.opts.direction),this.core.editor().attr("dir",this.opts.direction),this.opts.tabindex&&this.core.editor().attr("tabindex",this.opts.tabindex),this.opts.minHeight?this.core.editor().css("min-height",this.opts.minHeight):this.core.editor().css("min-height","40px"),this.opts.maxHeight&&this.core.editor().css("max-height",this.opts.maxHeight),this.opts.maxWidth&&this.core.editor().css({"max-width":this.opts.maxWidth,margin:"auto"}))},callEditor:function(){this.build.disableBrowsersEditing(),this.events.init(),this.build.setHelpers(),(this.opts.toolbar||this.opts.air)&&(this.toolbarsButtons=this.button.init()),this.opts.air?this.air.build():this.opts.toolbar&&this.toolbar.build(),this.detect.isMobile()&&this.opts.toolbarMobile&&this.opts.air&&(this.opts.toolbar=!0,this.toolbar.build()),(this.opts.air||this.opts.toolbar)&&(this.core.editor().on("mouseup.redactor-observe."+this.uuid+" keyup.redactor-observe."+this.uuid+" focus.redactor-observe."+this.uuid+" touchstart.redactor-observe."+this.uuid,e.proxy(this.observe.toolbar,this)),this.core.element().on("blur.callback.redactor",e.proxy(function(){this.button.setInactiveAll()},this))),this.modal.templates(),this.build.plugins(),this.autosave.init(),this.code.html=this.code.cleaned(this.core.editor().html()),this.core.callback("init"),this.core.callback("initToEdit"),this.storage.observe(),this.start=!1},setHelpers:function(){this.opts.linkify&&this.linkify.format(),this.placeholder.init(),this.opts.focus?setTimeout(this.focus.start,100):this.opts.focusEnd&&setTimeout(this.focus.end,100)},disableBrowsersEditing:function(){try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1),document.execCommand("AutoUrlDetect",!1,!1)}catch(e){}},plugins:function(){this.opts.plugins&&e.each(this.opts.plugins,e.proxy(function(i,n){var r="undefined"!=typeof RedactorPlugins&&"undefined"!=typeof RedactorPlugins[n]?RedactorPlugins:t.fn;if(e.isFunction(r[n])){this[n]=r[n]();for(var o=this.getModuleMethods(this[n]),s=o.length,a=0;s>a;a++)this[n][o[a]]=this[n][o[a]].bind(this);if("undefined"!=typeof this[n].langs){var l={};"undefined"!=typeof this[n].langs[this.opts.lang]?l=this[n].langs[this.opts.lang]:"undefined"==typeof this[n].langs[this.opts.lang]&&"undefined"!=typeof this[n].langs.en&&(l=this[n].langs.en);var c=this;e.each(l,function(e,t){"undefined"==typeof c.opts.curLang[e]&&(c.opts.curLang[e]=t)})}e.isFunction(this[n].init)&&this[n].init()}},this))}}},button:function(){return{toolbar:function(){return"undefined"!=typeof this.button.$toolbar&&this.button.$toolbar?this.button.$toolbar:this.$toolbar},init:function(){return{format:{title:this.lang.get("format"),icon:!0,dropdown:{p:{title:this.lang.get("paragraph"),func:"block.format"},blockquote:{title:this.lang.get("quote"),func:"block.format"},pre:{title:this.lang.get("code"),func:"block.format"},h1:{title:this.lang.get("heading1"),func:"block.format"},h2:{title:this.lang.get("heading2"),func:"block.format"},h3:{title:this.lang.get("heading3"),func:"block.format"},h4:{title:this.lang.get("heading4"),func:"block.format"},h5:{title:this.lang.get("heading5"),func:"block.format"},h6:{title:this.lang.get("heading6"),func:"block.format"}}},bold:{title:this.lang.get("bold-abbr"),icon:!0,label:this.lang.get("bold"),func:"inline.format"},italic:{title:this.lang.get("italic-abbr"),icon:!0,label:this.lang.get("italic"),func:"inline.format"},deleted:{title:this.lang.get("deleted-abbr"),icon:!0,label:this.lang.get("deleted"),func:"inline.format"},underline:{title:this.lang.get("underline-abbr"),icon:!0,label:this.lang.get("underline"),func:"inline.format"},lists:{title:this.lang.get("lists"),icon:!0,dropdown:{unorderedlist:{title:"&bull; "+this.lang.get("unorderedlist"),func:"list.toggle"},orderedlist:{title:"1. "+this.lang.get("orderedlist"),func:"list.toggle"},outdent:{title:"< "+this.lang.get("outdent"),func:"indent.decrease",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}},indent:{title:"> "+this.lang.get("indent"),func:"indent.increase",observe:{element:"li",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},ul:{title:"&bull; "+this.lang.get("bulletslist"),icon:!0,func:"list.toggle"},ol:{title:"1. "+this.lang.get("numberslist"),icon:!0,func:"list.toggle"},outdent:{title:this.lang.get("outdent"),icon:!0,func:"indent.decrease"},indent:{title:this.lang.get("indent"),icon:!0,func:"indent.increase"},image:{title:this.lang.get("image"),icon:!0,func:"image.show"},file:{title:this.lang.get("file"),icon:!0,func:"file.show"},link:{title:this.lang.get("link"),icon:!0,dropdown:{link:{title:this.lang.get("link-insert"),func:"link.show",observe:{element:"a","in":{title:this.lang.get("link-edit")},out:{title:this.lang.get("link-insert")}}},unlink:{title:this.lang.get("unlink"),func:"link.unlink",observe:{element:"a",out:{attr:{"class":"redactor-dropdown-link-inactive","aria-disabled":!0}}}}}},horizontalrule:{title:this.lang.get("horizontalrule"),icon:!0,func:"line.insert"}}},setFormatting:function(){e.each(this.toolbarsButtons.format.dropdown,e.proxy(function(t,i){-1===e.inArray(t,this.opts.formatting)&&delete this.toolbarsButtons.format.dropdown[t]},this))},hideButtons:function(){0!==this.opts.buttonsHide.length&&this.button.hideButtonsSlicer(this.opts.buttonsHide)},hideButtonsOnMobile:function(){this.detect.isMobile()&&0!==this.opts.buttonsHideOnMobile.length&&this.button.hideButtonsSlicer(this.opts.buttonsHideOnMobile)},hideButtonsSlicer:function(t){e.each(t,e.proxy(function(e,t){var i=this.opts.buttons.indexOf(t);-1!==i&&this.opts.buttons.splice(i,1)},this))},load:function(t){this.button.buttons=[],e.each(this.opts.buttons,e.proxy(function(i,n){!this.toolbarsButtons[n]||"file"===n&&!this.file.is()||"image"===n&&!this.image.is()||t.append(e("<li>").append(this.button.build(n,this.toolbarsButtons[n])))},this))},buildButtonTooltip:function(t,i){if(!this.opts.air&&!this.detect.isMobile()){var n=e("<span>");n.addClass("re-button-tooltip"),n.html(i),t.append(n),t.on("mouseover",function(){e(this).hasClass("redactor-button-disabled")||(n.show(),n.css("margin-left",-(n.innerWidth()/2)))}).on("mouseout",function(){n.hide()})}},build:function(t,i){if(this.opts.toolbar!==!1){var n="undefined"!=typeof i.label?i.label:i.title,r=e('<a href="javascript:void(null);" alt="'+n+'" rel="'+t+'" />');if(r.addClass("re-button re-"+t),r.attr({role:"button","aria-label":n,tabindex:"-1"}),"undefined"==typeof i.icon||this.opts.buttonsTextLabeled)r.html(i.title);else{var o=e("<i>");o.addClass("re-icon-"+t),r.append(o),r.addClass("re-button-icon"),this.button.buildButtonTooltip(r,n)}if((i.func||i.command||i.dropdown)&&this.button.setEvent(r,t,i),i.dropdown){r.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var s=e('<ul class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+t+'" style="display: none;">');r.data("dropdown",s),this.dropdown.build(t,s,i.dropdown)}return this.button.buttons.push(r),r}},getButtons:function(){return this.button.toolbar().find("a.re-button")},getButtonsKeys:function(){return this.button.buttons},setEvent:function(t,i,n){t.on("mousedown",e.proxy(function(e){if(e.preventDefault(),t.hasClass("redactor-button-disabled"))return!1;var r="func",o=n.func;return n.command?(r="command",o=n.command):n.dropdown&&(r="dropdown",o=!1),this.button.toggle(e,i,r,o),!1},this))},toggle:function(e,t,i,n,r){(this.detect.isIe()||!this.detect.isDesktop())&&(this.utils.freezeScroll(),e.returnValue=!1),"command"===i?this.inline.format(n):"dropdown"===i?this.dropdown.show(e,t):this.button.clickCallback(e,n,t,r),"dropdown"!==i&&this.dropdown.hideAll(!1),this.opts.air&&"dropdown"!==i&&this.air.hide(e),(this.detect.isIe()||!this.detect.isDesktop())&&this.utils.unfreezeScroll()},clickCallback:function(t,i,n,r){var o;if(r="undefined"==typeof r?n:r,e.isFunction(i))i.call(this,n);else if("-1"!==i.search(/\./)){if(o=i.split("."),"undefined"==typeof this[o[0]])return;"object"==typeof r?this[o[0]][o[1]].apply(this,r):this[o[0]][o[1]].call(this,r)}else"object"==typeof r?this[i].apply(this,r):this[i].call(this,r);this.observe.buttons(t,n)},all:function(){return this.button.buttons},get:function(e){return this.opts.toolbar!==!1?this.button.toolbar().find("a.re-"+e):void 0},set:function(e,t){if(this.opts.toolbar!==!1){var i=this.button.toolbar().find("a.re-"+e);return i.html(t).attr("aria-label",t),i}},add:function(t,i){if(this.button.isAdded(t)!==!0)return e();var n=this.button.build(t,{title:i});return this.button.toolbar().append(e("<li>").append(n)),n},addFirst:function(t,i){if(this.button.isAdded(t)!==!0)return e();var n=this.button.build(t,{title:i});return this.button.toolbar().prepend(e("<li>").append(n)),n},addAfter:function(t,i,n){if(this.button.isAdded(i)!==!0)return e();var r=this.button.build(i,{title:n}),o=this.button.get(t);return 0!==o.length?o.parent().after(e("<li>").append(r)):this.button.toolbar().append(e("<li>").append(r)),r},addBefore:function(t,i,n){if(this.button.isAdded(i)!==!0)return e();var r=this.button.build(i,{title:n}),o=this.button.get(t);return 0!==o.length?o.parent().before(e("<li>").append(r)):this.button.toolbar().append(e("<li>").append(r)),r},isAdded:function(e){var t=this.opts.buttonsHideOnMobile.indexOf(e);return this.opts.toolbar===!1||-1!==t&&this.detect.isMobile()?!1:!0},setIcon:function(e,t){this.opts.buttonsTextLabeled||(e.html(t).addClass("re-button-icon"),this.button.buildButtonTooltip(e,e.attr("alt")))},changeIcon:function(e,t){var i=this.button.get(e);0!==i.length&&i.find("i").removeAttr("class").addClass("re-icon-"+t)},addCallback:function(t,i){if("undefined"!=typeof t&&this.opts.toolbar!==!1){var n="dropdown"===i?"dropdown":"func",r=t.attr("rel");t.on("mousedown",e.proxy(function(e){return t.hasClass("redactor-button-disabled")?!1:void this.button.toggle(e,r,n,i)},this))}},addDropdown:function(t,i){if(this.opts.toolbar!==!1){t.addClass("redactor-toolbar-link-dropdown").attr("aria-haspopup",!0);var n=t.attr("rel");this.button.addCallback(t,"dropdown");var r=e('<div class="redactor-dropdown redactor-dropdown-'+this.uuid+" redactor-dropdown-box-"+n+'" style="display: none;">');return t.data("dropdown",r),i&&this.dropdown.build(n,r,i),r}},setActive:function(e){this.button.get(e).addClass("redactor-act")},setInactive:function(e){this.button.get(e).removeClass("redactor-act")},setInactiveAll:function(e){var t=this.button.toolbar().find("a.re-button");"undefined"!=typeof e&&(t=t.not(".re-"+e)),t.removeClass("redactor-act")},disable:function(e){this.button.get(e).addClass("redactor-button-disabled")},enable:function(e){this.button.get(e).removeClass("redactor-button-disabled")},disableAll:function(e){var t=this.button.toolbar().find("a.re-button");"undefined"!=typeof e&&(t=t.not(".re-"+e)),t.addClass("redactor-button-disabled")},enableAll:function(){this.button.toolbar().find("a.re-button").removeClass("redactor-button-disabled")},remove:function(e){this.button.get(e).remove()}}},caret:function(){return{set:function(e,t,i){var n=this.core.editor().scrollTop();this.core.editor().focus(),this.core.editor().scrollTop(n),i="undefined"==typeof i?0:1,e=e[0]||e,t=t[0]||t;var r=this.selection.get(),o=this.selection.range(r);try{o.setStart(e,0),o.setEnd(t,i)}catch(s){}this.selection.update(r,o)},prepare:function(e){return this.detect.isFirefox()&&"undefined"!=typeof this.start&&this.core.editor().focus(),e[0]||e},start:function(t){var i,n;if(t=this.caret.prepare(t)){if("BR"===t.tagName)return this.caret.before(t);var r=e(t).children().first(),o=this.utils.isInlineTag(t.tagName);""===t.innerHTML||o?this.caret.setStartEmptyOrInline(t,o):r&&0!==r.length&&this.utils.isInlineTag(r[0].tagName)&&""===r.text()?this.caret.setStartEmptyOrInline(r[0],!0):(i=window.getSelection(),i.removeAllRanges(),n=document.createRange(),n.selectNodeContents(t),n.collapse(!0),i.addRange(n))}},setStartEmptyOrInline:function(t,i){var n=window.getSelection(),r=document.createRange(),o=document.createTextNode("​");r.setStart(t,0),r.insertNode(o),r.setStartAfter(o),r.collapse(!0),n.removeAllRanges(),n.addRange(r),i||this.core.editor().on("keydown.redactor-remove-textnode",function(){e(o).remove(),e(this).off("keydown.redactor-remove-textnode")})},end:function(t){var i,n;if(t=this.caret.prepare(t)){if("BR"!==t.tagName&&""===t.innerHTML)return this.caret.start(t);if("BR"===t.tagName){var r=document.createElement("span");return r.className="redactor-invisible-space",r.innerHTML="&#x200b;",e(t).after(r),i=window.getSelection(),i.removeAllRanges(),n=document.createRange(),n.setStartBefore(r),n.setEndBefore(r),i.addRange(n),void e(r).replaceWith(function(){return e(this).contents()})}if(t.lastChild&&1===t.lastChild.nodeType)return this.caret.after(t.lastChild);var i=window.getSelection();if(i.getRangeAt||i.rangeCount)try{var n=i.getRangeAt(0);n.selectNodeContents(t),n.collapse(!1),i.removeAllRanges(),i.addRange(n)}catch(o){}}},after:function(t){var i,n;if(t=this.caret.prepare(t)){if("BR"===t.tagName)return this.caret.end(t);if(this.utils.isBlockTag(t.tagName)){var r=this.caret.next(t);return void("undefined"==typeof r?this.caret.end(t):("TABLE"===r.tagName?r=e(r).find("th, td").first()[0]:("UL"===r.tagName||"OL"===r.tagName)&&(r=e(r).find("li").first()[0]),this.caret.start(r)))}var o=document.createTextNode("​");i=window.getSelection(),i.removeAllRanges(),n=document.createRange(),n.setStartAfter(t),n.insertNode(o),n.setStartAfter(o),n.collapse(!0),i.addRange(n)}},before:function(t){var i,n;if(t=this.caret.prepare(t)){if(this.utils.isBlockTag(t.tagName)){var r=this.caret.prev(t);return void("undefined"==typeof r?this.caret.start(t):("TABLE"===r.tagName?r=e(r).find("th, td").last()[0]:("UL"===r.tagName||"OL"===r.tagName)&&(r=e(r).find("li").last()[0]),this.caret.end(r)))}i=window.getSelection(),i.removeAllRanges(),n=document.createRange(),n.setStartBefore(t),n.collapse(!0),i.addRange(n)}},next:function(t){var i=e(t).next();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.next()[0]:i[0]},prev:function(t){var i=e(t).prev();return i.hasClass("redactor-script-tag, redactor-selection-marker")?i.prev()[0]:i[0]},offset:function(e){return this.offset.get(e)}}},clean:function(){return{onSet:function(t){t=this.clean.savePreCode(t),t=this.clean.saveFormTags(t),this.opts.script&&(t=t.replace(/<script(.*?[^>]?)>([\w\W]*?)<\/script>/gi,'<pre class="redactor-script-tag" $1>$2</pre>')),t=t.replace(/\$/g,"&#36;"),t=t.replace(/&amp;/g,"&"),t=t.replace(/<a href="(.*?[^>]?)®(.*?[^>]?)">/gi,'<a href="$1&reg$2">'),t=t.replace(/<span id="selection-marker-1"(.*?[^>]?)>​<\/span>/gi,"###marker1###"),t=t.replace(/<span id="selection-marker-2"(.*?[^>]?)>​<\/span>/gi,"###marker2###");var i=this,n=e("<div/>").html(e.parseHTML(t,document,!0)),r=this.opts.replaceTags;if(r){var o=Object.keys(this.opts.replaceTags);n.find(o.join(",")).each(function(e,t){i.utils.replaceToTag(t,r[t.tagName.toLowerCase()])})}n.find("span, a").attr("data-redactor-span",!0),n.find(this.opts.inlineTags.join(",")).each(function(){var t=e(this);t.attr("style")&&t.attr("data-redactor-style-cache",t.attr("style"))}),t=n.html();var s=["font","html","head","link","body","meta","applet"];return this.opts.script||s.push("script"),t=this.clean.stripTags(t,s),this.opts.removeComments&&(t=t.replace(/<!--[\s\S]*?-->/gi,"")),t=this.paragraphize.load(t),t=t.replace("###marker1###",'<span id="selection-marker-1" class="redactor-selection-marker">​</span>'),t=t.replace("###marker2###",'<span id="selection-marker-2" class="redactor-selection-marker">​</span>'),-1!==t.search(/^(||\s||<br\s?\/?>||&nbsp;)$/i)?this.opts.emptyHtml:t},onGet:function(e){return this.clean.onSync(e)},onSync:function(t){if(t=t.replace(/\u200B/g,""),t=t.replace(/&#x200b;/gi,""),-1!==t.search(/^<p>(||\s||<br\s?\/?>||&nbsp;)<\/p>$/i))return"";t=t.replace(/<span(.*?)id="redactor-image-box"(.*?[^>])>([\w\W]*?)<img(.*?)><\/span>/gi,"$3<img$4>"),t=t.replace(/<span(.*?)id="redactor-image-resizer"(.*?[^>])>(.*?)<\/span>/gi,""),t=t.replace(/<span(.*?)id="redactor-image-editter"(.*?[^>])>(.*?)<\/span>/gi,""),t=t.replace(/<img(.*?)style="(.*?)opacity: 0\.5;(.*?)"(.*?)>/gi,'<img$1style="$2$3"$4>');var i=e("<div/>").html(e.parseHTML(t,document,!0));i.find('*[style=""]').removeAttr("style"),i.find('*[class=""]').removeAttr("class"),i.find('*[rel=""]').removeAttr("rel"),i.find('*[data-image=""]').removeAttr("data-image"),i.find('*[alt=""]').removeAttr("alt"),i.find('*[title=""]').removeAttr("title"),i.find("*[data-redactor-style-cache]").removeAttr("data-redactor-style-cache"),i.find(".redactor-invisible-space, .redactor-unlink").each(function(){e(this).contents().unwrap()}),i.find("span, a").removeAttr("data-redactor-span data-redactor-style-cache").each(function(){0===this.attributes.length&&e(this).contents().unwrap()}),i.find("img").removeAttr("rel"),i.find(".redactor-selection-marker, #redactor-insert-marker").remove(),t=i.html(),this.opts.script&&(t=t.replace(/<pre class="redactor-script-tag"(.*?[^>]?)>([\w\W]*?)<\/pre>/gi,"<script$1>$2</script>")),t=this.clean.restoreFormTags(t),t=t.replace(new RegExp("<br\\s?/?></h","gi"),"</h"),t=t.replace(new RegExp("<br\\s?/?></li>","gi"),"</li>"),t=t.replace(new RegExp("</li><br\\s?/?>","gi"),"</li>"),t=t.replace(/<pre>/gi,"<pre>\n"),this.opts.preClass&&(t=t.replace(/<pre>/gi,'<pre class="'+this.opts.preClass+'">')),this.opts.linkNofollow&&(t=t.replace(/<a(.*?)rel="nofollow"(.*?[^>])>/gi,"<a$1$2>"),t=t.replace(/<a(.*?[^>])>/gi,'<a$1 rel="nofollow">'));var n={"™":"&trade;","©":"&copy;","…":"&hellip;","—":"&mdash;","‐":"&dash;"};return e.each(n,function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t=t.replace(/&amp;/g,"&"),t=t.replace(/\r?\n{4,}/g,"\n\n\n"),this.opts.removeNewlines&&(t=t.replace(/\r?\n/g,"")),t},onPaste:function(t,i,n){if(n!==!0){t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=t.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: bold|font-weight: bold; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),t=t.replace(/<span[^>]*(font-style: italic; font-weight: 700|font-weight: 700; font-style: italic)[^>]*>([\w\W]*?)<\/span>/gi,"<b><i>$2</i></b>"),t=t.replace(/<span[^>]*font-style: italic[^>]*>([\w\W]*?)<\/span>/gi,"<i>$1</i>"),t=t.replace(/<span[^>]*font-weight: bold[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),t=t.replace(/<span[^>]*font-weight: 700[^>]*>([\w\W]*?)<\/span>/gi,"<b>$1</b>"),t=t.replace(/<o:p[^>]*>/gi,""),t=t.replace(/<\/o:p>/gi,"");var r=this.clean.isHtmlMsWord(t);r&&(t=this.clean.cleanMsWord(t))}return t=e.trim(t),i.pre?this.opts.preSpaces&&(t=t.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))):(t=this.clean.replaceBrToNl(t),t=this.clean.removeTagsInsidePre(t)),n!==!0&&(t=this.clean.removeEmptyInlineTags(t),i.encode===!1&&(t=t.replace(/&/g,"&amp;"),t=this.clean.convertTags(t,i),t=this.clean.getPlainText(t),t=this.clean.reconvertTags(t,i))),i.text&&(t=this.clean.replaceNbspToSpaces(t),t=this.clean.getPlainText(t)),i.lists&&(t=t.replace("\n","<br>")),i.encode&&(t=this.clean.encodeHtml(t)),i.paragraphize&&(t=t.replace(/ \n/g," "),t=t.replace(/\n /g," "),t=this.paragraphize.load(t),t=t.replace(/<p><\/p>/g,"")),t=t.replace(/<li><p>/g,"<li>"),t=t.replace(/<\/p><\/li>/g,"</li>")},getCurrentType:function(e,t){var i=this.selection.blocks(),n={text:!1,encode:!1,paragraphize:!0,line:this.clean.isHtmlLine(e),blocks:this.clean.isHtmlBlocked(e),pre:!1,lists:!1,block:!0,inline:!0,links:!0,images:!0};return 1===i.length&&this.utils.isCurrentOrParent(["h1","h2","h3","h4","h5","h6","a","figcaption"])?(n.text=!0,n.paragraphize=!1,n.inline=!1,n.images=!1,n.links=!1,n.line=!0):"inline"===this.opts.type||this.opts.enterKey===!1?(n.paragraphize=!1,n.block=!1,n.line=!0):1===i.length&&this.utils.isCurrentOrParent(["li"])?(n.lists=!0,n.block=!1,n.paragraphize=!1,n.images=!1):1===i.length&&this.utils.isCurrentOrParent(["th","td","blockquote"])?(n.block=!1,n.paragraphize=!1):("pre"===this.opts.type||1===i.length&&this.utils.isCurrentOrParent("pre"))&&(n.inline=!1,n.block=!1,n.encode=!0,n.pre=!0,n.paragraphize=!1,n.images=!1,n.links=!1),n.line===!0&&(n.paragraphize=!1),t===!0&&(n.text=!1),n},isHtmlBlocked:function(e){var t=e.match(new RegExp("</("+this.opts.blockTags.join("|").toUpperCase()+")>","gi")),i=e.match(new RegExp("<hr(.*?[^>])>","gi"));return null===t&&null===i?!1:!0},isHtmlLine:function(e){if(this.clean.isHtmlBlocked(e))return!1;var t=e.match(/<br\s?\/?>/gi),i=e.match(/\n/gi);return t||i?!1:!0},isHtmlMsWord:function(e){return e.match(/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i)},removeEmptyInlineTags:function(t){var i=this.opts.inlineTags,n=e("<div/>").html(e.parseHTML(t,document,!0)),r=this,o=n.find("span"),s=n.find(i.join(","));return s.removeAttr("style"),s.each(function(){var t=e(this).html();0===this.attributes.length&&r.utils.isEmpty(t)&&e(this).replaceWith(function(){return e(this).contents()})}),o.each(function(){e(this).html();0===this.attributes.length&&e(this).replaceWith(function(){return e(this).contents()})}),t=n.html(),t=t.replace("<!--?php","<?php"),t=t.replace("<!--?","<?"),t=t.replace("?-->","?>"),n.remove(),t},cleanMsWord:function(t){t=t.replace(/<!--[\s\S]*?-->/g,""),t=t.replace(/<o:p>[\s\S]*?<\/o:p>/gi,""),t=t.replace(/\n/g," "),t=t.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n\n");var i=e("<div/>").html(t),n=!1,r=1,o=[];return i.find("p[style]").each(function(){var t=e(this).attr("style").match(/mso\-list\:l([0-9]+)\slevel([0-9]+)/);if(t){var s=parseInt(t[1]),a=parseInt(t[2]),l=e(this).html().match(/^[\w]+\./)?"ol":"ul",c=e("<li/>").html(e(this).html());if(c.html(c.html().replace(/^([\w\.]+)</,"<")),c.find("span:first").remove(),1==a&&-1==e.inArray(s,o)){var d=e("<"+l+"/>").attr({"data-level":a,"data-list":s}).html(c);e(this).replaceWith(d),n=s,o.push(s)}else{if(a>r){for(var u=i.find('[data-level="'+r+'"][data-list="'+n+'"]'),h=u,p=r;a>p;p++)d=e("<"+l+"/>"),d.appendTo(h.find("li").last()),h=d;h.attr({"data-level":a,"data-list":s}).html(c)}else{var u=i.find('[data-level="'+a+'"][data-list="'+s+'"]').last();u.append(c)}r=a,n=s,e(this).remove()}}}),i.find("[data-level][data-list]").removeAttr("data-level data-list"),t=i.html()},replaceNbspToSpaces:function(e){return e.replace("&nbsp;"," ")},replaceBrToNl:function(e){return e.replace(/<br\s?\/?>/gi,"\n")},replaceNlToBr:function(e){return e.replace(/\n/g,"<br />")},convertTags:function(t,i){var n=e("<div>").html(t);n.find("iframe").remove();var r=n.find("a");if(r.removeAttr("style"),this.opts.pasteLinkTarget!==!1&&r.attr("target",this.opts.pasteLinkTarget),i.links&&this.opts.pasteLinks&&n.find("a").each(function(e,t){if(t.href){for(var i,n='##%a href="'+t.href+'"',r=0,o=t.attributes.length;o>r;r++)i=t.attributes.item(r),"href"!==i.name&&(n+=" "+i.name+'="'+i.value+'"');t.outerHTML=n+"%##"+t.innerHTML+"##%/a%##"}}),t=n.html(),i.images&&this.opts.pasteImages&&(t=t.replace(/<img(.*?)src="(.*?)"(.*?[^>])>/gi,'##%img$1src="$2"$3%##')),this.opts.pastePlainText)return t;var o,s=i.lists?["ul","ol","li"]:this.opts.pasteBlockTags;o=i.block||i.lists?i.inline?s.concat(this.opts.pasteInlineTags):s:i.inline?this.opts.pasteInlineTags:[];for(var a=o.length,l=0;a>l;l++)t=t.replace(new RegExp("</"+o[l]+">","gi"),"###/"+o[l]+"###"),"td"===o[l]||"th"===o[l]?t=t.replace(new RegExp("<"+o[l]+'(.*?[^>])((colspan|rowspan)="(.*?[^>])")?(.*?[^>])>',"gi"),"###"+o[l]+" $2###"):this.utils.isInlineTag(o[l])?(t=t.replace(new RegExp("<"+o[l]+'([^>]*)class="([^>]*)"[^>]*>',"gi"),"###"+o[l]+' class="$2"###'),t=t.replace(new RegExp("<"+o[l]+'([^>]*)data-redactor-style-cache="([^>]*)"[^>]*>',"gi"),"###"+o[l]+' cache="$2"###'),t=t.replace(new RegExp("<"+o[l]+"[^>]*>","gi"),"###"+o[l]+"###")):t=t.replace(new RegExp("<"+o[l]+"[^>]*>","gi"),"###"+o[l]+"###");return t},reconvertTags:function(e,t){if((t.links&&this.opts.pasteLinks||t.images&&this.opts.pasteImages)&&(e=e.replace(new RegExp("##%","gi"),"<"),e=e.replace(new RegExp("%##","gi"),">")),this.opts.pastePlainText)return e;var i,n=t.lists?["ul","ol","li"]:this.opts.pasteBlockTags;i=t.block||t.lists?t.inline?n.concat(this.opts.pasteInlineTags):n:t.inline?this.opts.pasteInlineTags:[];for(var r=i.length,o=0;r>o;o++)e=e.replace(new RegExp("###/"+i[o]+"###","gi"),"</"+i[o]+">");for(var o=0;r>o;o++)e=e.replace(new RegExp("###"+i[o]+"###","gi"),"<"+i[o]+">");for(var o=0;r>o;o++)if("td"===i[o]||"th"===i[o])e=e.replace(new RegExp("###"+i[o]+"s?(.*?[^#])###","gi"),"<"+i[o]+"$1>");else if(this.utils.isInlineTag(i[o])){var s="span"===i[o]?' data-redactor-span="true"':"";e=e.replace(new RegExp("###"+i[o]+' cache="(.*?[^#])"###',"gi"),"<"+i[o]+' style="$1"'+s+' data-redactor-style-cache="$1">'),e=e.replace(new RegExp("###"+i[o]+"s?(.*?[^#])###","gi"),"<"+i[o]+"$1>")}return e},cleanPre:function(t){t="undefined"==typeof t?e(this.selection.block()).closest("pre",this.core.editor()[0]):t,e(t).find("br").replaceWith(function(){return document.createTextNode("\n")}),e(t).find("p").replaceWith(function(){return e(this).contents()})},removeTagsInsidePre:function(t){var i=e("<div />").append(t);return i.find("pre").replaceWith(function(){var t=e(this).html();return t=t.replace(/<br\s?\/?>|<\/p>|<\/div>|<\/li>|<\/td>/gi,"\n"),t=t.replace(/(<([^>]+)>)/gi,""),e("<pre />").append(t)}),t=i.html(),i.remove(),t},getPlainText:function(t){t=t.replace(/<!--[\s\S]*?-->/gi,""),t=t.replace(/<style[\s\S]*?style>/gi,""),t=t.replace(/<p><\/p>/g,""),t=t.replace(/<\/div>|<\/li>|<\/td>/gi,"\n"),t=t.replace(/<\/p>/gi,"\n\n"),t=t.replace(/<\/H[1-6]>/gi,"\n\n");var i=document.createElement("div");return i.innerHTML=t,t=i.textContent||i.innerText,e.trim(t)},savePreCode:function(e){return e=this.clean.savePreFormatting(e),e=this.clean.saveCodeFormatting(e),e=this.clean.restoreSelectionMarkers(e)},savePreFormatting:function(t){var i=t.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null===i?t:(e.each(i,e.proxy(function(e,i){var n,r,o,s=[],a=!1;i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>/i)?(s=i.match(/<pre(.*?)>(([\n\r\s]+)?)<code(.*?)>([\w\W]*?)<\/code>(([\n\r\s]+)?)<\/pre>/i),a=!0,n=s[5],r=s[1],o=s[4]):(s=i.match(/<pre(.*?)>([\w\W]*?)<\/pre>/i),n=s[2],r=s[1]),n=n.replace(/<br\s?\/?>/g,"\n"),n=n.replace(/&nbsp;/g," "),this.opts.preSpaces&&(n=n.replace(/\t/g,new Array(this.opts.preSpaces+1).join(" "))),n=n.replace(/\$/g,"&#36;"),t=a?t.replace(i,"<pre"+r+"><code"+o+">"+n+"</code></pre>"):t.replace(i,"<pre"+r+">"+n+"</pre>")},this)),t)},saveCodeFormatting:function(t){var i=t.match(/<code(.*?)>([\w\W]*?)<\/code>/gi);return null===i?t:(e.each(i,e.proxy(function(e,i){var n=i.match(/<code(.*?)>([\w\W]*?)<\/code>/i);n[2]=n[2].replace(/&nbsp;/g," "),n[2]=this.clean.encodeEntities(n[2]),n[2]=n[2].replace(/\$/g,"&#36;"),t=t.replace(i,"<code"+n[1]+">"+n[2]+"</code>")},this)),t)},restoreSelectionMarkers:function(e){return e=e.replace(/&lt;span id=&quot;selection-marker-([0-9])&quot; class=&quot;redactor-selection-marker&quot;&gt;​&lt;\/span&gt;/g,'<span id="selection-marker-$1" class="redactor-selection-marker">​</span>')},saveFormTags:function(e){return e.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>')},restoreFormTags:function(e){return e.replace(/<section(.*?) rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>")},encodeHtml:function(e){return e=e.replace(/”/g,'"'),e=e.replace(/“/g,'"'),e=e.replace(/‘/g,"'"),e=e.replace(/’/g,"'"),e=this.clean.encodeEntities(e)},encodeEntities:function(e){
return e=String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},stripTags:function(e,t){if("undefined"==typeof t)return e.replace(/(<([^>]+)>)/gi,"");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return e.replace(i,function(e,i){return-1===t.indexOf(i.toLowerCase())?e:""})},removeMarkers:function(e){return e.replace(/<span(.*?[^>]?)class="redactor-selection-marker"(.*?[^>]?)>([\w\W]*?)<\/span>/gi,"")},removeSpaces:function(t){return t=e.trim(t),t=t.replace(/\n/g,""),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g," "),t=t.replace(/[\s\n]*$/g," "),t=t.replace(/>\s{2,}</g,"> <"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\u200B/g,"")},removeSpacesHard:function(t){return t=e.trim(t),t=t.replace(/\n/g,""),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g,""),t=t.replace(/[\s\n]*$/g,""),t=t.replace(/>\s{2,}</g,"><"),t=t.replace(/\n\n/g,"\n"),t=t.replace(/\u200B/g,"")},normalizeCurrentHeading:function(){var e=this.selection.block();this.utils.isCurrentOrParentHeader()&&e&&e.normalize()}}},code:function(){return{syncFire:!0,html:!1,start:function(t){t=e.trim(t),t=t.replace(/^(<span id="selection-marker-1" class="redactor-selection-marker">​<\/span>)/,""),"textarea"===this.opts.type?t=this.clean.onSet(t):"div"===this.opts.type&&""===t&&(t=this.opts.emptyHtml),t=t.replace(/<p><span id="selection-marker-1" class="redactor-selection-marker">​<\/span><\/p>/,""),this.events.stopDetectChanges(),this.core.editor().html(t),this.observe.load(),this.events.startDetectChanges()},set:function(t,i){t=e.trim(t),i=i||{},i.start&&(this.start=i.start),"textarea"===this.opts.type?t=this.clean.onSet(t):"div"===this.opts.type&&""===t&&(t=this.opts.emptyHtml),this.core.editor().html(t),"textarea"===this.opts.type&&this.code.sync(),this.placeholder.enable()},get:function(){if("textarea"===this.opts.type)return this.core.textarea().val();var e=this.core.editor().html();return e=this.clean.onGet(e)},sync:function(){if(this.code.syncFire){var t=this.core.editor().html(),i=this.code.cleaned(t);if(!this.code.isSync(i))return this.code.html=i,"textarea"!==this.opts.type?(this.core.callback("sync",t),void this.core.callback("change",t)):void("textarea"===this.opts.type&&setTimeout(e.proxy(function(){this.code.startSync(t)},this),10))}},startSync:function(e){e=this.core.callback("syncBefore",e),e=this.clean.onSync(e),this.core.textarea().val(e),this.core.callback("sync",e),this.start===!1&&this.core.callback("change",e),this.start=!1},isSync:function(e){var t=this.code.html!==!1?this.code.html:!1;return t!==!1&&t===e},cleaned:function(e){return e=e.replace(/\u200B/g,""),this.clean.removeMarkers(e)}}},core:function(){return{id:function(){return this.$editor.attr("id")},element:function(){return this.$element},editor:function(){return"undefined"==typeof this.$editor?e():this.$editor},textarea:function(){return this.$textarea},box:function(){return"textarea"===this.opts.type?this.$box:this.$element},toolbar:function(){return this.$toolbar?this.$toolbar:!1},air:function(){return this.$air?this.$air:!1},object:function(){return e.extend({},this)},structure:function(){this.core.editor().toggleClass("redactor-structure")},addEvent:function(e){this.core.event=e},getEvent:function(){return this.core.event},callback:function(t,i,n){var r="redactor",o=!1,s=e._data(this.core.element()[0],"events");if("undefined"!=typeof s&&"undefined"!=typeof s[t])for(var a=s[t].length,l=0;a>l;l++){var c=s[t][l].namespace;if(c==="callback."+r){var d=s[t][l].handler,u="undefined"==typeof n?[i]:[i,n];o="undefined"==typeof u?d.call(this,i):d.call(this,i,u)}}if(o)return o;if("undefined"==typeof this.opts.callbacks[t])return"undefined"==typeof n?i:n;var h=this.opts.callbacks[t];return e.isFunction(h)?"undefined"==typeof n?h.call(this,i):h.call(this,i,n):"undefined"==typeof n?i:n},destroy:function(){this.opts.destroyed=!0,this.core.callback("destroy"),this.placeholder.destroy(),this.progress.destroy(),e("#redactor-voice-"+this.uuid).remove(),this.core.editor().removeClass("redactor-in redactor-styles redactor-structure redactor-layer-img-edit"),this.core.editor().off("keydown.redactor-remove-textnode"),this.core.editor().off(".redactor-observe."+this.uuid),this.$element.off(".redactor").removeData("redactor"),this.core.editor().off(".redactor"),e(document).off(".redactor-dropdown"),e(document).off(".redactor-air."+this.uuid),e(document).off("mousedown.redactor-blur."+this.uuid),e(document).off("mousedown.redactor."+this.uuid),e(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid),e(window).off(".redactor-toolbar."+this.uuid),e(window).off("touchmove.redactor."+this.uuid),e("body").off("scroll.redactor."+this.uuid),e(this.opts.toolbarFixedTarget).off("scroll.redactor."+this.uuid);var t=this;this.opts.plugins!==!1&&e.each(this.opts.plugins,function(i,n){e(window).off(".redactor-plugin-"+n),e(document).off(".redactor-plugin-"+n),e("body").off(".redactor-plugin-"+n),t.core.editor().off(".redactor-plugin-"+n)}),this.$element.off("click.redactor-click-to-edit"),this.$element.removeClass("redactor-click-to-edit"),this.core.editor().removeClass("redactor-layer"),this.core.editor().removeAttr("contenteditable");var i=this.code.get();this.opts.toolbar&&this.$toolbar&&this.$toolbar.find("a").each(function(){var t=e(this);t.data("dropdown")&&(t.data("dropdown").remove(),t.data("dropdown",{}))}),"textarea"===this.opts.type&&(this.$box.after(this.$element),this.$box.remove(),this.$element.val(i).show()),this.opts.air&&this.$air.remove(),this.opts.toolbar&&this.$toolbar&&this.$toolbar.remove(),this.$modalBox&&this.$modalBox.remove(),this.$modalOverlay&&this.$modalOverlay.remove(),e(".redactor-link-tooltip").remove(),clearInterval(this.autosaveTimeout)}}},detect:function(){return{isWebkit:function(){return/webkit/.test(this.opts.userAgent)},isFirefox:function(){return this.opts.userAgent.indexOf("firefox")>-1},isIe:function(e){if(document.documentMode||/Edge/.test(navigator.userAgent))return"edge";var t;return t=RegExp("msie"+(isNaN(e)?"":"\\s"+e),"i").test(navigator.userAgent),t||(t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),t},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},isDesktop:function(){return!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)},isIpad:function(){return/iPad/.test(navigator.userAgent)}}},dropdown:function(){return{active:!1,button:!1,key:!1,position:[],getDropdown:function(){return this.dropdown.active},build:function(t,i,n){n=this.dropdown.buildFormatting(t,n),e.each(n,e.proxy(function(e,n){var r=this.dropdown.buildItem(e,n);this.observe.addDropdown(r,e,n),i.attr("rel",t).append(r)},this))},buildFormatting:function(t,i){return"format"!==t||this.opts.formattingAdd===!1?i:(e.each(this.opts.formattingAdd,e.proxy(function(e,t){var n=this.utils.isBlockTag(t.args[0])?"block":"inline";i[e]={func:"block"===n?"block.format":"inline.format",args:t.args,title:t.title}},this)),i)},buildItem:function(t,i){var n=e("<li />");if("undefined"!=typeof i.classname&&n.addClass(i.classname),-1!==t.search(/^divider/i))return n.addClass("redactor-dropdown-divider"),n;var r=e('<a href="#" class="redactor-dropdown-'+t+'" role="button" />'),o=e("<span />").html(i.title);return r.append(o),r.on("mousedown",e.proxy(function(e){e.preventDefault(),this.dropdown.buildClick(e,t,i)},this)),n.append(r),n},buildClick:function(t,i,n){if(!e(t.target).hasClass("redactor-dropdown-link-inactive")){var r=this.dropdown.buildCommand(n);"undefined"!=typeof n.args?this.button.toggle(t,i,r.type,r.callback,n.args):this.button.toggle(t,i,r.type,r.callback)}},buildCommand:function(e){var t={};return t.type="func",t.callback=e.func,e.command?(t.type="command",t.callback=e.command):e.dropdown&&(t.type="dropdown",t.callback=e.dropdown),t},show:function(t,i){return this.detect.isDesktop()&&this.core.editor().focus(),this.dropdown.hideAll(!1,i),this.dropdown.key=i,this.dropdown.button=this.button.get(this.dropdown.key),this.dropdown.button.hasClass("dropact")?void this.dropdown.hide():(this.dropdown.active=this.dropdown.button.data("dropdown").appendTo(document.body),this.core.callback("dropdownShow",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button}),this.button.setActive(this.dropdown.key),this.dropdown.button.addClass("dropact"),this.dropdown.getButtonPosition(),this.button.toolbar().hasClass("toolbar-fixed-box")&&this.detect.isDesktop()?this.dropdown.showIsFixedToolbar():this.dropdown.showIsUnFixedToolbar(),this.detect.isDesktop()&&!this.detect.isFirefox()&&(this.dropdown.active.on("mouseover.redactor-dropdown",e.proxy(this.utils.disableBodyScroll,this)),this.dropdown.active.on("mouseout.redactor-dropdown mousedown.redactor-dropdown",e.proxy(this.utils.enableBodyScroll,this))),void t.stopPropagation())},showIsFixedToolbar:function(){var t=this.dropdown.button.position().top+this.dropdown.button.innerHeight()+this.opts.toolbarFixedTopOffset,i="fixed";this.opts.toolbarFixedTarget!==document&&(t=this.dropdown.button.innerHeight()+this.$toolbar.offset().top+this.opts.toolbarFixedTopOffset,i="absolute"),this.dropdown.active.css({position:i,left:this.dropdown.position.left+"px",top:t+"px"}).show(),this.dropdown.active.redactorAnimation("slideDown",{duration:.2},e.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},showIsUnFixedToolbar:function(){this.dropdown.active.css({position:"absolute",left:this.dropdown.position.left+"px",top:this.dropdown.button.innerHeight()+this.dropdown.position.top+"px"}).show(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideDown":"show",{duration:.2},e.proxy(function(){this.dropdown.enableCallback(),this.dropdown.enableEvents()},this))},enableEvents:function(){e(document).on("mousedown.redactor-dropdown",e.proxy(this.dropdown.hideAll,this)),this.core.editor().on("touchstart.redactor-dropdown",e.proxy(this.dropdown.hideAll,this)),e(document).on("keyup.redactor-dropdown",e.proxy(this.dropdown.closeHandler,this))},enableCallback:function(){this.core.callback("dropdownShown",{dropdown:this.dropdown.active,key:this.dropdown.key,button:this.dropdown.button})},getButtonPosition:function(){this.dropdown.position=this.dropdown.button.offset();var t=this.dropdown.active.width();this.dropdown.position.left+t>e(document).width()&&(this.dropdown.position.left=Math.max(0,this.dropdown.position.left-t+parseInt(this.dropdown.button.innerWidth())))},closeHandler:function(e){e.which===this.keyCode.ESC&&(this.dropdown.hideAll(e),this.core.editor().focus())},hideAll:function(t,i){if(this.detect.isDesktop()&&this.utils.enableBodyScroll(),t===!1||0===e(t.target).closest(".redactor-dropdown").length){var n="undefined"==typeof i?this.button.toolbar().find("a.dropact"):this.button.toolbar().find("a.dropact").not(".re-"+i),r="undefined"==typeof i?e(".redactor-dropdown-"+this.uuid):e(".redactor-dropdown-"+this.uuid).not(".redactor-dropdown-box-"+i);0!==r.length&&(e(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),e.each(r,e.proxy(function(t,i){var n=e(i);this.core.callback("dropdownHide",n),n.hide(),n.off("mouseover mouseout").off(".redactor-dropdown")},this)),n.removeClass("redactor-act dropact"))}},hide:function(){this.dropdown.active!==!1&&(this.detect.isDesktop()&&this.utils.enableBodyScroll(),this.dropdown.active.redactorAnimation(this.opts.animation?"slideUp":"hide",{duration:.2},e.proxy(function(){e(document).off(".redactor-dropdown"),this.core.editor().off(".redactor-dropdown"),this.dropdown.hideOut()},this)))},hideOut:function(){this.core.callback("dropdownHide",this.dropdown.active),this.dropdown.button.removeClass("redactor-act dropact"),this.dropdown.active.off("mouseover mouseout").off(".redactor-dropdown"),this.dropdown.button=!1,this.dropdown.key=!1,this.dropdown.active=!1}}},events:function(){return{focused:!1,blured:!0,dropImage:!1,stopChanges:!1,stopDetectChanges:function(){this.events.stopChanges=!0},startDetectChanges:function(){var e=this;setTimeout(function(){e.events.stopChanges=!1},1)},dragover:function(t){t.preventDefault(),t.stopPropagation(),"IMG"===t.target.tagName&&e(t.target).addClass("redactor-image-dragover")},dragleave:function(e){this.core.editor().find("img").removeClass("redactor-image-dragover")},drop:function(e){return e=e.originalEvent||e,this.core.editor().find("img").removeClass("redactor-image-dragover"),"inline"===this.opts.type||"pre"===this.opts.type?(e.preventDefault(),!1):void 0!==window.FormData&&e.dataTransfer?0===e.dataTransfer.files.length?this.events.onDrop(e):(this.events.onDropUpload(e),void this.core.callback("drop",e)):!0},click:function(e){var t=this.core.getEvent(),i="click"===t||"arrow"===t?!1:"click";this.core.addEvent(i),this.utils.disableSelectAll(),this.core.callback("click",e)},focus:function(e){if(!this.rtePaste&&(this.events.isCallback("focus")&&this.core.callback("focus",e),this.events.focused=!0,this.events.blured=!1,this.selection.current()===!1)){var t=this.selection.get(),i=this.selection.range(t);i.setStart(this.core.editor()[0],0),i.setEnd(this.core.editor()[0],0),this.selection.update(t,i)}},blur:function(t){this.start||this.rtePaste||0===e(t.target).closest("#"+this.core.id()+", .redactor-toolbar, .redactor-dropdown, #redactor-modal-box").length&&(!this.events.blured&&this.events.isCallback("blur")&&this.core.callback("blur",t),this.events.focused=!1,this.events.blured=!0)},touchImageEditing:function(){var t=-1;this.events.imageEditing=!1,e(window).on("touchmove.redactor."+this.uuid,e.proxy(function(){this.events.imageEditing=!0,-1!==t&&clearTimeout(t),t=setTimeout(e.proxy(function(){this.events.imageEditing=!1},this),500)},this))},init:function(){this.core.editor().on("dragover.redactor dragenter.redactor",e.proxy(this.events.dragover,this)),this.core.editor().on("dragleave.redactor",e.proxy(this.events.dragleave,this)),this.core.editor().on("drop.redactor",e.proxy(this.events.drop,this)),this.core.editor().on("click.redactor",e.proxy(this.events.click,this)),this.core.editor().on("paste.redactor",e.proxy(this.paste.init,this)),this.core.editor().on("keydown.redactor",e.proxy(this.keydown.init,this)),this.core.editor().on("keyup.redactor",e.proxy(this.keyup.init,this)),this.core.editor().on("focus.redactor",e.proxy(this.events.focus,this)),e(document).on("mousedown.redactor-blur."+this.uuid,e.proxy(this.events.blur,this)),this.events.touchImageEditing(),this.events.createObserver(),this.events.setupObserver()},createObserver:function(){var t=this;this.events.observer=new MutationObserver(function(i){i.forEach(e.proxy(t.events.iterateObserver,t))})},iterateObserver:function(e){var t=!1;(("textarea"===this.opts.type||"div"===this.opts.type)&&!this.detect.isFirefox()&&e.target===this.core.editor()[0]||"class"===e.attributeName&&e.target===this.core.editor()[0])&&(t=!0),t||(this.observe.load(),this.events.changeHandler())},setupObserver:function(){this.events.observer.observe(this.core.editor()[0],{attributes:!0,subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0})},changeHandler:function(){this.events.stopChanges||(this.code.sync(),this.autosave.is()&&(clearTimeout(this.autosaveTimeout),this.autosaveTimeout=setTimeout(e.proxy(this.autosave.send,this),300)))},onDropUpload:function(e){if(e.preventDefault(),e.stopPropagation(),(this.opts.dragImageUpload||this.opts.dragFileUpload)&&(null!==this.opts.imageUpload||null!==this.opts.fileUpload)){"IMG"===e.target.tagName&&(this.events.dropImage=e.target);for(var t=e.dataTransfer.files,i=t.length,n=0;i>n;n++)this.upload.directUpload(t[n],e)}},onDrop:function(e){this.core.callback("drop",e)},isCallback:function(t){return"undefined"!=typeof this.opts.callbacks[t]&&e.isFunction(this.opts.callbacks[t])},stopDetect:function(){this.events.stopDetectChanges()},startDetect:function(){this.events.startDetectChanges()}}},file:function(){return{is:function(){return!(!this.opts.fileUpload||!this.opts.fileUpload&&!this.opts.s3)},show:function(){this.modal.load("file",this.lang.get("file"),700),this.upload.init("#redactor-modal-file-upload",this.opts.fileUpload,this.file.insert),e("#redactor-filename").val(this.selection.get().toString()),this.modal.show()},insert:function(t,i,n){if("undefined"!=typeof t.error)return this.modal.close(),void this.core.callback("fileUploadError",t);this.file.release(n,i),this.buffer.set(),this.air.collapsed();var r=this.file.text(t),o=e("<a />").attr("href",t.url).text(r),s="undefined"==typeof t.id?"":t.id,a="undefined"==typeof t.s3?"file":"s3";o.attr("data-"+a,s),o=e(this.insert.node(o)),this.caret.after(o),this.storage.add({type:a,node:o[0],url:t.url,id:s}),null!==i&&this.core.callback("fileUpload",o,t)},release:function(e,t){t?(this.marker.remove(),this.insert.nodeToPoint(e,this.marker.get()),this.selection.restore()):this.modal.close()},text:function(t){var i=e("#redactor-filename").val();return"undefined"==typeof i||""===i?t.name:i}}},focus:function(){return{start:function(){if(this.core.editor().focus(),"inline"!==this.opts.type){var e=this.focus.first();e!==!1&&this.caret.start(e)}},end:function(){this.core.editor().focus();var e=this.opts.inline?this.core.editor():this.focus.last();if(0!==e.length){var t=this.focus.lastChild(e);if(this.detect.isWebkit()||t===!1){var i=this.selection.get(),n=this.selection.range(i);null!==n?(n.selectNodeContents(e[0]),n.collapse(!1),this.selection.update(i,n)):this.caret.end(e)}else this.caret.end(t)}},first:function(){var e=this.core.editor().children().first();return 0!==e.length||0!==e[0].length&&"BR"!==e[0].tagName&&"HR"!==e[0].tagName&&3!==e[0].nodeType?"UL"===e[0].tagName||"OL"===e[0].tagName?e.find("li").first():e:!1},last:function(){return this.core.editor().children().last()},lastChild:function(e){var t=e[0].lastChild;return null!==t&&this.utils.isInlineTag(t.tagName)?t:!1},is:function(){return this.core.editor()[0]===document.activeElement}}},image:function(){return{is:function(){return!(!this.opts.imageUpload||!this.opts.imageUpload&&!this.opts.s3)},show:function(){this.modal.load("image",this.lang.get("image"),700),this.upload.init("#redactor-modal-image-droparea",this.opts.imageUpload,this.image.insert),this.modal.show()},insert:function(t,i,n){var r;if("undefined"!=typeof t.error)return this.modal.close(),this.events.dropImage=!1,void this.core.callback("imageUploadError",t,n);if(this.events.dropImage!==!1)return r=e(this.events.dropImage),this.core.callback("imageDelete",r[0].src,r),r.attr("src",t.url),this.events.dropImage=!1,void this.core.callback("imageUpload",r,t);this.placeholder.hide();var o=e("<"+this.opts.imageTag+">");r=e("<img>"),r.attr("src",t.url);var s="undefined"==typeof t.id?"":t.id,a="undefined"==typeof t.s3?"image":"s3";r.attr("data-"+a,s),o.append(r);var l=this.utils.isTag(this.selection.current(),"pre");if(i){this.air.collapsed(),this.marker.remove();var c=this.insert.nodeToPoint(n,this.marker.get()),d=e(c).next();this.selection.restore(),this.buffer.set(),"undefined"!=typeof d&&0!==d.length&&"IMG"===d[0].tagName?(this.core.callback("imageDelete",d[0].src,d),d.closest("figure, p",this.core.editor()[0]).replaceWith(o),this.caret.after(o)):(l?e(l).after(o):this.insert.node(o),this.caret.after(o))}else this.modal.close(),this.buffer.set(),this.air.collapsed(),l?e(l).after(o):this.insert.node(o),this.caret.after(o);this.events.dropImage=!1,this.storage.add({type:a,node:r[0],url:t.url,id:s});var u=r[0].nextSibling,h=o.next(),p=e(u).text().replace(/\u200B/g,""),f=h.text().replace(/\u200B/g,"");""===p&&e(u).remove(),1===h.length&&"FIGURE"===h[0].tagName&&""===f&&h.remove(),null!==i?this.core.callback("imageUpload",r,t):this.core.callback("imageInserted",r,t)},setEditable:function(t){if(t.on("dragstart",function(e){e.preventDefault()}),this.opts.imageResizable){var i=e.proxy(function(i){this.observe.image=t,this.image.resizer=this.image.loadEditableControls(t),e(document).on("mousedown.redactor-image-resize-hide."+this.uuid,e.proxy(this.image.hideResize,this)),this.image.resizer&&this.image.resizer.on("mousedown.redactor touchstart.redactor",e.proxy(function(e){this.image.setResizable(e,t)},this))},this);t.off("mousedown.redactor").on("mousedown.redactor",e.proxy(this.image.hideResize,this)),t.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",i)}else t.off("click.redactor touchstart.redactor").on("click.redactor touchstart.redactor",e.proxy(function(i){setTimeout(e.proxy(function(){this.image.showEdit(t)},this),200)},this))},setResizable:function(e,t){e.preventDefault(),this.image.resizeHandle={x:e.pageX,y:e.pageY,el:t,ratio:t.width()/t.height(),h:t.height()},e=e.originalEvent||e,e.targetTouches&&(this.image.resizeHandle.x=e.targetTouches[0].pageX,this.image.resizeHandle.y=e.targetTouches[0].pageY),this.image.startResize()},startResize:function(){e(document).on("mousemove.redactor-image-resize touchmove.redactor-image-resize",e.proxy(this.image.moveResize,this)),e(document).on("mouseup.redactor-image-resize touchend.redactor-image-resize",e.proxy(this.image.stopResize,this))},moveResize:function(e){e.preventDefault(),e=e.originalEvent||e;var t=this.image.resizeHandle.h;t+=e.targetTouches?e.targetTouches[0].pageY-this.image.resizeHandle.y:e.pageY-this.image.resizeHandle.y;var i=Math.round(t*this.image.resizeHandle.ratio);50>t||100>i||(this.image.resizeHandle.el.attr({width:i,height:t}),this.image.resizeHandle.el.width(i),this.image.resizeHandle.el.height(t),this.code.sync())},stopResize:function(){this.handle=!1,e(document).off(".redactor-image-resize"),this.image.hideResize()},hideResize:function(t){if(!t||0===e(t.target).closest("#redactor-image-box",this.$editor[0]).length){if(t&&"IMG"==t.target.tagName){e(t.target)}var i=this.$editor.find("#redactor-image-box");0!==i.length&&(e("#redactor-image-editter").remove(),e("#redactor-image-resizer").remove(),i.find("img").css({marginTop:i[0].style.marginTop,marginBottom:i[0].style.marginBottom,marginLeft:i[0].style.marginLeft,marginRight:i[0].style.marginRight}),i.css("margin",""),i.find("img").css("opacity",""),i.replaceWith(function(){return e(this).contents()}),e(document).off("mousedown.redactor-image-resize-hide."+this.uuid),"undefined"!=typeof this.image.resizeHandle&&this.image.resizeHandle.el.attr("rel",this.image.resizeHandle.el.attr("style")))}},loadResizableControls:function(t,i){if(this.opts.imageResizable&&!this.detect.isMobile()){var n=e('<span id="redactor-image-resizer" data-redactor="verified"></span>');return this.detect.isDesktop()||n.css({width:"15px",height:"15px"}),n.attr("contenteditable",!1),i.append(n),i.append(t),n}return i.append(t),!1},loadEditableControls:function(t){if(0===e("#redactor-image-box").length){var i=e('<span id="redactor-image-box" data-redactor="verified">');if(i.css("float",t.css("float")).attr("contenteditable",!1),"auto"!=t[0].style.margin?(i.css({marginTop:t[0].style.marginTop,marginBottom:t[0].style.marginBottom,marginLeft:t[0].style.marginLeft,marginRight:t[0].style.marginRight}),t.css("margin","")):i.css({display:"block",margin:"auto"}),t.css("opacity",".5").after(i),this.opts.imageEditable){this.image.editter=e('<span id="redactor-image-editter" data-redactor="verified">'+this.lang.get("edit")+"</span>"),this.image.editter.attr("contenteditable",!1),this.image.editter.on("click",e.proxy(function(){this.image.showEdit(t)},this)),i.append(this.image.editter);var n=this.image.editter.innerWidth();this.image.editter.css("margin-left","-"+n/2+"px")}return this.image.loadResizableControls(t,i)}},showEdit:function(t){if(!this.events.imageEditing){this.observe.image=t;var i=t.closest("a",this.$editor[0]),n=t.closest("figure",this.$editor[0]),r=0!==n.length?n:t;if(this.modal.load("image-edit",this.lang.get("edit"),705),this.image.buttonDelete=this.modal.getDeleteButton().text(this.lang.get("delete")),this.image.buttonSave=this.modal.getActionButton().text(this.lang.get("save")),this.image.buttonDelete.on("click",e.proxy(this.image.remove,this)),this.image.buttonSave.on("click",e.proxy(this.image.update,this)),this.opts.imageCaption===!1)e("#redactor-image-caption").val("").hide().prev().hide();else{var o=t.closest(this.opts.imageTag,this.$editor[0]),s=o.find("figcaption");0!==s&&e("#redactor-image-caption").val(s.text()).show()}if(this.opts.imagePosition){var a=0!==n.length?"center"===r.css("text-align"):"block"==r.css("display")&&"none"==r.css("float"),l=a?"center":r.css("float");e("#redactor-image-align").val(l)}else e(".redactor-image-position-option").hide();e("#redactor-image-preview").html(e('<img src="'+t.attr("src")+'" style="max-width: 100%;">')),e("#redactor-image-title").val(t.attr("alt")),0!==i.length&&(e("#redactor-image-link").val(i.attr("href")),"_blank"===i.attr("target")&&e("#redactor-image-link-blank").prop("checked",!0)),e(".redactor-link-tooltip").remove(),this.modal.show(),this.detect.isDesktop()&&e("#redactor-image-title").focus()}},update:function(){var t=this.observe.image,i=t.closest("a",this.core.editor()[0]),n=e("#redactor-image-title").val().replace(/(<([^>]+)>)/gi,"");t.attr("alt",n).attr("title",n),this.image.setFloating(t);var r=e.trim(e("#redactor-image-link").val()).replace(/(<([^>]+)>)/gi,"");if(""!==r){var o="((xn--)?[a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}",s=new RegExp("^(http|ftp|https)://"+o,"i"),a=new RegExp("^"+o,"i");-1===r.search(s)&&0===r.search(a)&&this.opts.linkProtocol&&(r=this.opts.linkProtocol+"://"+r);var l=e("#redactor-image-link-blank").prop("checked")?!0:!1;if(0===i.length){var c=e('<a href="'+r+'" id="redactor-img-tmp">'+this.utils.getOuterHtml(t)+"</a>");l&&c.attr("target","_blank"),t=t.replaceWith(c),i=this.core.editor().find("#redactor-img-tmp"),i.removeAttr("id")}else i.attr("href",r),l?i.attr("target","_blank"):i.removeAttr("target")}else 0!==i.length&&i.replaceWith(this.utils.getOuterHtml(t));this.image.addCaption(t,i),this.modal.close(),this.buffer.set()},setFloating:function(t){var i=t.closest("figure",this.$editor[0]),n=0!==i.length?i:t,r=e("#redactor-image-align").val(),o="",s="",a="",l="";switch(r){case"left":o="left",a="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0";break;case"right":o="right",a="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin;break;case"center":0!==i.length?l="center":(s="block",a="auto")}n.css({"float":o,display:s,margin:a,"text-align":l}),n.attr("rel",t.attr("style"))},addCaption:function(t,i){var n=e("#redactor-image-caption").val(),r=0!==i.length?i:t,o=r.next();(0===o.length||"FIGCAPTION"!==o[0].tagName)&&(o=!1),""!==n?o===!1?(o=e("<figcaption />").text(n),r.after(o)):o.text(n):o!==!1&&o.remove()},remove:function(t,i,n){i="undefined"==typeof i?e(this.observe.image):i,"boolean"!=typeof t&&this.buffer.set(),this.events.stopDetectChanges();var r=i.closest("a",this.core.editor()[0]),o=i.closest(this.opts.imageTag,this.core.editor()[0]),s=i.parent(),a=this.core.callback("imageDelete",t,i[0]);if(a===!1)return t&&t.preventDefault(),!1;0!==e("#redactor-image-box").length&&(s=e("#redactor-image-box").parent());var l,c;0!==o.length?(c=o.prev(),l=o.next(),o.remove()):0!==r.length?(s=r.parent(),r.remove()):i.remove(),e("#redactor-image-box").remove(),t!==!1&&(l&&0!==l.length?this.caret.start(l):c&&0!==c.length&&this.caret.end(c)),"boolean"!=typeof t&&this.modal.close(),this.utils.restoreScroll(),this.observe.image=!1,this.events.startDetectChanges(),this.placeholder.enable(),this.code.sync()}}},indent:function(){return{increase:function(){if(this.list.get()){var t=e(this.selection.current()).closest("li"),i=t.closest("ul, ol",this.core.editor()[0]),n=t.closest("li"),r=n.prev();if(0!==r.length&&"LI"===r[0].tagName)if(this.buffer.set(),this.utils.isCollapsed()){var o=i[0].tagName,s=e("<"+o+" />");this.selection.save();var a=r.find("ol").first();if(1===a.length)a.append(t);else{var o=i[0].tagName,s=e("<"+o+" />");s.append(t),r.append(s)}this.selection.restore()}else document.execCommand("indent"),this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},decrease:function(){if(this.list.get()){var t=e(this.selection.current()).closest("li");t.closest("ul, ol",this.core.editor()[0]);this.buffer.set(),document.execCommand("outdent");var i=e(this.selection.current()).closest("li",this.core.editor()[0]);if(this.utils.isCollapsed()&&this.indent.repositionItem(i),0===i.length){document.execCommand("formatblock",!1,"p"),i=e(this.selection.current());var n=i.next();0!==n.length&&"BR"===n[0].tagName&&n.remove()}this.selection.save(),this.indent.removeEmpty(),this.indent.normalize(),this.selection.restore()}},repositionItem:function(e){var t=e.next();0===t.length||"UL"===t[0].tagName&&"OL"===t[0].tagName||e.append(t);var i=e.prev();if(0!==i.length&&"LI"!==i[0].tagName){this.selection.save();var n=e.parents("li",this.core.editor()[0]);n.after(e),this.selection.restore()}},normalize:function(){this.core.editor().find("li").each(e.proxy(function(t,i){var n=e(i);n.find(this.opts.inlineTags.join(",")).each(function(){e(this).removeAttr("style")});var r=n.parent();if(0!==r.length&&"LI"===r[0].tagName)return void r.after(n);var o=n.next();0===o.length||"UL"!==o[0].tagName&&"OL"!==o[0].tagName||n.append(o)},this))},removeEmpty:function(t){var i=this.core.editor().find("ul, ol"),n=this.core.editor().find("li");n.each(e.proxy(function(e,t){this.indent.removeItemEmpty(t)},this)),i.each(e.proxy(function(e,t){this.indent.removeItemEmpty(t)},this)),n.each(e.proxy(function(e,t){this.indent.removeItemEmpty(t)},this))},removeItemEmpty:function(t){var i=t.innerHTML.replace(/[\t\s\n]/g,"");i=i.replace(/<span><\/span>/g,""),""===i&&e(t).remove()}}},inline:function(){return{format:function(e,t,i,n){if(!this.utils.isCurrentOrParent(["PRE","CODE"])){var r=this.inline.getParams(t,i,n);e=this.inline.arrangeTag(e),this.placeholder.hide(),this.buffer.set(),this.utils.isCollapsed()?this.inline.formatCollapsed(e,r):this.inline.formatUncollapsed(e,r)}},formatCollapsed:function(t,i){var n,r=this.selection.inline();if(r){var o=r.tagName.toLowerCase();if(o===t)if(this.utils.isEmpty(r.innerHTML))this.caret.after(r),e(r).remove();else{var s=this.inline.insertBreakpoint(r,o);this.caret.after(s)}else if(0===e(r).closest(t).length)n=this.inline.insertInline(t),n=this.inline.setParams(n,i);else{var s=this.inline.insertBreakpoint(r,o);this.caret.after(s)}}else n=this.inline.insertInline(t),n=this.inline.setParams(n,i)},formatUncollapsed:function(t,i){this.selection.save();var n=this.inline.getClearedNodes();this.inline.setNodesStriked(n,t,i),this.selection.restore(),document.execCommand("strikethrough"),this.selection.saveInstant();var r=this;this.core.editor().find("strike").each(function(){var n=r.utils.replaceToTag(this,t);r.inline.setParams(n[0],i);var o=n.find(t),s=n.parent(),a=s.parent();return 0!==a.length&&a[0].tagName.toLowerCase()===t&&a.html()==s[0].outerHTML?(n.replaceWith(function(){return e(this).contents()}),void a.replaceWith(function(){return e(this).contents()})):(0!==o.length&&r.inline.cleanInsideOrParent(o,i),s.html()==n[0].outerHTML&&r.inline.cleanInsideOrParent(s,i),void(r.detect.isFirefox()&&r.core.editor().find(t+":empty").remove()))}),this.selection.restoreInstant()},cleanInsideOrParent:function(e,t){if(t)for(var i in t.data)this.inline.removeSpecificAttr(e,i,t.data[i])},getClearedNodes:function(){for(var t=this.selection.nodes(),i=[],n=t.length,r=0,o=0;n>o;o++)if(e(t[o]).hasClass("redactor-selection-marker")){r=o+2;break}for(var o=0;n>o;o++)o>=r&&!this.utils.isBlockTag(t[o].tagName)&&i.push(t[o]);return i},isConvertableAttr:function(t,i,n){var r=e(t).attr(i);if(r)if("style"===i){n=e.trim(n).replace(/;$/,"");for(var o=n.split(";"),s=0,a=0;a<o.length;a++){var l=o[a].split(":"),c=e.trim(l[0]),d=e.trim(l[1]);if(-1!==c.search(/color/)){var u=e(t).css(c);!u||u!==d&&this.utils.rgb2hex(u)!==d||s++}else e(t).css(c)===d&&s++}if(s===o.length)return 1}else if(r===n)return 1;return 0;
},isConvertable:function(e,t,i,n){if(t===i){if(!n)return!0;var r=0;for(var o in n.data)r+=this.inline.isConvertableAttr(e,o,n.data[o]);if(r===Object.keys(n.data).length)return!0}return!1},setNodesStriked:function(t,i,n){for(var r=0;r<t.length;r++){var o=t[r].tagName?t[r].tagName.toLowerCase():void 0,s=t[r].parentNode,a=s&&s.tagName?s.tagName.toLowerCase():void 0,l=this.inline.isConvertable(s,a,i,n);if(l){var c=e(s).replaceWith(function(){return e("<strike>").append(e(this).contents())});c.attr("data-redactor-inline-converted")}var l=this.inline.isConvertable(t[r],o,i,n);if(l)var c=e(t[r]).replaceWith(function(){return e("<strike>").append(e(this).contents())})}},insertBreakpoint:function(t,i){var n=document.createElement("span");n.id="redactor-inline-breakpoint",n=this.insert.node(n);var r=this.utils.isEndOfElement(t),o=this.utils.getOuterHtml(t),s=r?"":"<"+i+">";o=o.replace(/<span id="redactor-inline-breakpoint"><\/span>/i,"</"+i+">"+s);var a=e(o);return e(t).replaceWith(a),""!==s&&this.utils.cloneAttributes(t,a.last()),a.first()},insertInline:function(e){var t=document.createElement(e);return this.insert.node(t),this.caret.start(t),t},arrangeTag:function(e){var t=["b","bold","i","italic","underline","strikethrough","deleted","superscript","subscript"],i=["strong","strong","em","em","u","del","del","sup","sub"];e=e.toLowerCase();for(var n=0;n<t.length;n++)e===t[n]&&(e=i[n]);return e},getStyleParams:function(e){for(var t={},i=e.trim().replace(/;$/,"").split(";"),n=0;n<i.length;n++){var r=i[n].split(":");r&&(t[r[0].trim()]=r[1].trim())}return t},getParams:function(e,t,i){var n=!1,r="toggle";return"object"==typeof e?(n=e,r=void 0!==t?t:r):void 0!==e&&void 0!==t&&(n={},n[e]=t,r=void 0!==i?i:r),n?{func:r,data:n}:!1},setParams:function(t,i){if(i)for(var n in i.data){var r=e(t);"style"===n?(t=this.inline[i.func+"Style"](i.data[n],t),r.attr("data-redactor-style-cache",r.attr("style"))):t="class"===n?this.inline[i.func+"Class"](i.data[n],t):"remove"===i.func?this.inline[i.func+"Attr"](n,t):this.inline[i.func+"Attr"](n,i.data[n],t),"style"===n&&"SPAN"===t.tagName&&r.attr("data-redactor-span",!0)}return t},eachInline:function(e,t){var i,n=void 0===e?this.selection.inlines():[e];if(n)for(var r=0;r<n.length;r++)i=t(n[r])[0];return i},replaceClass:function(t,i){return this.inline.eachInline(i,function(i){return e(i).removeAttr("class").addClass(t)})},toggleClass:function(t,i){return this.inline.eachInline(i,function(i){return e(i).toggleClass(t)})},addClass:function(t,i){return this.inline.eachInline(i,function(i){return e(i).addClass(t)})},removeClass:function(t,i){return this.inline.eachInline(i,function(i){return e(i).removeClass(t)})},removeAllClass:function(t){return this.inline.eachInline(t,function(t){return e(t).removeAttr("class")})},replaceAttr:function(t,i,n){return this.inline.eachInline(n,function(i){return e(i).removeAttr(t).attr(t.value)})},toggleAttr:function(t,i,n){return this.inline.eachInline(n,function(i){var n=e(i).attr(t);return n?e(i).removeAttr(t):e(i).attr(t.value)})},addAttr:function(t,i,n){return this.inline.eachInline(n,function(n){return e(n).attr(t,i)})},removeAttr:function(t,i){return this.inline.eachInline(i,function(i){var n=e(i);return n.removeAttr(t),"style"===t&&n.removeAttr("data-redactor-style-cache"),n})},removeAllAttr:function(t){return this.inline.eachInline(t,function(t){for(var i=e(t),n=t.attributes.length,r=0;n>r;r++)i.removeAttr(t.attributes[r].name);return i})},removeSpecificAttr:function(t,i,n){var r=e(t);if("style"===i){var o=n.split(":"),s=o[0].trim();r.css(s,""),this.utils.removeEmptyAttr(t,"style")&&r.removeAttr("data-redactor-style-cache")}else r.removeAttr(i)[0]},hasParentStyle:function(e){var t=e.parent();return 1===t.length&&t[0].tagName===e[0].tagName&&t.html()===e[0].outerHTML?t:!1},addParentStyle:function(t){var i=this.inline.hasParentStyle(t);if(i){var n=this.inline.getStyleParams(t.attr("style"));i.css(n),i.attr("data-redactor-style-cache",i.attr("style")),t.replaceWith(function(){return e(this).contents()})}else t.attr("data-redactor-style-cache",t.attr("style"));return t},replaceStyle:function(t,i){t=this.inline.getStyleParams(t);var n=this;return this.inline.eachInline(i,function(i){var r=e(i);r.removeAttr("style").css(t);var o=r.attr("style");return o&&r.attr("style",o.replace(/"/g,"'")),r=n.inline.addParentStyle(r)})},toggleStyle:function(t,i){t=this.inline.getStyleParams(t);var n=this;return this.inline.eachInline(i,function(i){var r=e(i);for(var o in t){var s=t[o],a=r.css(o);a=n.utils.isRgb(a)?n.utils.rgb2hex(a):a.replace(/"/g,""),s=n.utils.isRgb(s)?n.utils.rgb2hex(s):s.replace(/"/g,""),a===s?r.css(o,""):r.css(o,s)}var l=r.attr("style");return l&&r.attr("style",l.replace(/"/g,"'")),n.utils.removeEmptyAttr(i,"style")?r.removeAttr("data-redactor-style-cache"):r=n.inline.addParentStyle(r),r})},addStyle:function(t,i){t=this.inline.getStyleParams(t);var n=this;return this.inline.eachInline(i,function(i){var r=e(i);r.css(t);var o=r.attr("style");return o&&r.attr("style",o.replace(/"/g,"'")),r=n.inline.addParentStyle(r)})},removeStyle:function(t,i){t=this.inline.getStyleParams(t);var n=this;return this.inline.eachInline(i,function(i){var r=e(i);for(var o in t)r.css(o,"");return n.utils.removeEmptyAttr(i,"style")?r.removeAttr("data-redactor-style-cache"):r.attr("data-redactor-style-cache",r.attr("style")),r})},removeAllStyle:function(t){return this.inline.eachInline(t,function(t){return e(t).removeAttr("style").removeAttr("data-redactor-style-cache")})},removeStyleRule:function(t){var i=this.selection.parent(),n=this.selection.inlines();this.buffer.set(),i&&"SPAN"===i.tagName&&this.inline.removeStyleRuleAttr(e(i),t);for(var r=0;r<n.length;r++){var o=n[r],s=e(o);-1==e.inArray(o.tagName.toLowerCase(),this.opts.inlineTags)||s.hasClass("redactor-selection-marker")||this.inline.removeStyleRuleAttr(s,t)}},removeStyleRuleAttr:function(e,t){e.css(t,""),this.utils.removeEmptyAttr(e,"style")?e.removeAttr("data-redactor-style-cache"):e.attr("data-redactor-style-cache",e.attr("style"))},update:function(e,t,i,n){e=this.inline.arrangeTag(e);var r=this.inline.getParams(t,i,n),o=this.selection.inlines(),s=[];if(o)for(var a=0;a<o.length;a++){var l=o[a];("*"===e||l.tagName.toLowerCase()===e)&&s.push(this.inline.setParams(l,r))}return s},removeFormat:function(){this.selection.save();for(var t=this.inline.getClearedNodes(),i=0;i<t.length;i++)1===t[i].nodeType&&e(t[i]).replaceWith(function(){return e(this).contents()});this.selection.restore()}}},insert:function(){return{set:function(e){this.placeholder.hide(),this.code.set(e),this.focus.end(),this.placeholder.enable()},html:function(t,i){this.placeholder.hide(),this.core.editor().focus();var n=this.selection.block(),r=this.selection.inline();"undefined"==typeof i&&(i=this.clean.getCurrentType(t,!0),t=this.clean.onPaste(t,i,!0)),t=e.parseHTML(t);var o=e(t).last(),s=this.selection.get(),a=this.selection.range(s);if(a.deleteContents(),this.selection.update(s,a),i.lists){var l=e(t);if(0!==l.length&&("UL"===l[0].tagName||"OL"===l[0].tagName))return void this.insert.appendLists(n,l)}if(i.blocks&&n)if(this.utils.isSelectAll())this.core.editor().html(t),this.focus.end();else{var c=this.utils.breakBlockTag();if(c===!1)this.insert.placeHtml(t);else{var d=e(t).children().last();d.append(this.marker.get()),"start"===c.type?c.$block.before(t):c.$block.after(t),this.selection.restore(),this.core.editor().find("p").each(function(){""===e.trim(this.innerHTML)&&e(this).remove()})}}else{if(r){var u=e("<div/>").html(t);u.find(r.tagName.toLowerCase()).each(function(){e(this).contents().unwrap()}),t=u.html()}if(this.utils.isSelectAll()){var h=e(this.opts.emptyHtml);this.core.editor().html("").append(h),h.html(t),this.caret.end(h)}else this.insert.placeHtml(t)}this.utils.disableSelectAll(),i.pre&&this.clean.cleanPre(),this.caret.end(o),this.linkify.format()},text:function(t){t=t.toString(),t=e.trim(t);var i=document.createElement("div");if(i.innerHTML=t,t=i.textContent||i.innerText,"undefined"!=typeof t){this.placeholder.hide(),this.core.editor().focus();var n=this.selection.blocks();if(t=t.replace(/\n/g," "),this.utils.isSelectAll()){var r=e(this.opts.emptyHtml);this.core.editor().html("").append(r),r.html(t),this.caret.end(r)}else{var o=this.selection.get(),s=document.createTextNode(t);if(o.getRangeAt&&o.rangeCount){var a=o.getRangeAt(0);a.deleteContents(),a.insertNode(s),a.setStartAfter(s),a.collapse(!0),this.selection.update(o,a)}n.length>1&&(e(s).wrap("<p>"),this.caret.after(s))}this.utils.disableSelectAll(),this.linkify.format(),this.clean.normalizeCurrentHeading()}},raw:function(e){this.placeholder.hide(),this.core.editor().focus();var t=this.selection.get(),i=this.selection.range(t);i.deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var r,o,s=document.createDocumentFragment();r=n.firstChild;)o=s.appendChild(r);i.insertNode(s),o&&(i=i.cloneRange(),i.setStartAfter(o),i.collapse(!0),t.removeAllRanges(),t.addRange(i))},node:function(t,i){this.placeholder.hide(),"undefined"!=typeof this.start&&this.core.editor().focus(),t=t[0]||t;var n=this.selection.block(),r=this.utils.isBlockTag(t.tagName),o=!0;if(this.utils.isSelectAll())r?this.core.editor().html(t):this.core.editor().html(e("<p>").html(t)),this.code.sync();else if(r&&n){var s=this.utils.breakBlockTag();s===!1?this.insert.placeNode(t,i):("start"===s.type?s.$block.before(t):s.$block.after(t),this.core.editor().find("p:empty").remove())}else o=this.insert.placeNode(t,i);return this.utils.disableSelectAll(),o&&this.caret.end(t),t},appendLists:function(t,i){var n,r=e(t),o=this.utils.isEmpty(t.innerHTML);if(o||this.utils.isEndOfElement(t))n=r,i.find("li").each(function(){n.after(this),n=e(this)}),o&&r.remove();else if(this.utils.isStartOfElement(t))i.find("li").each(function(){r.before(this),n=e(this)});else{var s=this.selection.extractEndOfNode(t);r.after(e("<li>").append(s)),r.append(i),n=i}this.marker.remove(),n&&this.caret.end(n),this.linkify.format()},placeHtml:function(t){var i=document.createElement("span");i.id="redactor-insert-marker",i=this.insert.node(i),e(i).before(t),this.selection.restore(),this.caret.after(i),e(i).remove()},placeNode:function(e,t){var i=this.selection.get(),n=this.selection.range(i);return null==n?!1:(t!==!1&&n.deleteContents(),n.insertNode(e),n.collapse(!1),void this.selection.update(i,n))},nodeToPoint:function(t,i){if(this.placeholder.hide(),i=i[0]||i,this.utils.isEmpty())return i=this.utils.isBlock(i)?i:e("<p />").append(i),this.core.editor().html(i),i;var n,r=t.clientX,o=t.clientY;if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(r,o),a=document.getSelection();n=a.getRangeAt(0),n.setStart(s.offsetNode,s.offset),n.collapse(!0),n.insertNode(i)}else if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(r,o),n.insertNode(i);else if("undefined"!=typeof document.body.createTextRange){n=document.body.createTextRange(),n.moveToPoint(r,o);var l=n.duplicate();l.moveToPoint(r,o),n.setEndPoint("EndToEnd",l),n.select()}return i},nodeToCaretPositionFromPoint:function(e,t){this.insert.nodeToPoint(e,t)},marker:function(){this.marker.insert()}}},keydown:function(){return{init:function(t){if(!this.rtePaste){var i=t.which,n=i>=37&&40>=i;this.keydown.ctrl=t.ctrlKey||t.metaKey,this.keydown.parent=this.selection.parent(),this.keydown.current=this.selection.current(),this.keydown.block=this.selection.block(),this.keydown.pre=this.utils.isTag(this.keydown.current,"pre"),this.keydown.blockquote=this.utils.isTag(this.keydown.current,"blockquote"),this.keydown.figcaption=this.utils.isTag(this.keydown.current,"figcaption"),this.keydown.figure=this.utils.isTag(this.keydown.current,"figure");var r=this.core.callback("keydown",t);if(r===!1)return t.preventDefault(),!1;if(this.shortcuts.init(t,i),this.keydown.checkEvents(n,i),this.keydown.setupBuffer(t,i),this.utils.isSelectAll()&&(i===this.keyCode.ENTER||i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE))return t.preventDefault(),this.code.set(this.opts.emptyHtml),void this.events.changeHandler();if(this.keydown.addArrowsEvent(n),this.keydown.setupSelectAll(t,i),!this.opts.enterKey&&i===this.keyCode.ENTER){t.preventDefault();var o=this.selection.get(),s=this.selection.range(o);return void(s.collapsed||s.deleteContents())}if(this.opts.enterKey&&i===this.keyCode.DOWN&&this.keydown.onArrowDown(),this.opts.enterKey&&i===this.keyCode.UP&&this.keydown.onArrowUp(),("textarea"===this.opts.type||"div"===this.opts.type)&&this.keydown.current&&3===this.keydown.current.nodeType&&e(this.keydown.parent).hasClass("redactor-in")&&this.keydown.wrapToParagraph(),!this.keyup.lastShiftKey&&i===this.keyCode.SPACE&&(t.ctrlKey||t.shiftKey))return t.preventDefault(),this.keydown.onShiftSpace();if(i===this.keyCode.ENTER&&(t.ctrlKey||t.shiftKey))return t.preventDefault(),this.keydown.onShiftEnter(t);if(i===this.keyCode.ENTER&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey)return this.keydown.onEnter(t);if(i===this.keyCode.TAB||t.metaKey&&221===i||t.metaKey&&219===i)return this.keydown.onTab(t,i);if(this.detect.isFirefox()&&i===this.keyCode.BACKSPACE&&this.keydown.block&&"P"===this.keydown.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){var a=e(this.keydown.block).prev();if(0!==a.length)return t.preventDefault(),a.append(this.marker.get()),a.append(e(this.keydown.block).html()),e(this.keydown.block).remove(),void this.selection.restore()}if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.observe.image&&"undefined"!=typeof this.observe.image&&0!==e("#redactor-image-box").length){t.preventDefault();var a=this.observe.image.closest("figure, p").prev();return this.image.remove(!1),this.observe.image=!1,void(a&&0!==a.length?this.caret.end(a):this.core.editor().focus())}this.keydown.onBackspaceAndDeleteBefore()}if(i===this.keyCode.DELETE){var l=e(this.keydown.block).next();if(this.utils.isEndOfElement(this.keydown.block)&&0!==l.length&&"FIGURE"===l[0].tagName)return l.remove(),!1;var c=this.keydown.block&&"LI"===this.keydown.block.tagName?this.keydown.block:!1;if(c){var d=e(this.keydown.block).parents("ul, ol").last(),u=d.next();if(this.utils.isRedactorParent(d)&&this.utils.isEndOfElement(d)&&0!==u.length&&("UL"===u[0].tagName||"OL"===u[0].tagName))return t.preventDefault(),d.append(u.contents()),u.remove(),!1}if(this.utils.isEndOfElement(this.keydown.block)&&0!==l.length&&"PRE"===l[0].tagName)return e(this.keydown.block).append(l.text()),l.remove(),!1}if(i===this.keyCode.DELETE&&0!==e("#redactor-image-box").length&&this.image.remove(),i===this.keyCode.BACKSPACE){if(this.detect.isFirefox()&&this.line.removeOnBackspace(t),this.list.combineAfterAndBefore(this.keydown.block))return void t.preventDefault();var h=this.selection.block();if(h&&"LI"===h.tagName&&this.utils.isCollapsed()&&this.utils.isStartOfElement())return this.indent.decrease(),void t.preventDefault();this.keydown.removeInvisibleSpace(),this.keydown.removeEmptyListInTable(t)}(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE)&&this.keydown.onBackspaceAndDeleteAfter(t)}},onShiftSpace:function(){return this.buffer.set(),this.insert.raw("&nbsp;"),!1},onShiftEnter:function(e){return this.buffer.set(),this.keydown.pre?this.keydown.insertNewLine(e):this.insert.raw("<br>")},onBackspaceAndDeleteBefore:function(){this.utils.saveScroll()},onBackspaceAndDeleteAfter:function(t){setTimeout(e.proxy(function(){this.code.syncFire=!1,this.keydown.removeEmptyLists();var e="";0!==this.opts.keepStyleAttr.length&&(e=","+this.opts.keepStyleAttr.join(","));var i=this.core.editor().find("*[style]");i.not("img, figure, iframe, #redactor-image-box, #redactor-image-editter, [data-redactor-style-cache], [data-redactor-span]"+e).removeAttr("style"),this.keydown.formatEmpty(t),this.code.syncFire=!0},this),1)},onEnter:function(t){var i=this.core.callback("enter",t);if(i===!1)return t.preventDefault(),!1;if(this.keydown.blockquote&&this.keydown.exitFromBlockquote(t)===!0)return!1;if(this.keydown.pre)return this.keydown.insertNewLine(t);if(this.keydown.blockquote||this.keydown.figcaption)return this.keydown.insertBreakLine(t);if(this.keydown.figure)setTimeout(e.proxy(function(){this.keydown.replaceToParagraph("FIGURE")},this),1);else if(this.keydown.block){if(setTimeout(e.proxy(function(){this.keydown.replaceToParagraph("DIV")},this),1),"LI"===this.keydown.block.tagName){var n=this.selection.current(),r=e(n).closest("li",this.$editor[0]),o=r.parents("ul,ol",this.$editor[0]).last();if(0!==r.length&&this.utils.isEmpty(r.html())&&0===o.next().length&&this.utils.isEmpty(o.find("li").last().html())){o.find("li").last().remove();var s=e(this.opts.emptyHtml);return o.after(s),this.caret.start(s),!1}}}else if(!this.keydown.block)return this.keydown.insertParagraph(t);return this.detect.isFirefox()&&this.utils.isInline(this.keydown.parent)?void this.keydown.insertBreakLine(t):void setTimeout(e.proxy(function(){var t=this.selection.inline();if(t&&this.utils.isEmpty(t.innerHTML)){var i=this.selection.block();e(t).remove();var n=document.createRange();n.setStart(i,0);var r=document.createTextNode("​");n.insertNode(r),n.setStartAfter(r),n.collapse(!0);var o=window.getSelection();o.removeAllRanges(),o.addRange(n)}},this),1)},checkEvents:function(e,t){e||"click"!==this.core.getEvent()&&"arrow"!==this.core.getEvent()||(this.core.addEvent(!1),this.keydown.checkKeyEvents(t)&&this.buffer.set())},checkKeyEvents:function(t){var i=this.keyCode,n=[i.BACKSPACE,i.DELETE,i.ENTER,i.ESC,i.TAB,i.CTRL,i.META,i.ALT,i.SHIFT];return-1===e.inArray(t,n)?!0:!1},addArrowsEvent:function(e){return e?"click"===this.core.getEvent()||"arrow"===this.core.getEvent()?void this.core.addEvent(!1):void this.core.addEvent("arrow"):void 0},setupBuffer:function(e,t){return this.keydown.ctrl&&90===t&&!e.shiftKey&&!e.altKey&&this.sBuffer.length?(e.preventDefault(),void this.buffer.undo()):this.keydown.ctrl&&90===t&&e.shiftKey&&!e.altKey&&0!==this.sRebuffer.length?(e.preventDefault(),void this.buffer.redo()):void(this.keydown.ctrl||(t===this.keyCode.SPACE||t===this.keyCode.BACKSPACE||t===this.keyCode.DELETE||t===this.keyCode.ENTER&&!e.ctrlKey&&!e.shiftKey)&&this.buffer.set())},exitFromBlockquote:function(t){if(this.utils.isEndOfElement(this.keydown.blockquote)){var i=this.clean.removeSpacesHard(e(this.keydown.blockquote).html());if(-1!==i.search(/(<br\s?\/?>){1}$/i)){t.preventDefault();var n=e(this.keydown.blockquote).children().last();n.filter("br").remove(),e(this.keydown.blockquote).children().last().filter("span").remove();var r=e(this.opts.emptyHtml);return e(this.keydown.blockquote).after(r),this.caret.start(r),!0}}},onArrowDown:function(){for(var e=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],t=0;t<e.length;t++)if(e[t])return this.keydown.insertAfterLastElement(e[t]),!1},onArrowUp:function(){for(var e=[this.keydown.blockquote,this.keydown.pre,this.keydown.figcaption],t=0;t<e.length;t++)if(e[t])return this.keydown.insertBeforeFirstElement(e[t]),!1},insertAfterLastElement:function(t){if(this.utils.isEndOfElement(t)){var i=this.core.editor().contents().last(),n="FIGCAPTION"===t.tagName?e(this.keydown.block).parent().next():e(this.keydown.block).next();if(0===n.length){if(0===i.length&&i[0]!==t)return void this.caret.start(i);var r=e(this.opts.emptyHtml);"FIGCAPTION"===t.tagName?e(t).parent().after(r):e(t).after(r),this.caret.start(r)}}},insertBeforeFirstElement:function(t){if(this.utils.isStartOfElement()&&!(this.core.editor().contents().length>1&&this.core.editor().contents().first()[0]!==t)){var i=e(this.opts.emptyHtml);e(t).before(i),this.caret.start(i)}},onTab:function(e,t){if(!this.opts.tabKey)return!0;var i=this.keydown.block&&"LI"===this.keydown.block.tagName;if(this.utils.isEmpty(this.code.get())||!i&&!this.keydown.pre&&this.opts.tabAsSpaces===!1)return!0;e.preventDefault(),this.buffer.set();var n,r=i&&this.utils.isStartOfElement(this.keydown.block);return this.keydown.pre&&!e.shiftKey?(n=this.opts.preSpaces?document.createTextNode(Array(this.opts.preSpaces+1).join(" ")):document.createTextNode("	"),this.insert.node(n)):this.opts.tabAsSpaces===!1||r?e.metaKey&&219===t?this.indent.decrease():e.metaKey&&221===t?this.indent.increase():e.shiftKey?this.indent.decrease():this.indent.increase():(n=document.createTextNode(Array(this.opts.tabAsSpaces+1).join(" ")),this.insert.node(n)),!1},setupSelectAll:function(e,t){this.keydown.ctrl&&65===t?this.utils.enableSelectAll():t===this.keyCode.LEFT_WIN||this.keydown.ctrl||this.utils.disableSelectAll()},insertNewLine:function(e){e.preventDefault();var t=document.createTextNode("\n"),i=this.selection.get(),n=this.selection.range(i);return n.deleteContents(),n.insertNode(t),this.caret.after(t),!1},insertParagraph:function(e){e.preventDefault();var t=document.createElement("p");t.innerHTML="<br>";var i=this.selection.get(),n=this.selection.range(i);return n.deleteContents(),n.insertNode(t),this.caret.start(t),!1},insertBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e)},insertDblBreakLine:function(e){return this.keydown.insertBreakLineProcessing(e,!0)},insertBreakLineProcessing:function(e,t){e.stopPropagation();var i=document.createElement("br");if(this.insert.node(i),t===!0){var n=document.createElement("br");this.insert.node(n),this.caret.after(n)}else this.caret.after(i);return!1},wrapToParagraph:function(){var t=e(this.keydown.current),i=e("<p>").append(t.clone());t.replaceWith(i);var n=e(i).next();"undefined"!=typeof n[0]&&"BR"===n[0].tagName&&n.remove(),this.caret.end(i)},replaceToParagraph:function(t){var i=this.selection.block(),n=e(i).prev(),r=i.innerHTML.replace(/<br\s?\/?>/gi,"");if(i.tagName===t&&this.utils.isEmpty(r)&&!e(i).hasClass("redactor-in")){var o=document.createElement("p");return e(i).replaceWith(o),this.keydown.setCaretToParagraph(o),!1}if("P"===i.tagName)return e(i).removeAttr("class").removeAttr("style"),this.detect.isIe()&&this.utils.isEmpty(r)&&this.utils.isInline(this.keydown.parent)&&e(i).on("input",e.proxy(function(){var t=this.selection.parent();if(this.utils.isInline(t)){var n=e(t).html();e(i).html(n),this.caret.end(i)}e(i).off("keyup")},this)),!1;if(n.hasClass(this.opts.videoContainerClass)){n.removeAttr("class");var o=document.createElement("p");return n.replaceWith(o),this.keydown.setCaretToParagraph(o),!1}},setCaretToParagraph:function(e){var t=document.createRange();t.setStart(e,0);var i=document.createTextNode("​");t.insertNode(i),t.setStartAfter(i),t.collapse(!0);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)},removeInvisibleSpace:function(){var t=e(this.keydown.current);0===t.text().search(/^\u200B$/g)&&t.remove()},removeEmptyListInTable:function(t){var i=e(this.keydown.current),n=e(this.keydown.parent),r=i.closest("td",this.$editor[0]);if(0!==r.length&&i.closest("li",this.$editor[0])&&1===n.children("li").length){if(!this.utils.isEmpty(i.text()))return;t.preventDefault(),i.remove(),n.remove(),this.caret.start(r)}},removeEmptyLists:function(){var t=function(){var t=e.trim(this.innerHTML).replace(/\/t\/n/g,"");""===t&&e(this).remove()};this.core.editor().find("li").each(t),this.core.editor().find("ul, ol").each(t)},formatEmpty:function(t){var i=e.trim(this.core.editor().html());if(this.utils.isEmpty(i))return t.preventDefault(),"inline"===this.opts.type||"pre"===this.opts.type?(this.core.editor().html(this.marker.html()),this.selection.restore()):(this.core.editor().html(this.opts.emptyHtml),this.focus.start()),!1}}},keyup:function(){return{init:function(t){if(!this.rtePaste){var i=t.which;this.keyup.block=this.selection.block(),this.keyup.current=this.selection.current(),this.keyup.parent=this.selection.parent(),this.keyup.lastShiftKey=t.shiftKey;var n=this.core.callback("keyup",t);if(n===!1)return t.preventDefault(),!1;if(i===this.keyCode.ENTER&&this.keyup.block&&"FIGURE"===this.keyup.block.tagName){var r=e(this.keyup.block).prev();if(0!==r.length&&"FIGURE"===r[0].tagName){var o=this.utils.replaceToTag(r,"p");return void this.caret.start(o)}}if(i===this.keyCode.BACKSPACE||i===this.keyCode.DELETE){if(this.utils.isSelectAll())return this.focus.start(),void this.toolbar.setUnfixed();if(this.keyup.block&&this.keydown.block&&"FIGURE"===this.keyup.block.tagName&&this.utils.isStartOfElement(this.keydown.block)){t.preventDefault(),this.selection.save(),e(this.keyup.block).find("figcaption").remove(),e(this.keyup.block).find("img").first().remove(),this.utils.replaceToTag(this.keyup.block,"p");var s=this.marker.find();return e("html, body").animate({scrollTop:s.position().top+20},500),void this.selection.restore()}if(this.keyup.block&&"P"===this.keyup.block.tagName){var a=e(this.keyup.block).find("img").length,l=e(this.keyup.block).text().replace(/\u200B/g,"");""===l&&0!==a&&this.utils.replaceToTag(this.keyup.block,"figure")}this.keyup.block&&"FIGURE"===this.keyup.block.tagName&&0===e(this.keyup.block).find("img").length&&(this.selection.save(),this.utils.replaceToTag(this.keyup.block,"p"),this.selection.restore())}this.linkify.isKey(i)&&this.linkify.format()}}}},lang:function(){return{load:function(){this.opts.curLang=this.opts.langs[this.opts.lang]},get:function(e){return"undefined"!=typeof this.opts.curLang[e]?this.opts.curLang[e]:""}}},line:function(){return{insert:function(){this.buffer.set(),this.insert.html(this.line.getLineHtml());var e=this.core.editor().find("#redactor-hr-tmp-id");return e.removeAttr("id"),this.core.callback("insertedLine",e),e},getLineHtml:function(){var e='<hr id="redactor-hr-tmp-id" />';return!this.detect.isFirefox()&&this.utils.isEmpty()&&(e+="<p>"+this.opts.emptyHtml+"</p>"),e},removeOnBackspace:function(t){if(this.utils.isCollapsed()){var i=e(this.selection.block());if(0!==i.length&&this.utils.isStartOfElement(i)){var n=i.prev();n&&0!==n.length&&"HR"===n[0].tagName&&(t.preventDefault(),n.remove())}}}}},link:function(){return{get:function(){return e(this.selection.inlines("a"))},is:function(){var t=this.selection.nodes(),i=e(this.selection.current()).closest("a",this.core.editor()[0]);return 0===i.length||t.length>1?!1:i},unlink:function(e){"undefined"!=typeof e&&e.preventDefault&&e.preventDefault(),this.buffer.set();var t=this.selection.inlines("a");if(0!==t.length){var i=this.link.replaceLinksToText(t);this.observe.closeAllTooltip(),this.core.callback("deletedLink",i)}},insert:function(t,i){var n=this.link.is();if(i!==!0&&(t=this.link.buildLinkFromObject(n,t),t===!1))return!1;if(this.buffer.set(),t=this.core.callback("beforeInsertingLink",t),n===!1){n=e("<a />"),n=this.link.update(n,t),n=e(this.insert.node(n));var r=n.parent();this.utils.isRedactorParent(r)===!1&&n.wrap("<p>"),r.hasClass("redactor-unlink")&&r.replaceWith(function(){return e(this).contents()}),this.caret.after(n),this.core.callback("insertedLink",n)}else n=this.link.update(n,t),this.caret.after(n);return n},update:function(e,t){return e.text(t.text),e.attr("href",t.url),this.link.target(e,t.target),e},target:function(e,t){return t?e.attr("target","_blank"):e.removeAttr("target")},show:function(t){"undefined"!=typeof t&&t.preventDefault&&t.preventDefault(),this.observe.closeAllTooltip();var i=this.link.is();this.link.buildModal(i);var n=this.link.buildLinkFromElement(i);n.url=this.link.removeSelfHostFromUrl(n.url),this.opts.linkNewTab&&!i&&(n.target=!0),this.link.setModalValues(n),this.modal.show(),this.detect.isDesktop()&&e("#redactor-link-url").focus()},setModalValues:function(t){e("#redactor-link-blank").prop("checked",t.target),e("#redactor-link-url").val(t.url),e("#redactor-link-url-text").val(t.text)},buildModal:function(t){this.modal.load("link",this.lang.get(t===!1?"link-insert":"link-edit"),600);var i=this.modal.getActionButton();i.text(this.lang.get(t===!1?"insert":"save")).on("click",e.proxy(this.link.callback,this))},callback:function(){var e=this.link.buildLinkFromModal();return e===!1?!1:(this.modal.close(),void this.link.insert(e,!0))},cleanUrl:function(t){return"undefined"==typeof t?"":e.trim(t.replace(/[^\W\w\D\d+&\'@#/%?=~_|!:,.;\(\)]/gi,""))},cleanText:function(t){return"undefined"==typeof t?"":e.trim(t.replace(/(<([^>]+)>)/gi,""))},getText:function(e){return""===e.text&&""!==e.url?this.link.truncateUrl(e.url.replace(/<|>/g,"")):e.text},isUrl:function(e){var t="((xn--)?[\\W\\w\\D\\d]+(-[\\W\\w\\D\\d]+)*\\.)+[\\W\\w]{2,}",i=new RegExp("^(http|ftp|https)://"+t,"i"),n=new RegExp("^"+t,"i"),r=new RegExp(".(html|php)$","i"),o=new RegExp("^/","i"),s=new RegExp("^tel:(.*?)","i");return-1===e.search(i)&&-1!==e.search(n)&&-1===e.search(r)&&"/"!==e.substring(0,1)&&(e="http://"+e),-1!==e.search(i)||-1!==e.search(r)||-1!==e.search(o)||-1!==e.search(s)?e:!1},isMailto:function(e){return-1!==e.search("@")&&/(http|ftp|https):\/\//i.test(e)===!1},isEmpty:function(e){return""===e.url||""===e.text&&""===e.url},truncateUrl:function(e){return e.length>this.opts.linkSize?e.substring(0,this.opts.linkSize)+"...":e},parse:function(e){return this.link.isMailto(e.url)?e.url="mailto:"+e.url.replace("mailto:",""):0!==e.url.search("#")&&(e.url=this.link.isUrl(e.url)),this.link.isEmpty(e)||e.url===!1?!1:e},buildLinkFromModal:function(){var t={};return t.url=this.link.cleanUrl(e("#redactor-link-url").val()),t.text=this.link.cleanText(e("#redactor-link-url-text").val()),t.text=this.link.getText(t),t.target=e("#redactor-link-blank").prop("checked")?!0:!1,this.link.parse(t)},buildLinkFromObject:function(e,t){return t.url=this.link.cleanUrl(t.url),t.text="undefined"==typeof t.text&&this.selection.is()?this.selection.text():this.link.cleanText(t.text),t.text=this.link.getText(t),t.target=e===!1?t.target:this.link.buildTarget(e),this.link.parse(t)},buildLinkFromElement:function(e){var t={url:"",text:this.selection.is()?this.selection.text():"",target:!1};return e!==!1&&(t.url=e.attr("href"),t.text=e.text(),t.target=this.link.buildTarget(e)),t},buildTarget:function(e){return"undefined"!=typeof e.attr("target")&&"_blank"===e.attr("target")?!0:!1},removeSelfHostFromUrl:function(e){var t=self.location.href.replace("#","").replace(/\/$/i,"");return e.replace(/^\/\#/,"#").replace(t,"").replace("mailto:","")},replaceLinksToText:function(t){var i,n=e.each(t,function(t,n){var r=e(n),o=e('<span class="redactor-unlink" />').append(r.contents());return r.replaceWith(o),0===t&&(i=o),r});return 1===t.length&&this.selection.isCollapsed()&&this.caret.after(i),n}}},linkify:function(){return{isKey:function(e){return e===this.keyCode.ENTER||e===this.keyCode.SPACE},isLink:function(e){return e.nodeValue.match(this.opts.regexps.linkyoutube)||e.nodeValue.match(this.opts.regexps.linkvimeo)||e.nodeValue.match(this.opts.regexps.linkvimeoChannel)||e.nodeValue.match(this.opts.regexps.linkimage)||e.nodeValue.match(this.opts.regexps.url)},isFiltered:function(t,i){return 3===i.nodeType&&""!==e.trim(i.nodeValue)&&!e(i).parent().is("pre")&&this.linkify.isLink(i)},handler:function(t,i){var n=e(i),r=n.text(),o=r;o=o.match(this.opts.regexps.linkyoutube)||o.match(this.opts.regexps.linkvimeo)||o.match(this.opts.regexps.linkvimeoChannel)?this.linkify.convertVideoLinks(o):o.match(this.opts.regexps.linkimage)?this.linkify.convertImages(o):this.linkify.convertLinks(o),n.before(r.replace(r,o)).remove()},format:function(){if(this.opts.linkify&&!this.utils.isCurrentOrParent("pre")){this.core.editor().find(":not(iframe,img,a,pre,code,.redactor-unlink)").addBack().contents().filter(e.proxy(this.linkify.isFiltered,this)).each(e.proxy(this.linkify.handler,this));var t=this.core.editor().find(".redactor-linkify-object").each(e.proxy(function(t,i){var n=e(i);return n.removeClass("redactor-linkify-object"),""===n.attr("class")&&n.removeAttr("class"),"DIV"===i.tagName?this.linkify.breakBlockTag(n,"video"):"IMG"===i.tagName?this.linkify.breakBlockTag(n,"image"):"A"===i.tagName&&this.core.callback("insertedLink",n),n},this));setTimeout(e.proxy(function(){this.code.sync(),this.core.callback("linkify",t)},this),100)}},breakBlockTag:function(t,i){var n=this.utils.breakBlockTag();if(n!==!1){var r=t;"image"===i&&(r=e("<figure />").append(t)),"start"===n.type?n.$block.before(r):n.$block.after(r),"image"===i&&this.caret.after(r)}},convertVideoLinks:function(e){
var t='<div class="'+this.opts.videoContainerClass+' redactor-linkify-object"><iframe class="redactor-linkify-object" width="500" height="281" src="',i='" frameborder="0" allowfullscreen></iframe></div>';return e.match(this.opts.regexps.linkyoutube)&&(e=e.replace(this.opts.regexps.linkyoutube,t+"//www.youtube.com/embed/$1"+i)),e.match(this.opts.regexps.linkvimeo)&&(e=e.replace(this.opts.regexps.linkvimeo,t+"//player.vimeo.com/video/$2"+i)),e.match(this.opts.regexps.linkvimeoChannel)&&(e=e.replace(this.opts.regexps.linkvimeoChannel,t+"//player.vimeo.com/video/$4"+i)),e},convertImages:function(e){var t=e.match(this.opts.regexps.linkimage);return t?e.replace(e,'<img src="'+t+'" class="redactor-linkify-object" />'):e},convertLinks:function(t){var i=t.match(this.opts.regexps.url);if(!i)return t;i=e.grep(i,function(t,n){return e.inArray(t,i)===n});for(var n=i.length,r=0;n>r;r++){var o=i[r],s=o,a=null!==o.match(/(https?|ftp):\/\//i)?"":"http://";s.length>this.opts.linkSize&&(s=s.substring(0,this.opts.linkSize)+"..."),-1===s.search("%")&&(s=decodeURIComponent(s));var l="\\b";-1!==e.inArray(o.slice(-1),["/","&","="])&&(l="");var c=new RegExp("("+o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+l+")","g"),d="";this.opts.pasteLinkTarget!==!1&&(d=' target="'+this.opts.pasteLinkTarget+'"'),t=t.replace(c,'<a href="'+a+e.trim(o)+'"'+d+' class="redactor-linkify-object">'+e.trim(s)+"</a>")}return t}}},list:function(){return{toggle:function(t){if(!this.utils.inBlocks(["table","td","th","tr"])){var i="orderedlist"===t||"ol"===t?"OL":"UL";t="OL"===i?"orderedlist":"unorderedlist";var n=e(this.selection.current()).parentsUntil(".redactor-in","ul, ol").first();if(this.placeholder.hide(),this.buffer.set(),0!==n.length&&n[0].tagName===i&&this.utils.isRedactorParent(n))return this.selection.save(),n.find("ul, ol").each(function(){var t=e(this).closest("li");e(this).find("li").each(function(){e(t).after(this)})}),n.find("ul, ol").remove(),n.find("li").each(function(){return e(this).replaceWith(function(){return e("<p />").append(e(this).contents())})}),n.replaceWith(function(){return e(this).contents()}),void this.selection.restore();this.selection.save(),0!==n.length&&n[0].tagName!==i?n.each(e.proxy(function(e,t){this.utils.replaceToTag(t,i)},this)):document.execCommand("insert"+t),this.selection.restore();var r=this.list.get();if(!r)return void(this.selection.block()||document.execCommand("formatblock",!1,"p"));r.find("span").replaceWith(function(){return e(this).contents()}),r.find(this.opts.inlineTags.join(",")).each(function(){e(this).removeAttr("style")});var o=r.parent();this.utils.isRedactorParent(o)&&"LI"!==o[0].tagName&&this.utils.isBlock(o)&&(this.selection.save(),o.replaceWith(o.contents()),this.selection.restore())}},get:function(){var t=this.selection.current(),i=e(t).closest("ul, ol",this.core.editor()[0]);return 0===i.length?!1:i},combineAfterAndBefore:function(t){var i=e(t).prev(),n=e(t).next(),r=t&&"P"===t.tagName&&("<br>"===t.innerHTML||""===t.innerHTML),o=1===i.closest("ol, ul",this.core.editor()[0]).length&&1===n.closest("ol, ul",this.core.editor()[0]).length;return r&&o?(i.children("li").last().append(this.marker.get()),i.append(n.contents()),this.selection.restore(),!0):!1}}},marker:function(){return{get:function(e){e="undefined"==typeof e?1:e;var t=document.createElement("span");return t.id="selection-marker-"+e,t.className="redactor-selection-marker",t.innerHTML=this.opts.invisibleSpace,t},html:function(e){return this.utils.getOuterHtml(this.marker.get(e))},find:function(e){return e="undefined"==typeof e?1:e,this.core.editor().find("span#selection-marker-"+e)},insert:function(){var e=this.selection.get(),t=this.selection.range(e);this.marker.insertNode(t,this.marker.get(1),!0),t&&t.collapsed===!1&&this.marker.insertNode(t,this.marker.get(2),!1)},remove:function(){this.core.editor().find(".redactor-selection-marker").each(this.marker.iterateRemove)},insertNode:function(t,i,n){var r=this.selection.parent();if(null!==t&&0!==e(r).closest(".redactor-in").length){t=t.cloneRange();try{t.collapse(n),t.insertNode(i)}catch(o){this.focus.start()}}},iterateRemove:function(t,i){var n=e(i),r=n.text().replace(/\u200B/g,"");n.parent()[0];""===r?n.remove():n.replaceWith(function(){return e(this).contents()})}}},modal:function(){return{callbacks:{},templates:function(){this.opts.modal={"image-edit":String()+'<div class="redactor-modal-tab redactor-group" data-title="General"><div id="redactor-image-preview" class="redactor-modal-tab-side"></div><div class="redactor-modal-tab-area"><section><label>'+this.lang.get("title")+'</label><input type="text" id="redactor-image-title" /></section><section><label>'+this.lang.get("caption")+'</label><input type="text" id="redactor-image-caption" aria-label="'+this.lang.get("caption")+'" /></section><section><label>'+this.lang.get("link")+'</label><input type="text" id="redactor-image-link" aria-label="'+this.lang.get("link")+'" /></section><section><label class="redactor-image-position-option">'+this.lang.get("image-position")+'</label><select class="redactor-image-position-option" id="redactor-image-align" aria-label="'+this.lang.get("image-position")+'"><option value="none">'+this.lang.get("none")+'</option><option value="left">'+this.lang.get("left")+'</option><option value="center">'+this.lang.get("center")+'</option><option value="right">'+this.lang.get("right")+'</option></select></section><section><label class="checkbox"><input type="checkbox" id="redactor-image-link-blank" aria-label="'+this.lang.get("link-in-new-tab")+'"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+'</button><button id="redactor-modal-button-delete" class="redactor-modal-button-offset">'+this.lang.get("delete")+"</button></section></div></div>",image:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><div id="redactor-modal-image-droparea"></div></section></div>',file:String()+'<div class="redactor-modal-tab" data-title="Upload"><section><label>'+this.lang.get("filename")+' <span class="desc">('+this.lang.get("optional")+')</span></label><input type="text" id="redactor-filename" aria-label="'+this.lang.get("filename")+'" /><br><br></section><section><div id="redactor-modal-file-upload"></div></section></div>',link:String()+'<div class="redactor-modal-tab" data-title="General"><section><label>URL</label><input type="url" id="redactor-link-url" aria-label="URL" /></section><section><label>'+this.lang.get("text")+'</label><input type="text" id="redactor-link-url-text" aria-label="'+this.lang.get("text")+'" /></section><section><label class="checkbox"><input type="checkbox" id="redactor-link-blank"> '+this.lang.get("link-in-new-tab")+'</label></section><section><button id="redactor-modal-button-action">'+this.lang.get("insert")+'</button><button id="redactor-modal-button-cancel">'+this.lang.get("cancel")+"</button></section></div>"},e.extend(this.opts,this.opts.modal)},addCallback:function(e,t){this.modal.callbacks[e]=t},addTemplate:function(e,t){this.opts.modal[e]=t},getTemplate:function(e){return this.opts.modal[e]},getModal:function(){return this.$modalBody},getActionButton:function(){return this.$modalBody.find("#redactor-modal-button-action")},getCancelButton:function(){return this.$modalBody.find("#redactor-modal-button-cancel")},getDeleteButton:function(){return this.$modalBody.find("#redactor-modal-button-delete")},load:function(e,t,i){"undefined"!=typeof this.$modalBox&&this.$modalBox.hasClass("open")||(this.modal.templateName=e,this.modal.width=i,this.modal.build(),this.modal.enableEvents(),this.modal.setTitle(t),this.modal.setDraggable(),this.modal.setContent(),"undefined"!=typeof this.modal.callbacks[e]&&this.modal.callbacks[e].call(this))},show:function(){this.detect.isDesktop()||document.activeElement.blur(),this.selection.save(),this.modal.buildTabber(),this.detect.isMobile()&&(this.modal.width="96%"),setTimeout(e.proxy(this.modal.buildWidth,this),0),e(window).on("resize.redactor-modal",e.proxy(this.modal.buildWidth,this)),this.$modalOverlay.redactorAnimation("fadeIn",{duration:.25}),this.$modalBox.addClass("open").show(),this.$modal.redactorAnimation("fadeIn",{timing:"cubic-bezier(0.175, 0.885, 0.320, 1.105)"},e.proxy(function(){this.utils.saveScroll(),this.utils.disableBodyScroll(),this.core.callback("modalOpened",this.modal.templateName,this.$modal),e(document).off("focusin.modal");var t=this.$modal.find("input[type=text],input[type=url],input[type=email]");t.on("keydown.redactor-modal",e.proxy(this.modal.setEnter,this))},this))},buildWidth:function(){var t=e(window).height(),i=e(window).width(),n="number"==typeof this.modal.width;!n&&this.modal.width.match(/%$/)?this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}):parseInt(this.modal.width)>i?this.$modal.css({width:"96%","margin-bottom":"2%"}):(n&&(this.modal.width+="px"),this.$modal.css({width:this.modal.width,"margin-bottom":"16px"}));var r=this.$modal.outerHeight(),o=t/2-r/2+"px";this.detect.isMobile()?o="2%":r>t&&(o="16px"),this.$modal.css("margin-top",o)},buildTabber:function(){this.modal.tabs=this.$modal.find(".redactor-modal-tab"),this.modal.tabs.length<2||(this.modal.$tabsBox=e('<div id="redactor-modal-tabber" />'),e.each(this.modal.tabs,e.proxy(function(t,i){var n=e('<a href="#" rel="'+t+'" />').text(e(i).attr("data-title"));n.on("click",e.proxy(this.modal.showTab,this)),0===t&&n.addClass("active"),this.modal.$tabsBox.append(n)},this)),this.$modalBody.prepend(this.modal.$tabsBox))},showTab:function(t){t.preventDefault();var i=e(t.target),n=i.attr("rel");return this.modal.tabs.hide(),this.modal.tabs.eq(n).show(),e("#redactor-modal-tabber").find("a").removeClass("active"),i.addClass("active"),!1},setTitle:function(e){this.$modalHeader.html(e)},setContent:function(){this.$modalBody.html(this.modal.getTemplate(this.modal.templateName)),this.modal.getCancelButton().on("mousedown",e.proxy(this.modal.close,this))},setDraggable:function(){"undefined"!=typeof e.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},setEnter:function(e){13===e.which&&(e.preventDefault(),this.modal.getActionButton().click())},build:function(){this.modal.buildOverlay(),this.$modalBox=e('<div id="redactor-modal-box"/>').hide(),this.$modal=e('<div id="redactor-modal" role="dialog" />'),this.$modalHeader=e('<div id="redactor-modal-header" />'),this.$modalClose=e('<button type="button" id="redactor-modal-close" aria-label="'+this.lang.get("close")+'" />').html("&times;"),this.$modalBody=e('<div id="redactor-modal-body" />'),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalClose),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=e('<div id="redactor-modal-overlay">').hide(),e("body").prepend(this.$modalOverlay)},enableEvents:function(){this.$modalClose.on("mousedown.redactor-modal",e.proxy(this.modal.close,this)),e(document).on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.core.editor().on("keyup.redactor-modal",e.proxy(this.modal.closeHandler,this)),this.$modalBox.on("click.redactor-modal",e.proxy(this.modal.close,this))},disableEvents:function(){this.$modalClose.off("mousedown.redactor-modal"),e(document).off("keyup.redactor-modal"),this.core.editor().off("keyup.redactor-modal"),this.$modalBox.off("click§.redactor-modal"),e(window).off("resize.redactor-modal")},closeHandler:function(e){e.which===this.keyCode.ESC&&this.modal.close(!1)},close:function(t){if(t){if("redactor-modal-button-cancel"!==e(t.target).attr("id")&&t.target!==this.$modalClose[0]&&t.target!==this.$modalBox[0])return;t.preventDefault()}this.$modalBox&&(this.selection.restore(),this.modal.disableEvents(),this.utils.enableBodyScroll(),this.utils.restoreScroll(),this.$modalOverlay.redactorAnimation("fadeOut",{duration:.4},e.proxy(function(){this.$modalOverlay.remove()},this)),this.$modal.redactorAnimation("fadeOut",{duration:.3,timing:"cubic-bezier(0.175, 0.885, 0.320, 1.175)"},e.proxy(function(){"undefined"!=typeof this.$modalBox&&(this.$modalBox.remove(),this.$modalBox=void 0),this.core.callback("modalClosed",this.modal.templateName)},this)))}}},observe:function(){return{load:function(){"undefined"==typeof this.opts.destroyed&&(this.observe.links(),this.observe.images())},isCurrent:function(t,i){return"undefined"==typeof i&&(i=e(this.selection.current())),i.is(t)||i.parents(t).length>0},toolbar:function(){this.observe.buttons(),this.observe.dropdowns()},buttons:function(t,i){var n=this.selection.current(),r=this.selection.parent();return t!==!1?this.button.setInactiveAll():this.button.setInactiveAll(i),t===!1&&"html"!==i?void(-1!==e.inArray(i,this.opts.activeButtons)&&this.button.toggleActive(i)):void(this.utils.isRedactorParent(n)&&("none"!==this.core.editor().css("display")&&(this.utils.isCurrentOrParentHeader()||this.utils.isCurrentOrParent(["table","pre","blockquote","li"])?this.button.disable("horizontalrule"):this.button.enable("horizontalrule")),e.each(this.opts.activeButtonsStates,e.proxy(function(t,i){var o=e(r).closest(t,this.$editor[0]),s=e(n).closest(t,this.$editor[0]);(0===o.length||this.utils.isRedactorParent(o))&&this.utils.isRedactorParent(s)&&(0!==o.length||0!==s.closest(t,this.$editor[0]).length)&&this.button.setActive(i)},this))))},dropdowns:function(){var t=e("<div />").html(this.selection.html()).find("a").length,i=e(this.selection.current()),n=this.utils.isRedactorParent(i);e.each(this.opts.observe.dropdowns,e.proxy(function(e,r){var o=r.observe,s=o.element,a=r.item,l="undefined"!=typeof o["in"]?o["in"]:!1,c="undefined"!=typeof o.out?o.out:!1;i.closest(s).length>0&&n||"a"===s&&0!==t?this.observe.setDropdownProperties(a,l,c):this.observe.setDropdownProperties(a,c,l)},this))},setDropdownProperties:function(e,t,i){i&&"undefined"!=typeof i.attr&&this.observe.setDropdownAttr(e,i.attr,!0),"undefined"!=typeof t.attr&&this.observe.setDropdownAttr(e,t.attr),"undefined"!=typeof t.title&&e.find("span").text(t.title)},setDropdownAttr:function(t,i,n){e.each(i,function(e,i){"class"===e?n?t.removeClass(i):t.addClass(i):n?t.removeAttr(e):t.attr(e,i)})},addDropdown:function(e,t,i){"undefined"!=typeof i.observe&&(i.item=e,this.opts.observe.dropdowns.push(i))},images:function(){this.opts.imageEditable&&(this.core.editor().addClass("redactor-layer-img-edit"),this.core.editor().find("img").each(e.proxy(function(t,i){var n=e(i);n.closest("a",this.$editor[0]).on("click",function(e){e.preventDefault()}),this.image.setEditable(n)},this)))},links:function(){this.opts.linkTooltip&&this.core.editor().find("a").each(e.proxy(function(t,i){var n=e(i);n.data("cached")!==!0&&(n.data("cached",!0),n.on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.showTooltip,this)))},this))},getTooltipPosition:function(e){return e.offset()},showTooltip:function(t){var i=e(t.target);if("IMG"!==i[0].tagName&&("A"!==i[0].tagName&&(i=i.closest("a",this.$editor[0])),"A"===i[0].tagName)){var n=i,r=this.observe.getTooltipPosition(n),o=e('<span class="redactor-link-tooltip"></span>'),s=n.attr("href");void 0===s&&(s=""),s.length>24&&(s=s.substring(0,24)+"...");var a=e('<a href="'+n.attr("href")+'" target="_blank" />').html(s).addClass("redactor-link-tooltip-action"),l=e('<a href="#" />').html(this.lang.get("edit")).on("click",e.proxy(this.link.show,this)).addClass("redactor-link-tooltip-action"),c=e('<a href="#" />').html(this.lang.get("unlink")).on("click",e.proxy(this.link.unlink,this)).addClass("redactor-link-tooltip-action");o.append(a).append(" | ").append(l).append(" | ").append(c);var d=parseInt(n.css("line-height"),10),u=Math.ceil((t.pageY-r.top)/d),h=r.top+u*d;o.css({top:h+"px",left:r.left+"px"}),e(".redactor-link-tooltip").remove(),e("body").append(o),this.core.editor().on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)),e(document).on("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this))}},closeAllTooltip:function(){e(".redactor-link-tooltip").remove()},closeTooltip:function(t){t=t.originalEvent||t;var i=t.target,n=e(i).closest("a",this.$editor[0]);(0===n.length||"A"!==n[0].tagName||"A"===i.tagName)&&("A"===i.tagName&&this.utils.isRedactorParent(i)||e(i).hasClass("redactor-link-tooltip-action")||(this.observe.closeAllTooltip(),this.core.editor().off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this)),e(document).off("touchstart.redactor."+this.uuid+" click.redactor."+this.uuid,e.proxy(this.observe.closeTooltip,this))))}}},offset:function(){return{get:function(t){var i=this.offset.clone(t);if(i===!1)return 0;var n=document.createElement("div");n.appendChild(i.cloneContents()),n.innerHTML=n.innerHTML.replace(/<img(.*?[^>])>$/gi,"i");var r=e.trim(e(n).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,"");return r.length},clone:function(e){var t=this.selection.get(),i=this.selection.range(t);if(null===i&&"undefined"==typeof e)return!1;if(e="undefined"==typeof e?this.$editor:e,e===!1)return!1;e=e[0]||e;var n=i.cloneRange();return n.selectNodeContents(e),n.setEnd(i.endContainer,i.endOffset),n},set:function(e,t){t="undefined"==typeof t?e:t,this.focus.is()||this.focus.start();for(var i,n=this.selection.get(),r=this.selection.range(n),o=0,s=document.createTreeWalker(this.$editor[0],NodeFilter.SHOW_TEXT,null,null);null!==(i=s.nextNode());)if(o+=i.nodeValue.length,o>e&&(r.setStart(i,i.nodeValue.length+e-o),e=1/0),o>=t){r.setEnd(i,i.nodeValue.length+t-o);break}r.collapse(!1),this.selection.update(n,r)}}},paragraphize:function(){return{load:function(t){return this.opts.paragraphize===!1||"inline"===this.opts.type||"pre"===this.opts.type?t:""===t||"<p></p>"===t?this.opts.emptyHtml:(t+="\n",this.paragraphize.safes=[],this.paragraphize.z=0,t=t.replace(/(<br\s?\/?>){1,}\n?<\/blockquote>/gi,"</blockquote>"),t=t.replace(/<\/pre>/gi,"</pre>\n\n"),t=t.replace(/<p>\s<br><\/p>/gi,"<p></p>"),t=this.paragraphize.getSafes(t),t=t.replace("<br>","\n"),t=this.paragraphize.convert(t),t=this.paragraphize.clear(t),t=this.paragraphize.restoreSafes(t),t=t.replace(new RegExp("<br\\s?/?>\n?<("+this.opts.paragraphizeBlocks.join("|")+")(.*?[^>])>","gi"),"<p><br /></p>\n<$1$2>"),e.trim(t))},getSafes:function(t){var i=e("<div />").append(t);return i.find("blockquote p").replaceWith(function(){return e(this).append("<br />").contents()}),i.find(this.opts.paragraphizeBlocks.join(", ")).each(e.proxy(function(t,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.find("span.redactor-selection-marker").each(e.proxy(function(t,i){return this.paragraphize.z++,this.paragraphize.safes[this.paragraphize.z]=i.outerHTML,e(i).replaceWith("\n#####replace"+this.paragraphize.z+"#####\n\n")},this)),i.html()},restoreSafes:function(t){return e.each(this.paragraphize.safes,function(e,i){i="undefined"!=typeof i?i.replace(/\$/g,"&#36;"):i,t=t.replace("#####replace"+e+"#####",i)}),t},convert:function(t){t=t.replace(/\r\n/g,"xparagraphmarkerz"),t=t.replace(/\n/g,"xparagraphmarkerz"),t=t.replace(/\r/g,"xparagraphmarkerz");var i=/\s+/g;t=t.replace(i," "),t=e.trim(t);var n=/xparagraphmarkerzxparagraphmarkerz/gi;t=t.replace(n,"</p><p>");var r=/xparagraphmarkerz/gi;return t=t.replace(r,"<br>"),t="<p>"+t+"</p>",t=t.replace("<p></p>",""),t=t.replace("\r\n\r\n",""),t=t.replace(/<\/p><p>/g,"</p>\r\n\r\n<p>"),t=t.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),t=t.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),t=t.replace(new RegExp("<p><br\\s?/?>","g"),"<p>"),t=t.replace(new RegExp("<br\\s?/?></p>","g"),"</p>"),t=t.replace(/<p>&nbsp;<\/p>/gi,""),t=t.replace(/<p>\s?<br>&nbsp;<\/p>/gi,""),t=t.replace(/<p>\s?<br>/gi,"<p>")},clear:function(e){return e=e.replace(/<p>(.*?)#####replace(.*?)#####\s?<\/p>/gi,"<p>$1</p>#####replace$2#####"),e=e.replace(/(<br\s?\/?>){2,}<\/p>/gi,"</p>"),e=e.replace(new RegExp("</blockquote></p>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p></blockquote>","gi"),"</blockquote>"),e=e.replace(new RegExp("<p><blockquote>","gi"),"<blockquote>"),e=e.replace(new RegExp("<blockquote></p>","gi"),"<blockquote>"),e=e.replace(new RegExp("<p><p ","gi"),"<p "),e=e.replace(new RegExp("<p><p>","gi"),"<p>"),e=e.replace(new RegExp("</p></p>","gi"),"</p>"),e=e.replace(new RegExp("<p>\\s?</p>","gi"),""),e=e.replace(new RegExp("\n</p>","gi"),"</p>"),e=e.replace(new RegExp("<p>	?	?\n?<p>","gi"),"<p>"),e=e.replace(new RegExp("<p>	*</p>","gi"),"")}}},paste:function(){return{init:function(t){this.rtePaste=!0;var i="pre"===this.opts.type||this.utils.isCurrentOrParent("pre")?!0:!1;return this.detect.isDesktop()&&!this.paste.pre&&this.opts.clipboardImageUpload&&this.opts.imageUpload&&this.paste.detectClipboardUpload(t)?void(this.detect.isIe()&&setTimeout(e.proxy(this.paste.clipboardUpload,this),100)):(this.utils.saveScroll(),this.selection.save(),this.paste.createPasteBox(i),e(window).on("scroll.redactor-freeze",e.proxy(function(){e(window).scrollTop(this.saveBodyScroll)},this)),void setTimeout(e.proxy(function(){var t=this.paste.getPasteBoxCode(i);this.buffer.set(),this.selection.restore(),this.utils.restoreScroll();var n=this.clean.getCurrentType(t);t=this.clean.onPaste(t,n);var r=this.core.callback("paste",t);t="undefined"==typeof r?t:r,this.paste.insert(t,n),this.rtePaste=!1,i&&this.clean.cleanPre(),e(window).off("scroll.redactor-freeze")},this),1))},getPasteBoxCode:function(e){var t=e?this.$pasteBox.val():this.$pasteBox.html();return this.$pasteBox.remove(),t},createPasteBox:function(t){var i={position:"fixed",width:"1px",top:0,left:"-9999px"};this.$pasteBox=t?e("<textarea>").css(i):e("<div>").attr("contenteditable","true").css(i),this.paste.appendPasteBox(),this.$pasteBox.focus()},appendPasteBox:function(){if(this.detect.isIe())this.core.box().append(this.$pasteBox);else{var t=e(".modal-body:visible");t.length>0?t.append(this.$pasteBox):e("body").prepend(this.$pasteBox)}},detectClipboardUpload:function(t){t=t.originalEvent||t;var i=t.clipboardData;if(this.detect.isIe()||this.detect.isFirefox())return!1;var n=i.types;if(-1!==n.indexOf("public.tiff"))return t.preventDefault(),!1;if(i.items&&i.items.length){var r=i.items[0].getAsFile();if(null===r)return!1;var o=new FileReader;return o.readAsDataURL(r),o.onload=e.proxy(this.paste.insertFromClipboard,this),!0}},clipboardUpload:function(){var t=this.$editor.find("img");e.each(t,e.proxy(function(t,i){if(-1!==i.src.search(/^data\:image/i)){var n=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=e.proxy(function(t){if(this.detect.isIe())e(i).wrap(e("<figure />"));else{var n=e(i).parent();this.utils.replaceToTag(n,"figure")}i.src=t.url,this.core.callback("imageUpload",e(i),t)},this);var r=this.utils.dataURItoBlob(i.src);n.append("clipboard",1),n.append(this.opts.imageUploadParam,r),this.progress.show(),this.upload.send(n,!1),this.code.sync(),this.rtePaste=!1}}},this))},insertFromClipboard:function(e){var t=window.FormData?new FormData:null;if(window.FormData){this.upload.direct=!0,this.upload.type="image",this.upload.url=this.opts.imageUpload,this.upload.callback=this.image.insert;var i=this.utils.dataURItoBlob(e.target.result);t.append("clipboard",1),t.append(this.opts.imageUploadParam,i),this.progress.show(),this.upload.send(t,e),this.rtePaste=!1}},insert:function(t,i){i.pre?this.insert.raw(t):i.text?this.insert.text(t):this.insert.html(t,i),this.detect.isFirefox()&&this.opts.clipboardImageUpload&&setTimeout(e.proxy(this.paste.clipboardUpload,this),100)}}},placeholder:function(){return{enable:function(){setTimeout(e.proxy(function(){return this.placeholder.isEditorEmpty()?this.placeholder.show():this.placeholder.hide()},this),5)},show:function(){this.core.editor().addClass("redactor-placeholder")},update:function(e){this.opts.placeholder=e,this.core.editor().attr("placeholder",e)},hide:function(){this.core.editor().removeClass("redactor-placeholder")},is:function(){return this.core.editor().hasClass("redactor-placeholder")},init:function(){this.placeholder.enabled()&&(this.utils.isEditorRelative()||this.utils.setEditorRelative(),this.placeholder.build(),this.placeholder.buildPosition(),this.placeholder.enable(),this.placeholder.enableEvents())},enabled:function(){return this.opts.placeholder?this.core.element().attr("placeholder",this.opts.placeholder):this.placeholder.isAttr()},enableEvents:function(){this.core.editor().on("keydown.redactor-placeholder."+this.uuid,e.proxy(this.placeholder.enable,this))},disableEvents:function(){this.core.editor().off(".redactor-placeholder."+this.uuid)},build:function(){this.core.editor().attr("placeholder",this.core.element().attr("placeholder"))},buildPosition:function(){var t=e("<style />");t.addClass("redactor-placeholder-style-tag"),t.html("#"+this.core.id()+".redactor-placeholder::after "+this.placeholder.getPosition()),e("head").append(t)},getPosition:function(){return"{ top: "+this.core.editor().css("padding-top")+"; left: "+this.core.editor().css("padding-left")+"; }"},isEditorEmpty:function(){var t=e.trim(this.core.editor().html()).replace(/[\t\n]/g,""),i=["","<p>​</p>","<p>​<br></p>",this.opts.emptyHtmlRendered];return-1!==e.inArray(t,i)},isAttr:function(){return"undefined"!=typeof this.core.element().attr("placeholder")&&""!==this.core.element().attr("placeholder")},destroy:function(){this.core.editor().removeAttr("placeholder"),this.placeholder.hide(),this.placeholder.disableEvents(),e(".redactor-placeholder-style-tag").remove()}}},progress:function(){return{$box:null,$bar:null,target:document.body,show:function(){this.progress.is()?this.progress.$box.show():(this.progress.build(),this.progress.$box.redactorAnimation("fadeIn"))},hide:function(){this.progress.is()&&this.progress.$box.redactorAnimation("fadeOut",{duration:.35},e.proxy(this.progress.destroy,this))},update:function(e){this.progress.show(),this.progress.$bar.css("width",e+"%")},is:function(){return null===this.progress.$box?!1:!0},build:function(){this.progress.$bar=e("<span />"),this.progress.$box=e('<div id="redactor-progress" />'),this.progress.$box.append(this.progress.$bar),e(this.progress.target).append(this.progress.$box)},destroy:function(){this.progress.is()&&this.progress.$box.remove(),this.progress.$box=null,this.progress.$bar=null}}},selection:function(){return{get:function(){return window.getSelection?window.getSelection():document.selection&&"Control"!==document.selection.type?document.selection:null},range:function(e){return"undefined"==typeof e&&(e=this.selection.get()),e.getRangeAt&&e.rangeCount?e.getRangeAt(0):null},is:function(){return this.selection.isCollapsed()?!1:!0},isRedactor:function(){var t=this.selection.range();if(null!==t){var i=t.startContainer.parentNode;if(e(i).hasClass("redactor-in")||0!==e(i).parents(".redactor-in").length)return!0}return!1},isCollapsed:function(){var e=this.selection.get();return null===e?!1:e.isCollapsed},update:function(e,t){null!==t&&(e.removeAllRanges(),e.addRange(t))},current:function(){var e=this.selection.get();return null===e?!1:e.anchorNode},parent:function(){var e=this.selection.current();return null===e?!1:e.parentNode},block:function(t){for(t=t||this.selection.current();t;){if(this.utils.isBlockTag(t.tagName))return e(t).hasClass("redactor-in")?!1:t;t=t.parentNode}return!1},inline:function(t){for(t=t||this.selection.current();t;){if(this.utils.isInlineTag(t.tagName))return e(t).hasClass("redactor-in")?!1:t;t=t.parentNode}return!1},element:function(t){for(t||(t=this.selection.current());t;){if(1===t.nodeType)return e(t).hasClass("redactor-in")?!1:t;t=t.parentNode}return!1},prev:function(){var e=this.selection.current();return null===e?!1:this.selection.current().previousSibling},next:function(){var e=this.selection.current();return null===e?!1:this.selection.current().nextSibling},blocks:function(t){var i=[],n=this.selection.nodes(t);e.each(n,e.proxy(function(e,t){this.utils.isBlock(t)&&i.push(t)},this));var r=this.selection.block();return 0===i.length&&r===!1?[]:0===i.length&&r!==!1?[r]:i},inlines:function(t){var i=[],n=this.selection.nodes(t);e.each(n,e.proxy(function(e,t){this.utils.isInline(t)&&i.push(t)},this));var r=this.selection.inline();return 0===i.length&&r===!1?[]:0===i.length&&r!==!1?[r]:i},nodes:function(t){var i="undefined"==typeof t?[]:e.isArray(t)?t:[t],n=this.selection.get(),r=this.selection.range(n),o=[],s=[];if(this.utils.isCollapsed())o=[this.selection.current()];else{var a=r.startContainer,l=r.endContainer;if(a===l)return[this.selection.parent()];for(;a&&a!==l;)o.push(a=this.selection.nextNode(a));for(a=r.startContainer;a&&a!==r.commonAncestorContainer;)o.unshift(a),a=a.parentNode}return e.each(o,function(t,n){if(n){var r=1!==n.nodeType?!1:n.tagName.toLowerCase();if(e(n).hasClass("redactor-script-tag")||e(n).hasClass("redactor-selection-marker"))return;if(r&&0!==i.length&&-1===e.inArray(r,i))return;s.push(n)}}),0===s.length?[]:s},nextNode:function(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},save:function(){this.marker.insert(),this.savedSel=this.core.editor().html()},restore:function(e){var t=this.marker.find(1),i=this.marker.find(2);this.detect.isFirefox()&&this.core.editor().focus(),0!==t.length&&0!==i.length?this.caret.set(t,i):0!==t.length?this.caret.start(t):this.core.editor().focus(),e!==!1&&(this.marker.remove(),this.savedSel=!1)},saveInstant:function(){var e=this.core.editor()[0],t=e.ownerDocument,i=t.defaultView,n=i.getSelection();if(n.getRangeAt&&n.rangeCount){var r=n.getRangeAt(0),o=r.cloneRange();o.selectNodeContents(e),o.setEnd(r.startContainer,r.startOffset);var s=o.toString().length;return this.saved={start:s,end:s+r.toString().length,node:r.startContainer},this.saved}},restoreInstant:function(e){if("undefined"!=typeof e||this.saved){this.saved="undefined"!=typeof e?e:this.saved;var t=this.core.editor().find(this.saved.node);if(0===t.length||0!==t.text().trim().replace(/\u200B/g,"").length){var i=this.core.editor()[0],n=i.ownerDocument,r=n.defaultView,o=0,s=n.createRange();s.setStart(i,0),s.collapse(!0);for(var a,l=[i],c=!1,d=!1;!d&&(a=l.pop());)if(3==a.nodeType){var u=o+a.length;!c&&this.saved.start>=o&&this.saved.start<=u&&(s.setStart(a,this.saved.start-o),c=!0),c&&this.saved.end>=o&&this.saved.end<=u&&(s.setEnd(a,this.saved.end-o),d=!0),o=u}else for(var h=a.childNodes.length;h--;)l.push(a.childNodes[h]);var p=r.getSelection();p.removeAllRanges(),p.addRange(s)}else try{var s=document.createRange();s.setStart(t[0],0);var p=window.getSelection();p.removeAllRanges(),p.addRange(s)}catch(f){}}},node:function(t){e(t).prepend(this.marker.get(1)),e(t).append(this.marker.get(2)),this.selection.restore()},all:function(){this.core.editor().focus();var e=this.selection.get(),t=this.selection.range(e);t.selectNodeContents(this.core.editor()[0]),this.selection.update(e,t)},remove:function(){this.selection.get().removeAllRanges()},replace:function(e){this.insert.html(e)},text:function(){return this.selection.get().toString()},html:function(){var e="",t=this.selection.get();if(t.rangeCount){for(var i=document.createElement("div"),n=t.rangeCount,r=0;n>r;++r)i.appendChild(t.getRangeAt(r).cloneContents());e=this.clean.onGet(i.innerHTML)}return e},extractEndOfNode:function(e){var t=this.selection.get(),i=this.selection.range(t),n=i.cloneRange();return n.selectNodeContents(e),n.setStart(i.endContainer,i.endOffset),n.extractContents()},removeMarkers:function(){this.marker.remove()},marker:function(e){return this.marker.get(e)},markerHtml:function(e){return this.marker.html(e)}}},shortcuts:function(){return{hotkeysSpecialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",
17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hotkeysShiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},init:function(t,i){return this.opts.shortcuts===!1?(!t.ctrlKey&&!t.metaKey||66!==i&&73!==i||t.preventDefault(),!1):void e.each(this.opts.shortcuts,e.proxy(function(e,i){this.shortcuts.build(t,e,i)},this))},build:function(t,i,n){for(var r=e.proxy(function(){this.shortcuts.buildHandler(n)},this),o=i.split(","),s=o.length,a=0;s>a;a++)"string"==typeof o[a]&&this.shortcuts.handler(t,e.trim(o[a]),r)},buildHandler:function(e){var t;"-1"!==e.func.search(/\./)?(t=e.func.split("."),"undefined"!=typeof this[t[0]]&&this[t[0]][t[1]].apply(this,e.params)):this[e.func].apply(this,e.params)},handler:function(t,i,n){i=i.toLowerCase().split(" ");var r=this.shortcuts.hotkeysSpecialKeys[t.keyCode],o=String.fromCharCode(t.which).toLowerCase(),s="",a={};e.each(["alt","ctrl","meta","shift"],function(e,i){t[i+"Key"]&&r!==i&&(s+=i+"+")}),r&&(a[s+r]=!0),o&&(a[s+o]=!0,a[s+this.shortcuts.hotkeysShiftNums[o]]=!0,"shift+"===s&&(a[this.shortcuts.hotkeysShiftNums[o]]=!0));for(var l=i.length,c=0;l>c;c++)if(a[i[c]])return t.preventDefault(),n.apply(this,arguments)}}},storage:function(){return{data:[],add:function(e){e.status=!0,e.url=decodeURI(e.url),this.storage.data[e.url]=e},status:function(e,t){this.storage.data[decodeURI(e)].status=t},observe:function(){var t=this,i=this.core.editor().find("[data-image]");i.each(function(i,n){t.storage.add({type:"image",node:n,url:n.src,id:e(n).attr("data-image")})});var n=this.core.editor().find("[data-file]");n.each(function(i,n){t.storage.add({type:"file",node:n,url:n.href,id:e(n).attr("data-file")})});var r=this.core.editor().find("[data-s3]");r.each(function(i,n){var r="IMG"===n.tagName?n.src:n.href;t.storage.add({type:"s3",node:n,url:r,id:e(n).attr("data-s3")})})},changes:function(){for(var e in this.storage.data){var t=this.storage.data[e],i="IMG"===t.node.tagName?"src":"href",n=this.core.editor().find("[data-"+t.type+"]["+i+'="'+t.url+'"]');0===n.length?this.storage.status(t.url,!1):this.storage.status(t.url,!0)}return this.storage.data}}},toolbar:function(){return{build:function(){this.button.hideButtons(),this.button.hideButtonsOnMobile(),this.$toolbar=this.toolbar.createContainer(),this.toolbar.append(),this.button.$toolbar=this.$toolbar,this.button.setFormatting(),this.button.load(this.$toolbar),this.toolbar.setOverflow(),this.toolbar.setFixed()},createContainer:function(){return e("<ul>").addClass("redactor-toolbar").attr({id:"redactor-toolbar-"+this.uuid,role:"toolbar"})},append:function(){this.opts.toolbarExternal?(this.$toolbar.addClass("redactor-toolbar-external"),e(this.opts.toolbarExternal).html(this.$toolbar)):"textarea"===this.opts.type?this.$box.prepend(this.$toolbar):this.$element.before(this.$toolbar)},setOverflow:function(){this.opts.toolbarOverflow&&this.$toolbar.addClass("redactor-toolbar-overflow")},setFixed:function(){if(this.opts.toolbarFixed&&!this.opts.toolbarExternal){if(this.opts.toolbarFixedTarget!==document){var t=e(this.opts.toolbarFixedTarget);this.toolbar.toolbarOffsetTop=0===t.length?0:this.core.box().offset().top-t.offset().top}var i=0!==this.core.box().closest(".modal-body").length?1e3:0;setTimeout(e.proxy(function(){var t=this;this.toolbar.observeScroll(!1),this.detect.isDesktop()?e(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){t.core.editor().height()<100||t.placeholder.isEditorEmpty()||t.toolbar.observeScroll()}):e(this.opts.toolbarFixedTarget).on("scroll.redactor."+this.uuid,function(){t.core.editor().height()<100||t.placeholder.isEditorEmpty()||(t.core.toolbar().hide(),clearTimeout(e.data(this,"scrollCheck")),e.data(this,"scrollCheck",setTimeout(function(){t.core.toolbar().show(),t.toolbar.observeScroll()},250)))})},this),i)}},setUnfixed:function(){this.toolbar.observeScrollDisable()},getBoxTop:function(){return this.opts.toolbarFixedTarget===document?this.core.box().offset().top:this.toolbar.toolbarOffsetTop},observeScroll:function(t){var i=0;t!==!1&&(i=this.opts.toolbarFixedTarget===document?20:0);var n=e(this.opts.toolbarFixedTarget).scrollTop(),r=this.toolbar.getBoxTop();n!==r&&(n+this.opts.toolbarFixedTopOffset+i>r?this.toolbar.observeScrollEnable(n,r):this.toolbar.observeScrollDisable())},observeScrollResize:function(){this.$toolbar.css({width:this.core.box().innerWidth(),left:this.core.box().offset().left})},observeScrollEnable:function(t,i){if("undefined"!=typeof this.fullscreen&&this.fullscreen.isOpened===!1)return void this.toolbar.observeScrollDisable();var n=i+this.core.box().outerHeight()-32,r=this.core.box().innerWidth(),o=this.detect.isDesktop()?"fixed":"absolute",s=this.detect.isDesktop()?this.opts.toolbarFixedTopOffset:e(this.opts.toolbarFixedTarget).scrollTop()-i+this.opts.toolbarFixedTopOffset,a=this.detect.isDesktop()?this.core.box().offset().left:0;this.opts.toolbarFixedTarget!==document&&(o="absolute",s=this.opts.toolbarFixedTopOffset+e(this.opts.toolbarFixedTarget).scrollTop()-i,a=0),this.$toolbar.addClass("toolbar-fixed-box"),this.$toolbar.css({position:o,width:r,top:s,left:a}),t>n&&e(".redactor-dropdown-"+this.uuid+":visible").hide(),this.toolbar.setDropdownsFixed(),this.$toolbar.css("visibility",n>t?"visible":"hidden"),e(window).on("resize.redactor-toolbar."+this.uuid,e.proxy(this.toolbar.observeScrollResize,this))},observeScrollDisable:function(){this.$toolbar.css({position:"relative",width:"auto",top:0,left:0,visibility:"visible"}),this.toolbar.unsetDropdownsFixed(),this.$toolbar.removeClass("toolbar-fixed-box"),e(window).off("resize.redactor-toolbar."+this.uuid)},setDropdownsFixed:function(){var e=this.opts.toolbarFixedTarget===document&&this.detect.isDesktop()?"fixed":"absolute";this.toolbar.setDropdownPosition(e)},unsetDropdownsFixed:function(){this.toolbar.setDropdownPosition("absolute")},setDropdownPosition:function(t){var i=this;e(".redactor-dropdown-"+this.uuid).each(function(){var n=e(this),r=i.button.get(n.attr("rel")),o="fixed"===t?i.opts.toolbarFixedTopOffset:r.offset().top;n.css({position:t,top:r.innerHeight()+o+"px"})})}}},upload:function(){return{init:function(t,i,n){this.upload.direct=!1,this.upload.callback=n,this.upload.url=i,this.upload.$el=e(t),this.upload.$droparea=e('<div id="redactor-droparea" />'),this.upload.$placeholdler=e('<div id="redactor-droparea-placeholder" />').text(this.lang.get("upload-label")),this.upload.$input=e('<input type="file" name="file" multiple />'),this.upload.$placeholdler.append(this.upload.$input),this.upload.$droparea.append(this.upload.$placeholdler),this.upload.$el.append(this.upload.$droparea),this.upload.$droparea.off("redactor.upload"),this.upload.$input.off("redactor.upload"),this.upload.$droparea.on("dragover.redactor.upload",e.proxy(this.upload.onDrag,this)),this.upload.$droparea.on("dragleave.redactor.upload",e.proxy(this.upload.onDragLeave,this)),this.upload.$input.on("change.redactor.upload",e.proxy(function(e){e=e.originalEvent||e;for(var t=this.upload.$input[0].files.length,i=0;t>i;i++){var n=t-1-i;this.upload.traverseFile(this.upload.$input[0].files[n],e)}},this)),this.upload.$droparea.on("drop.redactor.upload",e.proxy(function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.upload.onDrop(e)},this))},directUpload:function(e,t){this.upload.direct=!0,this.upload.traverseFile(e,t)},onDrop:function(e){e=e.originalEvent||e;var t=e.dataTransfer.files;if(this.opts.multipleImageUpload)for(var i=t.length,n=0;i>n;n++)this.upload.traverseFile(t[n],e);else this.upload.traverseFile(t[0],e)},traverseFile:function(e,t){if(this.opts.s3)return this.upload.setConfig(e),void this.uploads3.send(e,t);var i=window.FormData?new FormData:null;if(window.FormData){this.upload.setConfig(e);var n="image"===this.upload.type?this.opts.imageUploadParam:this.opts.fileUploadParam;i.append(n,e)}this.progress.show();var r=this.core.callback("uploadStart",t,i);r!==!1&&this.upload.send(i,t)},setConfig:function(e){this.upload.getType(e),this.upload.direct&&(this.upload.url="image"===this.upload.type?this.opts.imageUpload:this.opts.fileUpload,this.upload.callback="image"===this.upload.type?this.image.insert:this.file.insert)},getType:function(e){this.upload.type=-1===this.opts.imageTypes.indexOf(e.type)?"file":"image",null===this.opts.imageUpload&&null!==this.opts.fileUpload&&(this.upload.type="file")},getHiddenFields:function(t,i){return t===!1||"object"!=typeof t?i:(e.each(t,e.proxy(function(t,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),i.append(t,n)},this)),i)},send:function(t,i){"image"===this.upload.type?(t=this.utils.appendFields(this.opts.imageUploadFields,t),t=this.utils.appendForms(this.opts.imageUploadForms,t),t=this.upload.getHiddenFields(this.upload.imageFields,t)):(t=this.utils.appendFields(this.opts.fileUploadFields,t),t=this.utils.appendForms(this.opts.fileUploadForms,t),t=this.upload.getHiddenFields(this.upload.fileFields,t));var n=new XMLHttpRequest;n.open("POST",this.upload.url),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=e.proxy(function(){if(4===n.readyState){var e=n.responseText;e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var t;try{t="string"==typeof e?JSON.parse(e):e}catch(r){t={error:!0}}this.progress.hide(),this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),this.upload.callback(t,this.upload.direct,i)}},this);var r=this.core.callback("uploadBeforeSend",n);r!==!1&&n.send(t)},onDrag:function(e){e.preventDefault(),this.upload.$droparea.addClass("drag-hover")},onDragLeave:function(e){e.preventDefault(),this.upload.$droparea.removeClass("drag-hover")},clearImageFields:function(){this.upload.imageFields={}},addImageFields:function(e,t){this.upload.imageFields[e]=t},removeImageFields:function(e){delete this.upload.imageFields[e]},clearFileFields:function(){this.upload.fileFields={}},addFileFields:function(e,t){this.upload.fileFields[e]=t},removeFileFields:function(e){delete this.upload.fileFields[e]}}},uploads3:function(){return{send:function(t,i){this.uploads3.executeOnSignedUrl(t,e.proxy(function(e){this.uploads3.sendToS3(t,e,i)},this))},executeOnSignedUrl:function(e,t){var i=new XMLHttpRequest,n=-1===this.opts.s3.search(/\?/)?"?":"&";i.open("GET",this.opts.s3+n+"name="+e.name+"&type="+e.type,!0),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined");var r=this;i.onreadystatechange=function(e){4===this.readyState&&200===this.status&&(r.progress.show(),t(decodeURIComponent(this.responseText)))},i.send()},createCORSRequest:function(e,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(e,t,!0):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest,i.open(e,t)):i=null,i},sendToS3:function(t,i,n){var r=this.uploads3.createCORSRequest("PUT",i);r&&(r.onload=e.proxy(function(){var e;if(this.progress.hide(),200!==r.status)return e={error:!0},void this.upload.callback(e,this.upload.direct,r);var t=i.split("?");if(!t[0])return!1;if(this.upload.direct||this.upload.$droparea.removeClass("drag-drop"),e={url:t[0],id:t[0],s3:!0},"file"===this.upload.type){var o=t[0].split("/");e.name=o[o.length-1]}this.upload.callback(e,this.upload.direct,n)},this),r.onerror=function(){},r.upload.onprogress=function(e){},r.setRequestHeader("Content-Type",t.type),r.setRequestHeader("x-amz-acl","public-read"),r.send(t))}}},utils:function(){return{isEmpty:function(t){return t="undefined"==typeof t?this.core.editor().html():t,t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/&nbsp;/gi,""),t=t.replace(/<\/?br\s?\/?>/g,""),t=t.replace(/\s/g,""),t=t.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),t=t.replace(/<iframe(.*?[^>])>$/i,"iframe"),t=t.replace(/<source(.*?[^>])>$/i,"source"),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*><\/[^>]+>/gi,""),t=e.trim(t),""===t},isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},strpos:function(e,t,i){var n=e.indexOf(t,i);return n>=0?n:!1},dataURItoBlob:function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:i})},getOuterHtml:function(t){return e("<div>").append(e(t).eq(0).clone()).html()},cloneAttributes:function(t,i){t=t[0]||t,i=e(i);for(var n=t.attributes,r=n.length;r--;){var o=n[r];i.attr(o.name,o.value)}return i},breakBlockTag:function(){var t=this.selection.block();if(!t)return!1;var i=this.utils.isEmpty(t.innerHTML),n=t.tagName.toLowerCase();if("pre"===n||"li"===n||"td"===n||"th"===n)return!1;if(!i&&this.utils.isStartOfElement(t))return{$block:e(t),$next:e(t).next(),type:"start"};if(!i&&this.utils.isEndOfElement(t))return{$block:e(t),$next:e(t).next(),type:"end"};var r=this.selection.extractEndOfNode(t),o=e("<"+n+" />").append(r);return o=this.utils.cloneAttributes(t,o),e(t).after(o),{$block:e(t),$next:o,type:"break"}},inBlocks:function(t){t=e.isArray(t)?t:[t];for(var i=this.selection.blocks(),n=i.length,r=!1,o=0;n>o;o++)if(i[o]!==!1){var s=i[o].tagName.toLowerCase();-1!==e.inArray(s,t)&&(r=!0)}return r},inInlines:function(t){t=e.isArray(t)?t:[t];for(var i=this.selection.inlines(),n=i.length,r=!1,o=0;n>o;o++){var s=i[o].tagName.toLowerCase();-1!==e.inArray(s,t)&&(r=!0)}return r},isTag:function(t,i){var n=e(t).closest(i,this.core.editor()[0]);return 1===n.length?n[0]:!1},isBlock:function(e){return null===e?!1:(e=e[0]||e,e&&this.utils.isBlockTag(e.tagName))},isBlockTag:function(e){return"undefined"==typeof e?!1:this.reIsBlock.test(e)},isInline:function(e){return e=e[0]||e,e&&this.utils.isInlineTag(e.tagName)},isInlineTag:function(e){return"undefined"==typeof e?!1:this.reIsInline.test(e)},isRedactorParent:function(t){return t?0===e(t).parents(".redactor-in").length||e(t).hasClass("redactor-in")?!1:t:!1},isCurrentOrParentHeader:function(){return this.utils.isCurrentOrParent(["H1","H2","H3","H4","H5","H6"])},isCurrentOrParent:function(t){var i=this.selection.parent(),n=this.selection.current();if(e.isArray(t)){var r=0;return e.each(t,e.proxy(function(e,t){this.utils.isCurrentOrParentOne(n,i,t)&&r++},this)),0===r?!1:!0}return this.utils.isCurrentOrParentOne(n,i,t)},isCurrentOrParentOne:function(e,t,i){return i=i.toUpperCase(),t&&t.tagName===i?t:e&&e.tagName===i?e:!1},isEditorRelative:function(){var t=this.core.editor().css("position"),i=["absolute","fixed","relative"];return-1!==e.inArray(i,t)},setEditorRelative:function(){this.core.editor().addClass("redactor-relative")},getScrollTarget:function(){var t=e(this.opts.scrollTarget);return 0!==t.length?t:e(document)},freezeScroll:function(){this.freezeScrollTop=this.utils.getScrollTarget().scrollTop(),this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},unfreezeScroll:function(){"undefined"!=typeof this.freezeScrollTop&&this.utils.getScrollTarget().scrollTop(this.freezeScrollTop)},saveScroll:function(){this.tmpScrollTop=this.utils.getScrollTarget().scrollTop()},restoreScroll:function(){"undefined"!=typeof this.tmpScrollTop&&this.utils.getScrollTarget().scrollTop(this.tmpScrollTop)},isStartOfElement:function(e){return("undefined"!=typeof e||(e=this.selection.block()))&&0===this.offset.get(e)?!0:!1},isEndOfElement:function(t){if("undefined"==typeof t&&(t=this.selection.block(),!t))return!1;var i=e.trim(e(t).text()).replace(/[\t\n\r\n]/g,"").replace(/\u200B/g,""),n=this.offset.get(t);return n===i.length?!0:!1},removeEmptyAttr:function(t,i){var n=e(t);return"undefined"==typeof n.attr(i)?!0:""===n.attr(i)?(n.removeAttr(i),!0):!1},replaceToTag:function(t,i){var n;return e(t).replaceWith(function(){n=e("<"+i+" />").append(e(this).contents());for(var t=0;t<this.attributes.length;t++)n.attr(this.attributes[t].name,this.attributes[t].value);return n}),n},isSelectAll:function(){return this.selectAll},enableSelectAll:function(){this.selectAll=!0},disableSelectAll:function(){this.selectAll=!1},disableBodyScroll:function(){var t=e("html"),i=window.innerWidth;if(!i){var n=document.documentElement.getBoundingClientRect();i=n.right-Math.abs(n.left)}var r=document.body.clientWidth<i,o=this.utils.measureScrollbar();t.css("overflow","hidden"),r&&t.css("padding-right",o)},measureScrollbar:function(){var t=e("body"),i=document.createElement("div");i.className="redactor-scrollbar-measure",t.append(i);var n=i.offsetWidth-i.clientWidth;return t[0].removeChild(i),n},enableBodyScroll:function(){e("html").css({overflow:"","padding-right":""}),e("body").remove("redactor-scrollbar-measure")},appendFields:function(t,i){if(!t)return i;if("object"==typeof t)return e.each(t,function(t,n){null!==n&&0===n.toString().indexOf("#")&&(n=e(n).val()),i.append(t,n)}),i;var n=e(t);if(0===n.length)return i;return n.each(function(){i.append(e(this).attr("name"),e(this).val())}),i},appendForms:function(t,i){if(!t)return i;var n=e(t);if(0===n.length)return i;var r=n.serializeArray();return e.each(r,function(e,t){i.append(t.name,t.value)}),i},isRgb:function(e){return 0===e.search(/^rgb/i)},rgb2hex:function(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},isCollapsed:function(){return this.selection.isCollapsed()},isMobile:function(){return this.detect.isMobile()},isDesktop:function(){return this.detect.isDesktop()},isPad:function(){return this.detect.isIpad()}}},browser:function(){return{webkit:function(){return this.detect.isWebkit()},ff:function(){return this.detect.isFirefox()},ie:function(){return this.detect.isIe()}}}},e(window).on("load.tools.redactor",function(){e('[data-tools="redactor"]').redactor()}),t.prototype.init.prototype=t.prototype}(jQuery),function(e){function t(t,i,n,r){var o={duration:.5,iterate:1,delay:0,prefix:"redactor-",timing:"linear"};this.animation=i,this.slide="slideDown"===this.animation||"slideUp"===this.animation,this.$element=e(t),this.prefixes=["","-moz-","-o-animation-","-webkit-"],this.queue=[],"function"==typeof n?(r=n,this.opts=o):this.opts=e.extend(o,n),this.slide&&this.$element.height(this.$element.height()),this.init(r)}e.fn.redactorAnimation=function(e,i,n){return this.each(function(){new t(this,e,i,n)})},t.prototype={init:function(e){this.queue.push(this.animation),this.clean(),"show"===this.animation?(this.opts.timing="linear",this.$element.removeClass("hide").show(),"function"==typeof e&&e(this)):"hide"===this.animation?(this.opts.timing="linear",this.$element.hide(),"function"==typeof e&&e(this)):this.animate(e)},animate:function(t){this.$element.addClass("redactor-animated").css("display","").removeClass("hide"),this.$element.addClass(this.opts.prefix+this.queue[0]),this.set(this.opts.duration+"s",this.opts.delay+"s",this.opts.iterate,this.opts.timing);var i=this.queue.length>1?null:t;this.complete("AnimationEnd",e.proxy(function(){this.$element.hasClass(this.opts.prefix+this.queue[0])&&(this.clean(),this.queue.shift(),this.queue.length&&this.animate(t))},this),i)},set:function(e,t,i,n){for(var r=this.prefixes.length;r--;)this.$element.css(this.prefixes[r]+"animation-duration",e),this.$element.css(this.prefixes[r]+"animation-delay",t),this.$element.css(this.prefixes[r]+"animation-iteration-count",i),this.$element.css(this.prefixes[r]+"animation-timing-function",n)},clean:function(){this.$element.removeClass("redactor-animated"),this.$element.removeClass(this.opts.prefix+this.queue[0]),this.set("","","","")},complete:function(t,i,n){this.$element.one(t.toLowerCase()+" webkit"+t+" o"+t+" MS"+t,e.proxy(function(){"function"==typeof i&&i(),"function"==typeof n&&n(this);var t=["fadeOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"];-1!==e.inArray(this.animation,t)&&this.$element.css("display","none"),this.slide&&this.$element.css("height","")},this))}}}(jQuery),function(e){e.Redactor.prototype.mention=function(){var t,i=null,n=!1,r=!1,o=0,s=null,a="",l=null,c=null,d=0,u=50,h=null,p={},f={},m=null,g=null,v=null;return{init:function(){if(r=!1,t=null,o=0,s=null,a="",l=null,window.usersFromComments)try{v=JSON.parse(window.usersFromComments).reduce(function(e,t){e.users[t.id]=t;for(var i=1;i<=t.screen_name.length;++i){var n=t.screen_name.substring(0,i).toLowerCase();e.store[n]?e.store[n].push(t.id):e.store[n]=[t.id]}return e},{users:{},store:{}})}catch(i){}this.$editor.on("keypress.redactor",e.proxy(this.mention.editorKeypress,this)),this.$editor.on("keydown.redactor",e.proxy(this.mention.editorKeydown,this)),this.$editor.on("keyup.redactor",e.proxy(this.mention.editorKeyup,this)),this.$editor.on("blur.redactor",e.proxy(this.mention.editorBlur,this))},editorBlur:function(e){},editorKeypress:function(e){},editorKeyup:function(t){if(13===t.which)return void(n=!1);if(!r||(t.cancel=!0,38!==t.which&&40!==t.which)){var i=this.mention.getTextLineInFrontOfCaret(),o=null,s=null;if(i.length>=d&&i.length<=u){var y=new RegExp("([@#])([^,]{"+d+","+u+"})$"),b=i.match(y);b?(!b.index||i[b.index-1].match(/\s/))&&(c=b[1],a=b[2].toLowerCase(),null!==l&&(window.clearTimeout(l),l=null),l=window.setTimeout(function(){var t=null;if("@"===c?(t="/api/user/screenNames",m=f):"#"===c&&(t="/api/projects/mentioning",m=p),l=null,t){if(s=v?v.store[a]:null,s?(o=s.map(function(e){return v.users[e]}),this.mention.ajaxSuccess.call(this,o)):o=[],g=m[a],g&&g.expiresAt>=Date.now())return void this.mention.ajaxSuccess.call(this,g.data);for(var i=a.length-1;i>0;i--){var n=a.substring(0,i),r=m[n];if(r&&r.expiresAt>=Date.now()&&!r.data.length)return void this.mention.ajaxSuccess.call(this,[])}h&&h.abort();var d={method:"GET",url:t,data:{term:a,limit:"6"}};h=e.ajax(d).done(function(e){e=e.filter(function(e){return s?s.indexOf(e.id)<0:!0}),e=o.concat(e),m[a]={data:e,expiresAt:Date.now()+6e5},this.mention.ajaxSuccess.call(this,e)}.bind(this)).always(function(){h=null})}}.bind(this),200)):this.mention.hideDropdown()}else this.mention.hideDropdown()}},editorKeydown:function(e){if(r){switch(e.which){case 9:case 13:var i=t.children().eq(o);i&&i.length&&this.mention.insertItem(null,i);break;case 38:this.mention.selectItem(-1);break;case 40:this.mention.selectItem(1);break;case 27:default:return void this.mention.hideDropdown()}e.preventDefault(),e.cancel=!0}},getTextLineInFrontOfCaret:function(){var e=this.mention.selectMention(!1);return null!==e?e.range.cloneContents().textContent.replace(/\u200B/g,"").replace(/\u00A0/g," ").trim():""},getDropdownMenuPosition:function(){var e=this.mention.selectMention();if(null===e)return null;this.selection.save(),e.selection.removeAllRanges(),e.selection.addRange(e.range);var t=e.selection.getRangeAt(0).getBoundingClientRect(),i={top:Math.round(t.bottom)+(window.scrollY||window.pageYOffset),left:Math.round(t.left)+document.body.scrollLeft};return null===s&&(s=Math.round(t.bottom-t.top)),this.selection.restore(),i},insertItem:function(t,i){t&&(t.preventDefault(),i=t.currentTarget);var n=this.mention.selectMention();if(null===n)return void this.mention.hideDropdown();var r=e(i);this.buffer.set(),n.selection.removeAllRanges(),n.selection.addRange(n.range);var o=getSelection().getRangeAt(0);o.deleteContents(),o.collapse(!0);var s=e("<a>");s.data("mention-id",r.data("item-id")),s.attr("data-mention-id",r.data("item-id")),"@"==c&&r.data("sub-name")?(s.attr("data-mention-username",r.data("sub-name")),s.attr("data-mention-user-id",r.data("item-id")),s.data("mention-username",r.data("sub-name"))):"#"===c&&r.data("name")&&s.attr("data-mention-project-id",r.data("item-id")),s.attr("href",r.data("url")),s.text(c+r.data("name")+" ");var a=s[0];o.insertNode(a),o=document.createRange(),o.selectNode(a),o.collapse(!1),n.selection.removeAllRanges(),n.selection.addRange(o),this.mention.hideDropdown()},selectMention:function(e){var t=window.getSelection();if(!t.rangeCount||!t.isCollapsed)return null;var i=t.anchorNode;if(i.nodeType===Node.TEXT_NODE&&(i=i.parentNode),!i.textContent.match(/[@#]/))return null;for(var n=this.core.editor()[0];i&&i!==n;){if(-1!==["PRE","BLOCKQUOTE"].indexOf(i.nodeName))return null;i=i.parentNode}for(var r=t.getRangeAt(0),o=r.startContainer,s=r.startOffset;o.nodeType===Node.ELEMENT_NODE;){if(0===s&&0===o.childNodes.length)return null;o=o.childNodes[s?s-1:0],s>0&&(s=o.nodeType===Node.TEXT_NODE?o.textContent.length:o.childNodes.length)}for(var l=o,d=-1;null!==l;){if(l.nodeType!==Node.TEXT_NODE)return null;var u=l.textContent.match(/[@#]/);if(u&&u.length&&(c=u[0]),c){d=l.textContent.lastIndexOf(c);break}l=l.previousSibling}if(-1===d)return null;try{r=document.createRange(),r.setStart(l,d),r.setEnd(o,s)}catch(h){return window.console.debug(h),null}if(e===!1){var p="";for(d&&(p=l.textContent.substr(0,d));(l=l.previousSibling)&&l.nodeType===Node.TEXT_NODE;)p=l.textContent+p;if(p.replace(/\u200B/g,"").match(/\S$/))return null}else if(r.cloneContents().textContent.replace(/\u200B/g,"").replace(/\u00A0/g,"").trim().toLowerCase().replace(new RegExp("^"+c),"")!==a)return null;return{range:r,selection:t}},updateDropdownPosition:function(){var e=this.mention.getDropdownMenuPosition();if(null===e)return void this.mention.hideDropdown();if(e.top+=7,t.offset(e),this.mention.selectItem(0),e.top+t.height()+10>window.innerHeight+(window.scrollY||window.pageYOffset)){var i=e.top-t.height()-2*s+7;e.top=i,t.offset(e)}},selectItem:function(e){var i=t.find(".selected");i.length&&i.removeClass("selected"),o+=e,0>o?o=t.children().length-1:o>=t.children().length&&(o=0),t.children().eq(o).addClass("selected")},hideDropdown:function(){null!==i&&i.addClass("hide"),r=!1,c=null,o=0},ajaxSuccess:function(n){if(!Array.isArray(n)||!n.length||!c)return void this.mention.hideDropdown();var o;o="@"==c?e.map(n,function(e){return{id:e.id,name:e.screen_name,imageUrl:e.avatar_url||"/img/default-avatar.png",subName:e.username,url:"/hacker/"+e.id}}):e.map(n,function(e){return{id:e.id,name:e.name,imageUrl:utils.resizeImage(e.image_url,"60x60")||"/img/placeholder.png",subName:null,url:"/project/"+e.id}}),null===i&&(i=e("<div>"),i.addClass("suggestions hide"),e(document.body).append(i)),null===t&&(t=e("<ul>"),i.append(t)),t.html(""),i.removeClass("hide");for(var s,a,l,d,u=0,h=o.length;h>u;u++)l=o[u],s=e("<li />"),a=e("<img />"),a.attr("src",l.imageUrl),s.on("mousedown",e.proxy(this.mention.insertItem,this)),s.append(a),s.append(" "),s.append(e("<span>").text(l.name)),d=e("<small>"),l.subName&&d.append(e("<span>").text(l.subName)),d.append(" ID ").append(e("<span>").text(l.id)),s.append(d),s.data("item-id",l.id),s.data("sub-name",l.subName),s.data("name",l.name),s.data("url",l.url),t.append(s);r=!0,this.mention.updateDropdownPosition()}}}}(jQuery);var editingCommentId=0,replyingCommentId=0,$inputComment=$(".redactor-comment");$(".j-discussion-add").submit(function(e){function t(e){var t="#j-discussion-add";$("#j-discussion-reply").insertAfter(t).hide(),$("#j-discussion-edit").insertAfter(t).hide(),resetEditors(),$("#discussion-list").html(e);var i=$("#discussion-list").find(".discussions-item").length;i>9&&$("#j-discussion-add-top").show(),$("#addCommentErrorMessage").hide(),$("#addCommentErrorMessageTop").hide(),$(document).scrollTop($("#j-discussions-title").offset().top),updateCommentsCount()}function i(e){if(e.responseJSON)r(e.responseJSON.message);else{var t=401===e.status?"Email not verified; message has not been sent.":"System error!";r(t,s)}}function n(){o(),h.prop("disabled",!1)}function r(e,t){var i=$(".error-message",t);i.show().html("<p>"+e+"</p>"),c.redactor("focus.end")}function o(){var e=document.URL,t=$('input[name="pagination"]').val(),i=t?$.parseJSON(t):!1,n=new RegExp(/(\?|\&)(page=)(\d+)/),r=e.match(n);r&&i&&window.history.pushState("html","",e.replace(n,"$1$2"+i.page))}e.preventDefault();var s=this,a=$(s),l=a.serializeArray(),c=a.find("textarea"),d=utils.formatRedactorContent(c.val());if(!d)return!1;for(var u=0;u<l.length;++u)if("comment"===l[u].name){l[u].value=d;break}var h=$(e.target).find('input[type="submit"]');h.prop("disabled",!0),l.push({name:"redirect",value:!1}),l.push({name:"page",value:1}),$.ajax({url:a.attr("action"),method:"POST",data:$.param(l),dataType:"html",success:t,error:i,complete:n})}),$(".j-discussion-edit").submit(function(e){function t(e){hideEditor(),$("#j-discussion-reply").insertAfter("#j-discussion-add").hide(),$("#j-discussion-edit").insertAfter("#j-discussion-add").hide(),$("#comment-"+e.id+"-content").html(e.comment),$("#editCommentErrorMessage").hide()}function i(e){if(e.responseJSON)r(e.responseJSON.message);else{var t=401===e.status?"Email not verified; message has not been sent.":"System error!";r(t)}}function n(){u.prop("disabled",!1)}function r(e){$("#editCommentErrorMessage").show(),$("#editCommentErrorMessage").html("<p>"+e+"</p>"),l.redactor("focus.end")}e.preventDefault();var o=this,s=$(o),a=s.serializeArray(),l=s.find("textarea"),c=utils.formatRedactorContent(l.val());if(!c)return!1;for(var d=0;d<a.length;++d)if("comment"===a[d].name){a[d].value=c;break}a.push({name:"redirect",value:!1});var u=$(e.target).find('input[type="submit"]');u.prop("disabled",!0),$.ajax({url:$(o).attr("action"),method:"POST",data:$.param(a),dataType:"json",success:t,error:i,complete:n})}),$("#j-discussion-reply").submit(function(e){function t(e){resetEditors(),$("#j-discussion-edit").insertAfter("#j-discussion-add").hide(),$(s).hide().appendTo("body"),$("#discussion-list").html(e);var t=$("#discussion-list").find(".discussions-item").length;t>9&&$("#j-discussion-add-top").show(),$("#replyCommentErrorMessage").hide(),scrollToComment(d),updateCommentsCount()}function i(){p.prop("disabled",!1)}function n(e){if(e.responseJSON)r(e.responseJSON.message);else{var t=401===e.status?"Email not verified; message has not been sent.":"System error!";r(t)}}function r(e){$("#replyCommentErrorMessage").show(),$("#replyCommentErrorMessage").html("<p>"+e+"</p>"),c.redactor("focus.end")}function o(){if(h)return h;var e=$('input[name="pagination"]').length?$('input[name="pagination"]').val():null,t=e?$.parseJSON(e):null,i=t?t.page-1:0;return i}e.preventDefault();var s=this,a=$(s),l=a.serialize(),c=a.find("textarea"),d=$("#replyToInput").val(),u=!c.val()||!c.val().trim(),h=o();if(u)return!1;var p=$(e.target).find('input[type="submit"]');p.prop("disabled",!0),l+="&redirect=false&page="+(h+1),$.ajax({url:$(s).attr("action"),method:"POST",data:l,dataType:"html",success:t,error:n,complete:i})}),$("#discussion-list").on("click",".j-discussion-delete",function(e){var t=this,i=$(this).parents(".discussions-item"),n=i.find(".delete-options"),r=i.find(".delete-confirm");e.preventDefault(),n.hide(),r.show(),r.find(".delete-no").on("click",function(e){e.preventDefault(),n.show(),r.hide()}),r.find(".delete-yes").on("click",function(e){e.preventDefault(),$("#j-discussion-reply").insertAfter("#j-discussion-add").hide(),i.fadeOut(300);var n=n||0;$.ajax({url:$(t).attr("href"),type:"GET",data:"redirect=false&page="+(n+1),dataType:"html",success:function(e){$("#j-discussion-reply").insertAfter("#j-discussion-add").hide(),$("#j-discussion-edit").insertAfter("#j-discussion-add").hide(),$("#discussion-list").html(e),updateCommentsCount(!1)},error:function(e){window.console}})})}),$("#discussion-list").on("click",".comment-reply",function(e){e.preventDefault(),hideReplyForm();var t=$(this).data("replyto");replyingCommentId=t,$("#actions-"+t).hide(),$("#replyToInput").val(t),$("#j-discussion-reply").show().appendTo($("#actions-"+t).parent()),
$("#j-discussion-reply .redactor-comment").redactor("focus.end")}),$("#discussion-list").on("click",".comment-edit",function(e){e.preventDefault(),hideEditor();var t=$(this).data("commentid"),i=$("#comment-"+t+"-content").html();editingCommentId=t,$("#commentIdInput").val(t),$("#actions-"+t).hide(),$("#comment-"+t+"-content").hide(),$("#comment-"+t+"-editor").show(),$("#j-discussion-edit").show().appendTo($("#comment-"+t+"-editor")),$("#j-discussion-edit .redactor-comment").redactor("code.set",i),$("#j-discussion-edit .redactor-comment").redactor("focus.end")});var hideEditor=function(){editingCommentId&&($("#actions-"+editingCommentId).show(),$("#comment-"+editingCommentId+"-content").show(),$("#comment-"+editingCommentId+"-editor").hide(),$("#j-discussion-edit").hide(),$("#commentIdInput").val(""),resetEditors(),$("#editCommentErrorMessage").hide(),editingCommentId=0)};$(".j-button-cancel-editing").click(function(e){hideEditor()});var hideReplyForm=function(){replyingCommentId&&($("#actions-"+replyingCommentId).show(),$("#j-discussion-reply").insertAfter("#j-discussion-add").hide(),$("#replyCommentErrorMessage").hide(),replyingCommentId=0)};$(".j-button-cancel-replying").click(function(e){hideReplyForm()}),$("#discussion-list").on("click",".j-voting-action",function(e){e.preventDefault();var t,i,n,r=$(this).attr("href"),o=r.split("/"),s=o[3],a=$(this).data("action"),l=this;if("up"===a)t="voted-up",i="voted-down",n=$(this).attr("id").replace("up","down"),r+=$(this).hasClass(t)?"/delete":"/up";else{if("down"!==a)return!1;t="voted-down",i="voted-up",n=$(this).attr("id").replace("down","up"),r+=$(this).hasClass(t)?"/delete":"/down"}$.ajax({url:r,timeout:15e3,success:function(e){e.error?alert(e.error):($(l).toggleClass(t),$("#"+n).removeClass(i),null!==e.points?($("#comment-points-holder-"+s).show(),$("#comment-points-"+s).html(e.points+pluralize(e.points," point"))):$("#comment-points-holder-"+s).hide())},error:function(){alert("error")}})});var updateCommentsCount=function(e){"undefined"==typeof e&&(e=!0);var t=$(".comment_count span"),i=0;t.length&&t.each(function(){i=parseInt($(this).text()),$(this).text(i+(e?1:-1))})};$(".signup-holder.textarea-holder .redactor-comment, .login-button").click(function(e){$(".modal-background, .login-modal").show(),$("#login-modal-signin").attr("href","/signin?returnUrl="+encodeURIComponent(window.location.pathname))}),$(".modal-close, .j-modal-close, .modal-cancel, .modal-background").click(function(){$(".modal-background, .modal-content-holder").hide()}),$inputComment.length&&$inputComment.redactor&&$inputComment.redactor({minHeight:78,toolbar:!1,pastePlainText:!0,cleanSpaces:!1,linkSize:256,convertLinksVideo:!1,convertLinksImages:!1,observeLinks:!0,convertLinks:!0,convertUrlLinks:!0,linkify:!1,shortcuts:!1,plugins:["mention"],callbacks:{init:function(){this.$editor.on("keyup.redactor",function(){window.setTimeout(function(){this.utils.isEmpty(this.code.get())||this.placeholder.hide()}.bind(this),100)}.bind(this))}}}),"undefined"!=typeof commentIdPointed&&scrollToComment(commentIdPointed),$(function(){$("body").on("click","a.j-report-link",function(e){e.preventDefault();var t=$(this),i=($(this).data("type"),$(this).data("targetId")),n=$(this).data("successMessageId"),r=$(this).data("targetDescription"),o=$(this).data("targetTitle"),s=$(this).data("modalId")||"modal-report",a=$(this).data("modalBackId")||"modal-report-back",l="#"+s+", #"+a;$(l).show();var c=function(){$("#"+s+" .j-modal-form-message").removeClass("error-message").html("")},d=function(){$("#"+s+" .j-modal-form").show(),$("#"+s+" .j-modal-message").hide(),$("#"+s+' input[type="submit"]').removeAttr("disabled"),$("#"+s+" .j-report-comment").val(""),c()},u=function(){$("#"+s+" form").unbind("submit",p)};if(d(),i&&$("#"+s+' .j-modal-form input[name="targetId"]').val(i),r||o){var h=""+(r||o);h=h.replace(/&nbsp;/g," "),$("#"+s+" .j-modal-form .j-report-target-description").html(h)}$("#"+s).on("click",".modal-close",function(e){$(l).hide(),u()}),$(".j-report-comment").change(function(){""!==$("#"+s+" .j-report-comment").val()&&($("#"+s+" .j-report-comment").removeClass("field-error"),c())});var p=function(e){if(e.preventDefault(),""===$("#"+s+" .j-report-comment").val())return void $("#"+s+" .j-report-comment").addClass("field-error");var i=$(this);c(),$("#"+s+" .j-modal-form-message").html("<div class='loading-animation'></div>").show(),$("#"+s+' input[type="submit"]').attr("disabled","disabled"),$.ajax({url:i.attr("action"),data:i.serialize(),method:"post",timeout:5e3,success:function(e){$("#"+s+" .j-modal-form").hide(),$("#"+s+" .j-modal-message").html(e).show(),$("#"+n).show(),t.hide()},error:function(e){var t=401===e.status?"<p>You must be verified to perform this action.</p>":"<p>Error occured, Please try again!</p>";d(),$("#"+s+" .j-modal-form-message").addClass("error-message").html(t)},complete:function(){u()}})};$("#"+s+" form").bind("submit",p)})}),$(function(){utils.addLinksToImages(".post-content")}),$(function(){$("#onboarding-ga, #onboarding-ga-alt, #onboarding-ga-recreate, #onboarding-ga-footer").submit(function(e){e.preventDefault();var t,i=$(this).attr("id"),n=window.location.pathname.split("/")[1];"onboarding-ga"===i?(t=$("#onboarding-ga")[0],""===n?n="/homepage":"signup"===n&&(n="/"+n)):"onboarding-ga-recreate"===i?(t=$("#onboarding-ga-recreate")[0],n="/"+n+" : recreate"):"onboarding-ga-alt"===i?(t=$("#onboarding-ga-alt")[0],n="/"+n+" : alternate modal"):"onboarding-ga-footer"===i&&(t=$("#onboarding-ga-footer")[0],n="/"+n+" : footer modal"),ga("send","event",{eventCategory:"onboarding",eventAction:"submit",eventLabel:n,hitCallback:createFunctionWithTimeout(function(){t.submit()})})})});