define("discourse/plugins/discourse-custom-webhooks/controllers/zendesk-assignation-note",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax"],(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Controller.extend(t.default,{department:"",note:"",zendesk_id:"",dirty:!1,actions:{sendToZendesk:function(){var e=this;$("#submit-zendesk").attr("disabled","disabled");var t=this;this.set("dirty",!0),(0,n.ajax)("/zendesk-plugin/issues",{type:"POST",data:{topic_id:this.model.get("id"),department:this.department,note:this.note}}).then((function(n){t.set("zendesk_id",n.discourse_zendesk_plugin_zendesk_id),t.set("zendesk_url",n.discourse_zendesk_plugin_zendesk_url),t.set("dirty",!0),e.reloadTopic(n),e._close()}))},setSelection:function(e){this.department=e}},_close:function(){this.setProperties({department:"",note:""}),this.send("closeModal")}});e.default=s})),define("discourse/plugins/discourse-custom-webhooks/discourse_custom_webhooks/initializers/init-zendesk-customization",["exports","discourse/lib/show-modal","discourse/lib/plugin-api","discourse/plugins/Discourse Zendesk Plugin/discourse-zendesk-plugin/connectors/after-topic-footer-buttons/zendesk-topic-actions"],(function(e,t,n,s){"use strict";function o(e){null!=s.default&&(s.default.actions.createZendeskIssue=function(e){(0,t.default)("zendesk-assignation-note",{admin:!1,title:"zendesk.modal_popup_title",model:this.get("topic")}).reloadTopic=function(e){return s.default.reloadTopic(e)}},s.default.reloadTopic=function(e){s.default.zendesk_id=e.discourse_zendesk_plugin_zendesk_id,s.default.zendesk_url=e.discourse_zendesk_plugin_zendesk_url,s.default.dirty=!0,Discourse.__container__.lookup("router:main").transitionTo("discovery.categories"),Discourse.__container__.lookup("router:main").transitionTo("topic",e.slug,e.id)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"zendesk-customization",initialize:function(e){(0,n.withPluginApi)("0.8.7",o)}};e.default=i})),Ember.TEMPLATES["javascripts/modal/zendesk-assignation-note"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["class"],["zendesk-assignation-note"]],{"statements":[[0,"  "],[7,"div",true],[10,"class","zendesk-assignation-note-form"],[8],[0,"\\n    "],[7,"div",true],[10,"class","zendesk-assignation-note-control"],[8],[0,"\\n      "],[7,"select",true],[11,"onchange",[28,"action",[[23,0,[]],"setSelection"],[["value"],["target.value"]]]],[8],[0,"\\n        "],[7,"option",true],[10,"disabled",""],[10,"selected",""],[8],[0,"Assign to a department"],[9],[0,"\\n        "],[7,"option",true],[10,"value","39208428"],[8],[0,"Customer Service"],[9],[0,"\\n        "],[7,"option",true],[10,"value","41010727"],[8],[0,"RMA"],[9],[0,"\\n        "],[7,"option",true],[10,"value","41050288"],[8],[0,"Tech 1/2"],[9],[0,"\\n        "],[7,"option",true],[10,"value","41729027"],[8],[0,"Tech 3"],[9],[0,"\\n        "],[7,"option",true],[10,"value","42109728"],[8],[0,"Community"],[9],[0,"\\n        "],[7,"option",true],[10,"value","41952627"],[8],[0,"Content"],[9],[0,"\\n     "],[9],[0,"\\n    "],[9],[0,"\\n    "],[7,"div",true],[10,"class","zendesk-assignation-note-control"],[8],[0,"\\n      "],[1,[28,"textarea",null,[["id","value","wrap"],["internal-note",[24,["note"]],"off"]]],false],[0,"\\n    "],[9],[0,"\\n  "],[9],[0,"\\n"]],"parameters":[]},null],[7,"div",true],[10,"class","modal-footer"],[8],[0,"\\n  "],[1,[28,"d-button",null,[["id","class","action","label"],["submit-zendesk","btn-primary","sendToZendesk","composer.modal_ok"]]],false],[0,"\\n  "],[1,[28,"d-modal-cancel",null,[["close"],[[28,"action",[[23,0,[]],"closeModal"],null]]]],false],[0,"\\n"],[9]],"hasEval":false}',meta:{moduleName:"javascripts/modal/zendesk-assignation-note"}});